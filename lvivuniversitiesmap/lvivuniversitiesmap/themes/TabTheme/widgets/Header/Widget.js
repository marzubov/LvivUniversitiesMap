//>>built
require({cache:{"themes/TabTheme/widgets/Header/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:themes/TabTheme/widgets/Header/Widget.html":'\x3cdiv\x3e\r\n  \x3cimg class\x3d"logo" data-dojo-attach-point\x3d"logoNode"\x3e\r\n  \x3cdiv class\x3d"titles" data-dojo-attach-point\x3d"titlesNode"\x3e\r\n    \x3cdiv class\x3d"title" data-dojo-attach-point\x3d"titleNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"subtitle" data-dojo-attach-point\x3d"subtitleNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"links" data-dojo-attach-point\x3d"linksNode"\x3e\r\n    \x3cspan class\x3d"dynamic-section" data-dojo-attach-point\x3d"dynamicLinksNode"\x3e\x3c/span\x3e\r\n    \x3ca class\x3d"link" href\x3d"#" data-dojo-attach-point\x3d"aboutNode" data-dojo-attach-event\x3d"onclick:_onAboutClick"\x3e${nls.about}\x3c/a\x3e\r\n    \x3cspan class\x3d"signin-section" data-dojo-attach-point\x3d"signInSectionNode"\x3e\r\n      \x3ca href\x3d"#" class\x3d"link" data-dojo-attach-event\x3d"onclick:_onSigninClick"\r\n      data-dojo-attach-point\x3d"signinLinkNode"\x3e${nls.signin}\x3c/a\x3e\r\n      \x3ca href\x3d"#" target\x3d"_blank" class\x3d"link" data-dojo-attach-event\x3d"onclick:_onUserNameClick" data-dojo-attach-point\x3d"userNameLinkNode"\x3e\x3c/a\x3e\r\n      \x3ca href\x3d"#" class\x3d"link" data-dojo-attach-event\x3d"onclick:_onSignoutClick" data-dojo-attach-point\x3d"signoutLinkNode"\x3e${nls.signout}\x3c/a\x3e\r\n    \x3c/span\x3e\r\n    \r\n  \x3c/div\x3e    \r\n\x3c/div\x3e',
"url:themes/TabTheme/widgets/Header/css/style.css":".jimu-widget-header .header-section{height: 100%; float: left;}.jimu-widget-header .container-section{height: 100%; float: left;}.jimu-widget-header .logo{float: left; margin-left: 14px; cursor: pointer;}.jimu-widget-header .titles{float: left; margin-left: 14px; height: 100%;}.jimu-widget-header .title{float: left; color:#fff; text-align: center; height: 100%; font-size: 24px;}.jimu-widget-header .subtitle{float: left; margin-left: 20px; color:#6d7685; font-size: 12px; text-align: center; height: 100%; font-weight: bold;}.jimu-widget-header .links{float: right; height: 100%; margin-right: 40px;}.jimu-widget-header .links .link{color:#6d7685; font-size: 14px; font-weight: bold; margin-left: 12px; text-decoration: none; height: 100%; display: inline-block;}.jimu-widget-header .signin-section .link{color: #d9dde0;}.jimu-widget-header .group-icon-node{float: right; cursor: pointer; opacity: 0.4; text-align: center; border-right: 1px solid #323e4f;}.jimu-widget-header .group-icon-node:first-child{border: none;}.jimu-widget-header .group-icon-node:hover{opacity: 1;}.jimu-widget-header .group-icon-node.jimu-state-selected{background-color: #697a8c; opacity: 1; border: none; border-top: 2px solid #8491a1;}.popup-links{background-color: #252824;}.popup-links .popup-title{}.popup-links .logo{float: left; margin-left: 14px;}.popup-links .title{float: left; color:#fff; text-align: center; font-size: 24px; margin-left: 14px;}.popup-links .line{width: 100%; height: 4px; border-top: 1px solid #14161a; border-bottom: 1px solid #393c40;}.popup-links .link-section{width: 100%; height: 66px; background-color: #252824;}.popup-links a{color: #6d7685; margin-left: 20px; font-size: 14px; height: 100%; display: inline-block;}.popup-links .link-section.signin a{color: #d9dde0;}",
"*now":function(g){g(['dojo/i18n!*preload*themes/TabTheme/widgets/Header/nls/Widget*["ar","cs","da","de","en","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/topic dojo/aspect dojo/query dojo/NodeList-dom dojo/NodeList-manipulate dojo/on require jimu/BaseWidget jimu/tokenUtils jimu/portalUtils jimu/utils jimu/dijit/Message".split(" "),function(g,f,l,a,r,s,e,t,u,h,v,n,k,p,m,q){return g([n],{baseClass:"jimu-widget-header jimu-main-bgcolor",name:"Header",switchableElements:{},constructor:function(){this.height=this.getHeaderHeight()+"px"},postCreate:function(){this.inherited(arguments);
var b=this.getLogoHeight()+"px";this.position&&this.position.height&&(this.height=this.position.height);this.switchableElements.logo=e(".logo",this.domNode);this.switchableElements.title=e(".title",this.domNode);this.switchableElements.links=e(".links",this.domNode);this.switchableElements.subtitle=e(".subtitle",this.domNode);this.switchableElements.logo.style({height:b});a.setStyle(this.signInSectionNode,"display","none");this._setElementsSize()},startup:function(){this.inherited(arguments);this.switchableElements.logo.attr("src",
this.appConfig.logo?this.appConfig.logo:this.folderUrl+"images/app-logo.png");this.switchableElements.title.innerHTML(this.appConfig.title?this.appConfig.title:"ArcGIS Web Application");this.switchableElements.subtitle.innerHTML(this.appConfig.subtitle?this.appConfig.subtitle:"A configurable web application");this._createDynamicLinks(this.appConfig.links);this.appConfig.about?a.setStyle(this.aboutNode,"display",""):a.setStyle(this.aboutNode,"display","none")},onAppConfigChanged:function(b,a,d){switch(a){case "attributeChange":this._onAttributeChange(b,
d);break;default:return}this.resize()},_onAttributeChange:function(a,c){c.title&&c.title!==this.appConfig.title&&this.switchableElements.title.innerHTML(c.title);c.subtitle&&c.subtitle!==this.appConfig.subtitle&&this.switchableElements.subtitle.innerHTML(c.subtitle);c.logo&&this.switchableElements.logo.attr("src",c.logo);c.links&&this._createDynamicLinks(c.links)},_setElementsSize:function(){a.setStyle(this.logoNode,{height:"30px",marginTop:(this.height-30)/2+"px"});a.setStyle(this.titleNode,{lineHeight:this.height+
"px"});a.setStyle(this.subtitleNode,{lineHeight:this.height+"px"});e(".link",this.domNode).style({lineHeight:this.height+"px"})},_createDynamicLinks:function(b){a.empty(this.dynamicLinksNode);l.forEach(b,function(b){a.create("a",{href:b.url,target:"_blank",innerHTML:b.label,"class":"link",style:{lineHeight:this.height+"px"}},this.dynamicLinksNode)},this)},onSignIn:function(b){this.inherited(arguments);a.setStyle(this.signinLinkNode,"display","none");a.setStyle(this.userNameLinkNode,"display","inline");
a.setStyle(this.signoutLinkNode,"display","inline");this.userNameLinkNode.innerHTML=b.userId;a.setAttr(this.userNameLinkNode,"href",this.appConfig.portalUrl+"home/user.html");this.popupLinkNode&&(a.setStyle(this.popupSigninNode,"display","none"),a.setStyle(this.popupUserNameNode,"display","block"),a.setStyle(this.popupSignoutNode,"display","block"),e("a",this.popupUserNameNode).html(b.userId).attr("href",this.appConfig.portalUrl+"home/user.html"));this.resize()},onSignOut:function(b){this.inherited(arguments);
this._onSignOut(b);p.getPortal(this.appConfig.portalUrl).loadSelfInfo().then(f.hitch(this,function(b){this._onSignOut(this.nls.signInTo+" "+b.name)}),f.hitch(this,function(b){console.error(b)}))},_onSignOut:function(b){a.setStyle(this.signinLinkNode,"display","inline");a.setAttr(this.signinLinkNode,"innerHTML",b);a.setStyle(this.userNameLinkNode,"display","none");a.setStyle(this.signoutLinkNode,"display","none");this.userNameLinkNode.innerHTML="";this.popupLinkNode&&(a.setStyle(this.popupSigninNode,
"display","block"),a.setAttr(this.popupSigninNode,"innerHTML",b),a.setStyle(this.popupUserNameNode,"display","none"),a.setStyle(this.popupSignoutNode,"display","none"),e("a",this.popupUserNameNode).html(""));this.resize()},switchElements:function(b){var a=this.switchableElements,d;for(d in a)a.hasOwnProperty(d)&&("logo"===d?a[d].style("display","block"):-1<b.indexOf(d)?a[d].style("display","block"):a[d].style("display","none"));this.logoClickHandle&&this.logoClickHandle.remove();0>b.indexOf("links")?
(this.linksVisible=!1,this.logoClickHandle=h(a.logo[0],"click",f.hitch(this,this.switchPopupLinks))):this.linksVisible&&this.switchPopupLinks()},switchSignin:function(){var a=k.getPortalCredential(this.appConfig.portalUrl);if(a)this.onSignIn(a);else this.onSignOut()},switchPopupLinks:function(){this.popupLinkNode||(this.popupLinkNode=this.createPopupLinkNode(),this.switchSignin());this.linksVisible?(this.linksVisible=!1,a.setStyle(this.popupLinkNode,"display","none"),a.setStyle(jimuConfig.layoutId,
{left:0})):(this.linksVisible=!0,a.setStyle(this.popupLinkNode,"display","block"),a.setStyle(jimuConfig.layoutId,{left:a.getContentBox(this.popupLinkNode).w+"px"}))},createPopupLinkNode:function(){var b,c;c=a.getContentBox(jimuConfig.configPreviewId);b=a.create("div",{"class":"popup-links",style:{position:"absolute",zIndex:100,left:0,top:0,bottom:0,width:c.w-50+"px"}},jimuConfig.configPreviewId);c=a.create("div",{"class":"popup-title",style:{height:this.getHeaderHeight()+"px",width:"100%"}},b);a.create("img",
{"class":"logo jimu-vcenter",src:this.config.logo?this.config.logo:this.folderUrl+"images/app-logo.png",style:{width:this.getLogoHeight()+"px",height:this.getLogoHeight()+"px"}},c);a.create("div",{"class":"title jimu-vcenter",innerHTML:this.appConfig.title},c);m.setVerticalCenter(c);l.forEach(this.appConfig.links,function(a){this.createLinkNode(b,a,!1)},this);this.popupSigninNode=this.createLinkNode(b,{label:"SignIn",url:"#"},!0);this.popupUserNameNode=this.createLinkNode(b,{label:"",url:"#"},!0);
this.popupSignoutNode=this.createLinkNode(b,{label:"SignOut",url:"#"},!0);this.own(h(this.popupSigninNode,"click",f.hitch(this,"_onSigninClick")));this.own(h(this.popupSignoutNode,"click",f.hitch(this,"_onSignoutClick")));m.setVerticalCenter(b);this.createLinkNode(b,{label:"",url:"#"},!1);return b},createLinkNode:function(b,c,d){b=a.place('\x3cdiv class\x3d"link"\x3e\x3c/div\x3e',b);a.place('\x3cdiv class\x3d"line"\x3e\x3c/div\x3e',b);d=a.place('\x3cdiv class\x3d"'+(d?"link-section signin":"link-section")+
'"\x3e\x3c/div\x3e',b);a.create("a",{href:c.url,target:"_blank",innerHTML:c.label,"class":"jimu-vcenter-text"},d);return b},_onSigninClick:function(){k.signInPortal(this.appConfig.portalUrl,this.appConfig.appId)},_onSignoutClick:function(){this.appConfig.mode?new q({message:this.nls.cantSignOutTip}):k.signOutAll()},_onUserNameClick:function(){},_onAboutClick:function(){this.widgetManager.loadWidget({id:this.appConfig.about+"_1",uri:this.appConfig.about,label:"About"}).then(f.hitch(this,function(b){a.place(b.domNode,
jimuConfig.layoutId);b.startup()}))},resize:function(){var b=a.getContentBox(this.domNode);b.w<=jimuConfig.widthBreaks[0]?this.switchElements([]):b.w<=jimuConfig.widthBreaks[1]?this.switchElements(["title","links"]):this.switchElements(["title","links","subtitle"])},getHeaderHeight:function(){return 44},getHeaderEmptyWidth:function(){return 0.125*a.getMarginBox(this.domNode).w},getLogoHeight:function(){return 34}})});