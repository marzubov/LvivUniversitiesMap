//>>built
require({cache:{"widgets/Draw/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Draw/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:auto;"\x3e\r\n\t\x3cdiv class\x3d"query-setting-content" data-dojo-attach-point\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"distance-section" data-dojo-attach-point\x3d"distanceTabNode" onselectstart\x3d"return false;"\x3e\r\n\t\t\t\x3cdiv class\x3d"btn-add-section"  data-dojo-attach-point\x3d"btnAddDistance"\x3e\r\n\t\t\t\t\x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"btn-add-label"\x3e${nls.addDistance}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"distanceTable" data-dojo-type\x3d"jimu/dijit/SimpleTable" data-dojo-props\x3d\'fields:[{name:"label",title:"${nls.label}","class":"label",type:"empty"},{name:"abbr",title:"${nls.abbr}","class":"abbr",type:"text",editable:false},{name:"conversion",title:"${nls.conversion}","class":"conversion",type:"text",editable:false},{name:"actions",title:"${nls.actions}","class":"actions",type:"actions",actions:["up","down","delete"]}]\'\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"output-section" data-dojo-attach-point\x3d"areaTabNode" onselectstart\x3d"return false;"\x3e\r\n\t\t\t\x3cdiv class\x3d"btn-add-section" data-dojo-attach-point\x3d"btnAddArea"\x3e\r\n\t\t\t\t\x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"btn-add-label"\x3e${nls.addArea}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"areaTable" data-dojo-type\x3d"jimu/dijit/SimpleTable" data-dojo-props\x3d\'fields:[{name:"label",title:"${nls.label}","class":"label",type:"empty"},{name:"abbr",title:"${nls.abbr}","class":"abbr",type:"text",editable:false},{name:"conversion",title:"${nls.conversion}","class":"conversion",type:"text",editable:false},{name:"actions",title:"${nls.actions}","class":"actions",type:"actions",actions:["up","down","delete"]}]\'\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Draw/setting/css/style.css":".jimu-widget-draw-setting .btn-add-section{display:inline-block; overflow:hidden; height:24px; margin-left:1px; margin-bottom:3px; cursor:pointer; font-size:13px; color:#538ec8; margin-top:8px;}.jimu-widget-draw-setting .btn-add-section .btn-add-icon{float:left; height:100%; width:14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png);}.jimu-widget-draw-setting .btn-add-section .btn-add-label{float:left; height:100%; line-height:24px; vertical-align:middle; margin-left:7px; text-decoration: underline;}",
"*now":function(g){g(['dojo/i18n!*preload*widgets/Draw/setting/nls/Setting*["ar","cs","da","de","en","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/TabContainer jimu/dijit/SimpleTable dijit/form/Select".split(" "),function(g,d,c,k,l,f,n,p,q,r,m){return g([p,n],{baseClass:"jimu-widget-draw-setting",distanceUnits:null,areaUnits:null,postMixInProperties:function(){this.inherited(arguments);this.distanceUnits=[{value:"KILOMETERS",label:this.nls.kilometers,abbr:"km",conversion:"0.001"},
{value:"MILES",label:this.nls.miles,abbr:"mi",conversion:"0.000621"},{value:"METERS",label:this.nls.meters,abbr:"m",conversion:"1"},{value:"FEET",label:this.nls.feet,abbr:"ft",conversion:"3.2808"},{value:"YARDS",label:this.nls.yards,abbr:"yd",conversion:"1.0936133"}];this.areaUnits=[{value:"SQUARE_KILOMETERS",label:this.nls.squareKilometers,abbr:"sq km",conversion:"0.000001"},{value:"SQUARE_MILES",label:this.nls.squareMiles,abbr:"sq mi",conversion:"3.861021e-7"},{value:"ACRES",label:this.nls.acres,
abbr:"ac",conversion:"0.00024710538147"},{value:"HECTARES",label:this.nls.hectares,abbr:"ha",conversion:"0.0001"},{value:"SQUARE_METERS",label:this.nls.squareMeters,abbr:"sq m",conversion:"1"},{value:"SQUARE_FEET",label:this.nls.squareFeet,abbr:"sq ft",conversion:"10.763910417"},{value:"SQUARE_YARDS",label:this.nls.squareYards,abbr:"sq yd",conversion:"1.19599005"}]},postCreate:function(){this.inherited(arguments);this.own(f(this.btnAddDistance,"click",d.hitch(this,this._addDistance)));this.own(f(this.btnAddArea,
"click",d.hitch(this,this._addArea)));this.own(f(this.distanceTable,"row-delete",d.hitch(this,function(a){a.select&&(a.select.destroy(),delete a.select);this._resetDistanceSelectOptions()})));this.own(f(this.areaTable,"row-delete",d.hitch(this,function(a){a.select&&(a.select.destroy(),delete a.select);this._resetAreaSelectOptions()})));this.setConfig(this.config)},startup:function(){this.inherited(arguments);this.tabContainer=new q({tabs:[{title:this.nls.distance,content:this.distanceTabNode},{title:this.nls.area,
content:this.areaTabNode}],isNested:!0},this.content);this.tabContainer.startup()},setConfig:function(a){this.config=a;this._setDistanceTable(this.config.distanceUnits);this._setAreaTable(this.config.areaUnits)},_setDistanceTable:function(a){this.distanceTable.clear();c.forEach(a,d.hitch(this,function(a){var e=this._getDistanceUnitInfo(a.unit);e&&(e.abbr=a.abbr,this._addDistanceUnitRow(e))}))},_setAreaTable:function(a){this.areaTable.clear();c.forEach(a,d.hitch(this,function(a){var e=this._getAreaUnitInfo(a.unit);
e&&(e.abbr=a.abbr,this._addAreaUnitRow(e))}))},getConfig:function(){var a={distanceUnits:[],areaUnits:[]};a.distanceUnits=this._getDistanceConfig();a.areaUnits=this._getAreaConfig();return a},_getDistanceConfig:function(){var a=[],a=this.distanceTable.getRows();return a=c.map(a,d.hitch(this,function(a){var e=this.distanceTable.getRowData(a);return{unit:a.select.get("value"),abbr:e.abbr}}))},_getAreaConfig:function(){var a=[],a=this.areaTable.getRows();return a=c.map(a,d.hitch(this,function(a){var e=
this.areaTable.getRowData(a);return{unit:a.select.get("value"),abbr:e.abbr}}))},_getAllDistanceUnitValues:function(){return c.map(this.distanceUnits,d.hitch(this,function(a){return a.value}))},_getUsedDistanceUnitValues:function(){var a=this.distanceTable.getRows();return c.map(a,d.hitch(this,function(a){return a.select.get("value")}))},_getNotUsedDistanceUnitValues:function(){var a=this._getAllDistanceUnitValues(),b=this._getUsedDistanceUnitValues();return c.filter(a,d.hitch(this,function(a){return 0>
c.indexOf(b,a)}))},_getDistanceUnitInfo:function(a){var b=null,e=c.filter(this.distanceUnits,d.hitch(this,function(b){return b.value===a}));0<e.length&&(b=d.mixin({},e[0]));return b},_addDistance:function(){var a=this._getNotUsedDistanceUnitValues();0!==a.length&&(a=this._getDistanceUnitInfo(a[0]),this._addDistanceUnitRow(a))},_addDistanceUnitRow:function(a){var b=this.distanceTable.addRow({abbr:a.abbr,conversion:a.conversion});if(b.success&&b.tr){var b=b.tr,e=l(".simple-table-td",b)[0];k.setStyle(e,
"verticalAlign","middle");var c=new m({style:{width:"100%",height:"30px"}});c.placeAt(e);c.startup();c.addOption({value:a.value,label:a.label,selected:!0});this.own(f(c,"change",d.hitch(this,this._resetDistanceSelectOptions)));b.select=c}this._resetDistanceSelectOptions()},_showCorrectDistanceInfoBySelectedOption:function(a){var b=this._getDistanceUnitInfo(a.select.value);this.distanceTable.editRow(a,{abbr:b.abbr,conversion:b.conversion})},_resetDistanceSelectOptions:function(){var a=this.distanceTable.getRows(),
b=c.map(a,d.hitch(this,function(a){return a.select})),e=this._getNotUsedDistanceUnitValues(),h=c.map(e,d.hitch(this,function(a){return this._getDistanceUnitInfo(a)}));c.forEach(b,d.hitch(this,function(b,e){var f=b.get("value"),g=c.filter(b.getOptions(),d.hitch(this,function(a){return a.value!==f}));b.removeOption(g);c.forEach(h,d.hitch(this,function(a){b.addOption({value:a.value,label:a.label})}));b.set("value",f);this._showCorrectDistanceInfoBySelectedOption(a[e])}))},_getAllAreaUnitValues:function(){return c.map(this.areaUnits,
d.hitch(this,function(a){return a.value}))},_getUsedAreaUnitValues:function(){var a=this.areaTable.getRows();return c.map(a,d.hitch(this,function(a){return a.select.get("value")}))},_getNotUsedAreaUnitValues:function(){var a=this._getAllAreaUnitValues(),b=this._getUsedAreaUnitValues();return c.filter(a,d.hitch(this,function(a){return 0>c.indexOf(b,a)}))},_getAreaUnitInfo:function(a){var b=null,e=c.filter(this.areaUnits,d.hitch(this,function(b){return b.value===a}));0<e.length&&(b=d.mixin({},e[0]));
return b},_addArea:function(){var a=this._getNotUsedAreaUnitValues();0!==a.length&&(a=this._getAreaUnitInfo(a[0]),this._addAreaUnitRow(a))},_addAreaUnitRow:function(a){var b=this.areaTable.addRow({abbr:a.abbr,conversion:a.conversion});if(b.success&&b.tr){var b=b.tr,c=l(".simple-table-td",b)[0];k.setStyle(c,"verticalAlign","middle");var h=new m({style:{width:"100%",height:"30px"}});h.placeAt(c);h.startup();h.addOption({value:a.value,label:a.label,selected:!0});this.own(f(h,"change",d.hitch(this,this._resetAreaSelectOptions)));
b.select=h}this._resetAreaSelectOptions()},_showCorrectAreaInfoBySelectedOption:function(a){var b=this._getAreaUnitInfo(a.select.value);this.areaTable.editRow(a,{abbr:b.abbr,conversion:b.conversion})},_resetAreaSelectOptions:function(){var a=this.areaTable.getRows(),b=c.map(a,d.hitch(this,function(a){return a.select})),e=this._getNotUsedAreaUnitValues(),f=c.map(e,d.hitch(this,function(a){return this._getAreaUnitInfo(a)}));c.forEach(b,d.hitch(this,function(b,e){var g=b.get("value"),k=c.filter(b.getOptions(),
d.hitch(this,function(a){return a.value!==g}));b.removeOption(k);c.forEach(f,d.hitch(this,function(a){b.addOption({value:a.value,label:a.label})}));b.set("value",g);this._showCorrectAreaInfoBySelectedOption(a[e])}))}})});