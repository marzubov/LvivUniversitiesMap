//>>built
require({cache:{"url:widgets/Query/SingleParameter.html":'\x3cdiv\x3e\r\n  \x3ctable style\x3d"width:100%;"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"100px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"prompt" data-dojo-attach-point\x3d"promptNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"allValueBoxContainer" style\x3d"width:100%;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"stringTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"stringTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"display:none;width:100%;height:25px;" class\x3d"dijit-form-ValidationTextBox" /\x3e\r\n\r\n              \x3cdiv data-dojo-attach-point\x3d"stringCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;height:25px;"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"numberTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"display:none;width:100%;height:25px;" /\x3e\r\n\r\n              \x3cdiv data-dojo-attach-point\x3d"numberCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;height:25px;"\x3e\x3c/div\x3e\r\n\r\n              \x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"numberTextBox1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n                      \x3cspan\x3e${nls.and}\x3c/span\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"numberTextBox2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"dateTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"dateTextBox" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-props\x3d\'required:true, trim:true, constraints:{datePattern:"yyyy-MM-dd"}\' class\x3d"dijit-form-DateTextBox" style\x3d"display:none;width:100%;height:25px;" /\x3e\r\n\r\n              \x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"dateTextBox1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true,constraints:{datePattern: "yyyy-MM-dd"}\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n                      \x3cspan\x3e${nls.and}\x3c/span\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"dateTextBox2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true,constraints:{datePattern: "yyyy-MM-dd"}\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleParameter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/json dojo/on dojo/query dojo/Deferred dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox dojo/store/Memory esri/request".split(" "),function(k,m,n,p,q,g,e,h,r,s,t,u,v,w,x,y,l,z){return k([m,n,p],{baseClass:"jimu-widget-query-single-parameter",templateString:q,fieldInfo:null,
part:null,nls:null,OPERATORS:null,_type:-1,postCreate:function(){this.inherited(arguments);this.fieldInfo&&this.part&&this.build(this.fieldInfo,this.part)},getValueObj:function(){var a=this.part.fieldObj.shortType;return"string"===a?this._getStirngValueObj():"number"===a?this._getNumberValueObj():"date"===a?this._getDateValueObj():null},_getStirngValueObj:function(){var a=null;if(1===this._type){if(!this.stringTextBox.validate())return this._showValidationErrorTip(this.stringTextBox),null;a={};a.value=
this.stringTextBox.get("value")}else if(2===this._type){if(!this.stringCodedValuesFS.validate())return this._showValidationErrorTip(this.stringCodedValuesFS),null;var a={},c=this._getSelectedFilteringItem(this.stringCodedValuesFS);a.value=c.code}return a},_getNumberValueObj:function(){var a=null;if(1===this._type){if(!this.numberTextBox.validate())return this._showValidationErrorTip(this.numberTextBox),null;a={};a.value=parseFloat(this.numberTextBox.get("value"))}else if(2===this._type){if(!this.numberCodedValuesFS.validate())return this._showValidationErrorTip(this.numberCodedValuesFS),
null;var a={},c=this._getSelectedFilteringItem(this.numberCodedValuesFS);a.value=parseFloat(c.code)}else if(3===this._type){if(!this.numberTextBox1.validate())return this._showValidationErrorTip(this.numberTextBox1),null;if(!this.numberTextBox2.validate())return this._showValidationErrorTip(this.numberTextBox2),null;a={};a.value1=parseFloat(this.numberTextBox1.get("value"));a.value2=parseFloat(this.numberTextBox2.get("value"))}return a},_getDateValueObj:function(){var a=null;if(1===this._type){if(!this.dateTextBox.validate())return this._showValidationErrorTip(this.dateTextBox),
null;a={};a.value=this.dateTextBox.get("value").toDateString()}else if(2===this._type){if(!this.dateTextBox1.validate())return this._showValidationErrorTip(this.dateTextBox1),null;if(!this.dateTextBox2.validate())return this._showValidationErrorTip(this.dateTextBox2),null;a={};a.value1=this.dateTextBox1.get("value").toDateString();a.value2=this.dateTextBox2.get("value").toDateString()}return a},build:function(a,c){this.fieldInfo=a;this.part=c;var b=c.interactiveObj;this.promptNode.innerHTML=b.prompt||
"";this.hintNode.innerHTML=b.hint||"";b=this.part.fieldObj.shortType;"string"===b?this._buildString(a,this.part):"number"===b?this._buildNumber(a,this.part):"date"===b&&this._buildDate(a,this.part)},_getCodedValues:function(a){var c=null;if((a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length)c=a.codedValues;return c},_buildString:function(a,c){e.setStyle(this.stringTextBoxContainer,"display","block");e.setStyle(this.numberTextBoxContainer,"display","none");e.setStyle(this.dateTextBoxContainer,
"display","none");var b=c.valueObj,d=this._getCodedValues(a);if(d){this._type=2;this._showDijit(this.stringCodedValuesFS);this._hideDijit(this.stringTextBox);var d=h.map(d,g.hitch(this,function(a,b){var c=g.mixin({},a);c.id=b;return c})),f=new l({data:d});this.stringCodedValuesFS.set("store",f);b&&(f=h.filter(d,g.hitch(this,function(a){return a.code===b.value})),0<f.length?this.stringCodedValuesFS.set("value",f[0].id):this.stringCodedValuesFS.set("value",d[0].id))}else this._type=1,this._showDijit(this.stringTextBox),
this._hideDijit(this.stringCodedValuesFS),this.stringTextBox.set("value",b.value||"")},_buildNumber:function(a,c){e.setStyle(this.stringTextBoxContainer,"display","none");e.setStyle(this.numberTextBoxContainer,"display","block");e.setStyle(this.dateTextBoxContainer,"display","none");var b=c.valueObj,d=c.operator;if(d===this.OPERATORS.numberOperatorIsBetween||d===this.OPERATORS.numberOperatorIsNotBetween)this._type=3,e.setStyle(this.numberRangeTable,"display","table"),this._hideDijit(this.numberTextBox),
this._hideDijit(this.numberCodedValuesFS),d=parseFloat(b.value1),b=parseFloat(b.value2),this.numberTextBox1.set("value",d),this.numberTextBox2.set("value",b);else{e.setStyle(this.numberRangeTable,"display","none");var d=parseFloat(b.value),f=this._getCodedValues(c);if(f)if(this._type=2,this._showDijit(this.numberCodedValuesFS),this._hideDijit(this.numberTextBox),d=h.map(f,g.hitch(this,function(a,b){var c=g.mixin({},a);c.id=b;return c})),f=new l({data:d}),this.numberCodedValuesFS.set("store",f),b&&
!isNaN(b.value)){var k=parseFloat(b.value),b=h.filter(d,g.hitch(this,function(a){return parseFloat(a.code)===k}));0<b.length?this.numberCodedValuesFS.set("value",b[0].id):this.numberCodedValuesFS.set("value",d[0].id)}else this.numberCodedValuesFS.set("value",d[0].id);else this._type=1,this._showDijit(this.numberTextBox),this._hideDijit(this.numberCodedValuesFS),this.numberTextBox.set("value",d)}},_buildDate:function(a,c){e.setStyle(this.stringTextBoxContainer,"display","none");e.setStyle(this.numberTextBoxContainer,
"display","none");e.setStyle(this.dateTextBoxContainer,"display","block");var b=c.valueObj,d=c.operator;d===this.OPERATORS.dateOperatorIsBetween||d===this.OPERATORS.dateOperatorIsNotBetween?(this._type=2,e.setStyle(this.dateRangeTable,"display","table"),this._hideDijit(this.dateTextBox),this.dateTextBox1.set("value",new Date(b.value1)),this.dateTextBox2.set("value",new Date(b.value2))):(this._type=1,e.setStyle(this.dateRangeTable,"display","none"),this._showDijit(this.dateTextBox),this.dateTextBox.set("value",
new Date(b.value)))},_getSelectedFilteringItem:function(a){if(a.validate()){var c=a.get("value");if(isNaN(c))this._showValidationErrorTip(a);else if(a=a.store.query({id:c}),0<a.length&&(a=a[0]))return a}else this._showValidationErrorTip(a);return null},_showValidationErrorTip:function(a){!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())},_showDijit:function(a){a&&a.domNode&&e.setStyle(a.domNode,"display","inline-block")},_hideDijit:function(a){a&&a.domNode&&e.setStyle(a.domNode,
"display","none")},_onRangeNumberBlur:function(){if(this.numberTextBox1.validate()&&this.numberTextBox2.validate()){var a=parseFloat(this.numberTextBox1.get("value")),c=parseFloat(this.numberTextBox2.get("value"));a>c&&(this.numberTextBox1.set("value",c),this.numberTextBox2.set("value",a))}},_onRangeDateBlur:function(){if(this.dateTextBox1.validate()&&this.dateTextBox2.validate()){var a=this.dateTextBox1.get("value"),c=a.getTime(),b=this.dateTextBox2.get("value"),d=b.getTime();c>d&&(this.dateTextBox1.set("value",
b),this.dateTextBox2.set("value",a))}}})});