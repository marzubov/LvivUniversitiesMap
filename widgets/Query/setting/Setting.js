//>>built
require({cache:{"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(h,q,n,k,f,b,c,a,d){return h([b,q],{baseClass:"query-setting-featuresource-popup",width:830,height:560,titleLabel:"",featureArgs:null,startup:function(){this.inherited(arguments);this._initFls();this._initLoading()},_initFls:function(){this.fls=new c(this.featureArgs);
this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(n(this.fls,"ok",k.hitch(this,function(b){if(0!==b.length){var a=b[0];if(a.definition)try{a.definition.name=a.name,a.definition.url=a.url,this.emit("ok",a)}catch(c){console.error(c)}else this.loading.show(),d({url:a.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(k.hitch(this,function(b){if(this.domNode){this.loading.hide();a.definition=b;try{a.definition.name=a.name,a.definition.url=a.url,this.emit("ok",
a)}catch(d){console.error(d)}}}),k.hitch(this,function(a){console.error(a);this.domNode&&this.loading.hide()}))}})));this.own(n(this.fls,"cancel",k.hitch(this,function(){try{this.emit("cancel")}catch(a){console.error(a)}})))},_initLoading:function(){this.loading=new a({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/Evented dojo/query jimu/dijit/FeaturelayerChooserFromMap jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l){var w=h([q,n,k,g],{baseClass:"jimu-featurelayer-chooser-with-buttons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"flc-container" data-dojo-attach-point\x3d"flcDiv"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',featureLayerChooserArgs:null,
postMixInProperties:function(){this.nls=b.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.flcMap=new m(this.featureLayerChooserArgs);this.flcMap.placeAt(this.flcDiv);c.setStyle(this.flcMap.domNode,{width:"100%",height:"100%"});this.own(d(this.flcMap,"tree-click",b.hitch(this,function(){0<this.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):c.addClass(this.btnOk,"jimu-state-disabled")})));this.own(d(this.btnOk,"click",b.hitch(this,function(){var a=
this.getSelectedItems();0<a.length&&this.emit("ok",a)})));this.own(d(this.btnCancel,"click",b.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.flcMap.getSelectedItems()},startup:function(){this.inherited(arguments);this.flcMap.startup()}});return h([q,n,k,g],{templateString:f,baseClass:"jimu-featurelayer-source",nls:null,multiple:!1,types:null,createMapResponse:null,appConfig:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this._initTypes()},
postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){var a=[];this.mapRadio.checked?a=this.flcMap.getSelectedItems():this.portalRadio.checked?a=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(a=this.flcUrl.getSelectedItems());return a},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initTypes:function(){var d=["point","polyline","polygon"];this.types&&0<this.types.length?(this.types=
a.filter(this.types,b.hitch(this,function(a){return 0<=d.indexOf(a)})),0===this.types.length&&(this.types=d)):this.types=d},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new w({multiple:this.multiple,types:this.types,style:{width:"100%",height:"100%"},featureLayerChooserArgs:{createMapResponse:this.createMapResponse}});
this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(d(this.flcMap,"ok",b.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(d(this.flcMap,"cancel",b.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new s({multiple:this.multiple,types:this.types,appConfig:this.appConfig,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);
this.own(d(this.flcPortal,"next",b.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.selectLayer;this._updateOperationTip()})));this.own(d(this.flcPortal,"back",b.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(d(this.flcPortal,"ok",b.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(d(this.flcPortal,"cancel",b.hitch(this,function(){this.emit("cancel")})));0<=(this.appConfig.portalUrl||
"").indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=new l({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(d(this.flcUrl,"ok",b.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(d(this.flcUrl,"cancel",b.hitch(this,function(){this.emit("cancel")})))},
_initRadios:function(){var a="featureLayerSourceRadios_"+this._getRandomString();this.mapRadio.name=a;c.setAttr(this.mapRadio,"id","mapRadio_"+this._getRandomString());c.setAttr(this.mapLabel,"for",this.mapRadio.id);this.portalRadio.name=a;c.setAttr(this.portalRadio,"id","portalRadio_"+this._getRandomString());c.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=a;c.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());c.setAttr(this.urlLabel,"for",this.urlRadio.id)},
_getRandomString:function(){var a=Math.random().toString();return a=a.slice(2,a.length)},_onRadioClicked:function(){c.setStyle(this.flcContainer,"display","none");c.setStyle(this.hflcContainer,"display","none");c.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(c.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(c.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(c.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define("dojo/_base/declare ./_BasicLayerChooserFromMap dojo/_base/html dojo/_base/lang dojo/_base/array dojo/promise/all jimu/utils".split(" "),
function(h,q,n,k,f,b,c){return h([q],{_leafType:"Feature Layer",_layerTypes:["esri.layers.FeatureLayer","esri.layers.ArcGISDynamicMapServiceLayer","esri.layers.ArcGISTiledMapServiceLayer"],createMapResponse:null,multiple:!1,types:null,postMixInProperties:function(){this.inherited(arguments);this._initTypes()},postCreate:function(){this.inherited(arguments);n.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},getSelectedItems:function(){var a=this.inherited(arguments);return a=f.map(a,k.hitch(this,
function(a){var b=a&&a.layerInfo&&a.layerInfo.layerObject;return{url:b&&b.url||"",name:a&&a.name||""}}))},_initTypes:function(){var a=["point","polyline","polygon"];this.types&&0<this.types.length?(this.types=f.filter(this.types,k.hitch(this,function(b){return 0<=a.indexOf(b)})),0===this.types.length&&(this.types=a)):this.types=a},_validateBeforeAddItem:function(a){var b=a.layerObject;if("Feature Layer"===b.type){var g=c.getTypeByGeometryType(b.geometryType);a=b.url&&"string"===typeof b.url;g=0<=
f.indexOf(this.types,g);b=b.capabilities&&0<=b.capabilities.indexOf("Query");return a&&g&&b}return!!a},_getIconImageName:function(a,b){var g="",f=a.layerInfo.layerObject,m=a.layerClass;"Group Layer"===a.type?g=b?"group_layer2.png":"group_layer1.png":"esri.layers.ArcGISDynamicMapServiceLayer"===m?g=b?"mapserver_open.png":"mapserver_close.png":"esri.layers.ArcGISTiledMapServiceLayer"===m?g=b?"mapserver_open.png":"mapserver_close.png":"esri.layers.FeatureLayer"===m&&(f=c.getTypeByGeometryType(f.geometryType),
"point"===f?g="point_layer1.png":"polyline"===f?g="line_layer1.png":"polygon"===f&&(g="polygon_layer1.png"));return g},_mayHaveChildren:function(a){return a.type!==this._leafType},_onTreeOpen:function(a,d){if("root"!==a.id&&!d.item.checking&&!d.item.checked&&!(0<this._store.query({parent:a.id}).length)){var c=a.layerInfo,p=c.layerObject,m=a.layerClass,s=[],l=[];"esri.layers.ArcGISDynamicMapServiceLayer"===m||"esri.layers.ArcGISTiledMapServiceLayer"===m?(s=c.getSubLayers(),0===s.length?(d.item.checking=
!1,d.item.checked=!0):(d.item.checking=!0,this.shelter.show(),l=f.map(s,k.hitch(this,function(a){return a.getLayerObject()})),b(l).then(k.hitch(this,function(){this.domNode&&(this.shelter.hide(),d.item.checking=!1,d.item.checked=!0,f.forEach(s,k.hitch(this,function(b){this._addItem(a.id,b)})))}),k.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),d.item.checking=!1,d.item.checked=!0)})))):"Group Layer"===p.type&&(s=c.getSubLayers(),0===s.length?(d.item.checking=!1,d.item.checked=
!0):(d.item.checking=!0,this.shelter.show(),l=f.map(s,k.hitch(this,function(a){return a.getLayerObject()})),b(l).then(k.hitch(this,function(){this.domNode&&(this.shelter.hide(),d.item.checking=!1,d.item.checked=!0,f.forEach(s,k.hitch(this,function(b){this._addItem(a.id,b)})))}),k.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),d.item.checking=!1,d.item.checked=!0)}))))}}})})},"jimu/dijit/_BasicLayerChooserFromMap":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/query dojo/on dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/dijit/_Tree dijit/registry esri/request jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/LayerInfos/LayerInfos".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u,e,x,v,r,t){return h([q,n,k,f],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv class\x3d"error-tip-section"\x3e\x3cspan class\x3d"error-icon"\x3e\x3c/span\x3e\x3cspan class\x3d"error-tip" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",_leafType:"",_layerTypes:[],createMapResponse:null,multiple:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},
postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new r({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},getSelectedItems:function(){return this.tree.getSelectedItems()},setCreateMapResponse:function(a){this.createMapResponse=a;t.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(b.hitch(this,
function(a){this.layerInfosObj=a;this.own(g(this.layerInfosObj,"layerInfosChanged",b.hitch(this,this._onLayerInfosChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){a&&("added"===b?this._addDirectLayerInfo(a):"removed"===b&&this._removeDirectLayerInfo(a))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(b.hitch(this,function(){this._isLayerTypeSupported(a.layerObject.declaredClass)&&this._addItem("root",a)}),b.hitch(this,function(a){console.error(a)}))},
_removeDirectLayerInfo:function(e){if(e){var d=e.id;e=this.tree.getAllTreeNodeWidgets();e=a.filter(e,b.hitch(this,function(a){return"root"===a.item.id?!1:d===a.item.layerInfo.id}));0<e.length&&(e=a.map(e,b.hitch(this,function(a){return a.item.id})),a.forEach(e,b.hitch(this,function(a){this.tree.removeItem(a)})))}},_buildTree:function(e){this._clear();e=e.getLayerInfoArray();0!==e.length&&a.forEach(e,b.hitch(this,function(a){this._addDirectLayerInfo(a)}))},_getRestInfo:function(a){return x({url:a,
content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4})},_clear:function(){var e=this._store.query({parent:"root"});a.forEach(e,b.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_isLayerTypeSupported:function(b){return 0<=a.indexOf(this._layerTypes,b)},_validateBeforeAddItem:function(a){return!!a},_addItem:function(a,b){var e=null;this._validateBeforeAddItem(b)&&(this._id++,e={name:b.title,parent:a,layerInfo:b,type:b.layerObject.type||"UNKNOWN",layerClass:b.layerObject.declaredClass},
e.id=this._id.toString(),this._store.add(e));return e},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root"}},_createTree:function(){var a=this._getRootItem(),a=new s({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new l(a);a=new w({store:this._store,query:{id:"root"},mayHaveChildren:b.hitch(this,this._mayHaveChildren)});this.tree=new u({multiple:this.multiple,model:a,showRoot:!1,leafType:this._leafType,style:{width:"100%"},onOpen:b.hitch(this,function(a,
b){"root"!==a.id&&this._onTreeOpen(a,b)}),onClick:b.hitch(this,function(a,b,e){this._onTreeClick(a,b,e);this.emit("tree-click",a,b,e)}),getIconStyle:b.hitch(this,function(a,b){var e=null;if(!a||"root"===a.id)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},c=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),r=this._getIconImageName(a,b);r&&(d.backgroundImage="url("+c+"/css/images/"+r+")",e=d);return e})});
c.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_getIconImageName:function(a,b){},_mayHaveChildren:function(a){return a.type!==this._leafType},_onTreeOpen:function(a,b){},_onTreeClick:function(a,b,e){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(h,q,n,k){h=function(f){function b(a,
b){var d=f[a];d&&(f[a]=function(c){var w;"put"===a&&(w=f.getIdentity(c));if(g)return d.apply(this,arguments);g=!0;try{var u=d.apply(this,arguments);n(u,function(a){b("object"==typeof a&&a||c,w)});return u}finally{g=!1}})}var c=[],a=0;f=q.delegate(f);f.notify=function(b,d){a++;for(var g=c.slice(),l=0,f=g.length;l<f;l++)g[l](b,d)};var d=f.query;f.query=function(b,m){m=m||{};var g=d.apply(this,arguments);if(g&&g.forEach){var l=q.mixin({},m);delete l.start;delete l.count;var w=f.queryEngine&&f.queryEngine(b,
l),u=a,e=[],x;g.observe=function(b,d){1==e.push(b)&&c.push(x=function(b,c){n(g,function(t){var l=t.length!=m.count,v,g;if(++u!=a)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var x,s=-1,p=-1;if(void 0!==c){v=0;for(g=t.length;v<g;v++){var h=t[v];if(f.getIdentity(h)==c){x=h;s=v;(w||!b)&&t.splice(v,1);break}}}if(w){if(b&&(w.matches?w.matches(b):w([b]).length))v=-1<s?s:t.length,t.splice(v,0,b),p=k.indexOf(w(t),b),t.splice(v,1),m.start&&0==p||!l&&p==
t.length?p=-1:t.splice(p,0,b)}else b&&(void 0!==c?p=s:m.start||(p=f.defaultIndex||0,t.splice(p,0,b)));if((-1<s||-1<p)&&(d||!w||s!=p)){l=e.slice();for(v=0;t=l[v];v++)t(b||x,s,p)}})});var t={};t.remove=t.cancel=function(){var a=k.indexOf(e,b);-1<a&&(e.splice(a,1),e.length||c.splice(k.indexOf(c,x),1))};return t}}return g};var g;b("put",function(a,b){f.notify(a,b)});b("add",function(a){f.notify(a)});b("remove",function(a){f.notify(void 0,a)});return f};q.setObject("dojo.store.Observable",h);return h})},
"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(h,q,n,k,f,b,c){return n("dijit.tree.ObjectStoreModel",c,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){f.mixin(this,a);this.childrenCache={}},getRoot:function(a,d){if(this.root)a(this.root);else{var c=this.store.query(this.query);c.then&&this.own(c);b(c,f.hitch(this,function(b){if(1!=
b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];a(this.root);c.observe&&c.observe(f.hitch(this,function(a){this.onChange(a)}),!0)}),d)}},mayHaveChildren:function(){return!0},getChildren:function(a,d,c){var p=this.store.getIdentity(a);if(this.childrenCache[p])b(this.childrenCache[p],d,c);else{var m=this.childrenCache[p]=this.store.getChildren(a);m.then&&this.own(m);m.observe&&this.own(m.observe(f.hitch(this,function(d,
c,g){this.onChange(d);c!=g&&b(m,f.hitch(this,"onChildrenChange",a))}),!0));b(m,d,c)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},newItem:function(a,b,c,f){return this.store.put(a,{parent:b,before:f})},pasteItem:function(a,b,c,p,m,s){var l=new k;if(b===c&&!p&&!s)return l.resolve(!0),l;b&&!p?this.getChildren(b,f.hitch(this,function(m){m=[].concat(m);var u=h.indexOf(m,a);m.splice(u,1);this.onChildrenChange(b,m);
l.resolve(this.store.put(a,{overwrite:!0,parent:c,oldParent:b,before:s}))})):l.resolve(this.store.put(a,{overwrite:!0,parent:c,oldParent:b,before:s}));return l},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l){var w=h([s._TreeNode,p],{templateString:k,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);b.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=b.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=b.toDom('\x3cinput type\x3d"checkbox" /\x3e');b.addClass(this.checkNode,"jimu-tree-check-node");b.place(this.checkNode,this.contentNode,
"first");this.own(g(this.checkNode,"click",f.hitch(this,this._onClick)));this.isLeaf?b.setStyle(this.checkNode,"display","inline"):b.setStyle(this.checkNode,"display","none")},select:function(){this.isLeaf&&(this.checkNode.checked=!0)},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1)},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(f.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return h([s,p],{declaredClass:"jimu._Tree",leafType:"",multiple:!0,uniqueId:"",postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+l.getRandomString()},postCreate:function(){this.inherited(arguments);b.addClass(this.domNode,"jimu-tree")},removeItem:function(a){this.model.store.remove(a)},getAllItems:function(){var a=
this.getAllTreeNodeWidgets();return c.map(a,f.hitch(this,function(a){var b=f.mixin({},a.item);b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=c.filter(a,f.hitch(this,function(a){return a.checkNode.checked}));return c.map(a,f.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=c.map(b,f.hitch(this,function(a){var b=f.mixin({},a.item);b.selected=a.checkNode.checked;return b}));return c.filter(b,
f.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var d=m.byNode(b[c]);if(d.item.id.toString()===a.toString())return d}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.select()},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return c.filter(a,f.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return c.map(a,f.hitch(this,function(a){return m.byNode(a)}))},isLeafItem:function(a){return a&&a.type===this.leafType},_getAllTreeNodeDoms:function(){return d(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new w(a)},_onTreeNodeSelect:function(a){a={item:f.mixin({},a.item),treeNode:a};this.emit("item-select",a)},_onTreeNodeUnselect:function(a){a=
{item:f.mixin({},a.item),treeNode:a};this.emit("item-unselect",a)},_onCheckNodeClick:function(b,e,c){!this.multiple&&e&&this._uncheckAllCheckboxes();a.stop(c);this.focusNode(b);setTimeout(f.hitch(this,function(){b.checkNode.checked=e;this.onClick(b.item,b,c)}),0)},_uncheckAllCheckboxes:function(){var a=d(".jimu-tree-check-node",this.domNode);c.forEach(a,f.hitch(this,function(a){a.checked=!1}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u,e,x,v,r,t,B,z,D,E,F,G,I,H,J,K,L,O,M,N){function y(a){return u.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var C=k("dijit._TreeNode",[E,F,G,I,H],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a)},labelType:"text",isExpandable:null,isExpanded:!1,state:"NotLoaded",
templateString:K,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";g.set(this.domNode,"backgroundPosition",b+" 0px");g.set(this.rowNode,
this.isLeftToRight()?"paddingLeft":"paddingRight",b);h.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,"row","Row");this.tree._startPaint(!0)},
_applyClassAndStyle:function(b,c,e){var d="_"+c+"Class";c+="Node";var r=this[d];this[d]=this.tree["get"+e+"Class"](b,this.isExpanded);a.replace(this[c],this[d]||"",r||"");g.set(this[c],this.tree["get"+e+"Style"](b,this.isExpanded)||{})},_updateLayout:function(){var b=this.getParent(),b=!b||!b.rowNode||"none"==b.rowNode.style.display;a.toggle(this.domNode,"dijitTreeIsRoot",b);a.toggle(this.domNode,"dijitTreeIsLast",!b&&!this.getNextSibling())},_setExpando:function(b){var c=["dijitTreeExpandoLoading",
"dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];b=b?0:this.isExpandable?this.isExpanded?1:2:3;a.replace(this.expandoNode,c[b],c);this.expandoNodeText.innerHTML=["*","-","+","*"][b]},expand:function(){if(this._expandDeferred)return y(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role",
"group");a.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var b=m.wipeIn({node:this.containerNode,duration:D.defaultDuration}),c=this._expandDeferred=new f(function(){b.stop()});q.after(b,"onEnd",function(){c.resolve(!0)},!0);b.play();return y(c)},collapse:function(){if(this._collapseDeferred)return y(this._collapseDeferred);this._expandDeferred&&
(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");a.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var b=m.wipeOut({node:this.containerNode,duration:D.defaultDuration}),c=this._collapseDeferred=new f(function(){b.stop()});q.after(b,"onEnd",function(){c.resolve(!0)},
!0);b.play();return y(c)},indent:0,setChildItems:function(a){var e=this.tree,d=e.model,r=[],t=e.focusedChild,l=this.getChildren();h.forEach(l,function(a){G.prototype.removeChild.call(this,a)},this);this.defer(function(){h.forEach(l,function(a){if(!a._destroyed&&!a.getParent()){e.dndController.removeTreeNode(a);var b=function(a){var c=d.getIdentity(a.item),r=e._itemNodesMap[c];1==r.length?delete e._itemNodesMap[c]:(c=h.indexOf(r,a),-1!=c&&r.splice(c,1));h.forEach(a.getChildren(),b)};b(a);if(e.persist){var r=
h.map(a.getTreePath(),function(a){return e.model.getIdentity(a)}).join("/"),l;for(l in e._openedNodes)l.substr(0,r.length)==r&&delete e._openedNodes[l];e._saveExpandedNodes()}e.lastFocusedChild&&!c.isDescendant(e.lastFocusedChild,e.domNode)&&delete e.lastFocusedChild;t&&!c.isDescendant(t,e.domNode)&&e.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,h.forEach(a,function(a){var b=d.getIdentity(a),c=e._itemNodesMap[b],t;if(c)for(var l=0;l<c.length;l++)if(c[l]&&
!c[l].getParent()){t=c[l];t.set("indent",this.indent+1);break}t||(t=this.tree._createTreeNode({item:a,tree:e,isExpandable:d.mayHaveChildren(a),label:e.getLabel(a),labelType:e.model&&e.model.labelType||"text",tooltip:e.getTooltip(a),ownerDocument:e.ownerDocument,dir:e.dir,lang:e.lang,textDir:e.textDir,indent:this.indent+1}),c?c.push(t):e._itemNodesMap[b]=[t]);this.addChild(t);(this.tree.autoExpand||this.tree._state(t))&&r.push(e._expandNode(t))},this),h.forEach(this.getChildren(),function(a){a._updateLayout()})):
this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=b(r);this.tree._startPaint(a);return y(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,this.collapse());h.forEach(b,function(a){a._updateLayout()})},
makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(b){this.labelNode.setAttribute("aria-selected",b?"true":"false");a.toggle(this.rowNode,"dijitTreeRowSelected",b)},focus:function(){B.focus(this.focusNode)}});s("dojo-bidi")&&C.extend({_setTextDirAttr:function(a){if(a&&(this.textDir!=a||!this._created))this._set("textDir",a),this.applyTextDir(this.labelNode),h.forEach(this.getChildren(),function(b){b.set("textDir",a)},this)}});var A=k("dijit.Tree",[E,J,F,H],{baseClass:"dijitTree",
store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:L,persist:!1,autoExpand:!1,dndController:N,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,
b){x.publish(this.id,u.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new f;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(e(this.containerNode,e.selector(".dijitTreeNode",v.enter),function(b){a._onNodeMouseEnter(z.byNode(this),
b)}),e(this.containerNode,e.selector(".dijitTreeNode",v.leave),function(b){a._onNodeMouseLeave(z.byNode(this),b)}),e(this.containerNode,e.selector(".dijitTreeRow",t.press),function(b){a._onNodePress(z.getEnclosingWidget(this),b)}),e(this.containerNode,e.selector(".dijitTreeRow",t),function(b){a._onClick(z.getEnclosingWidget(this),b)}),e(this.containerNode,e.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(z.getEnclosingWidget(this),b)}));this.model||this._store2model();this.own(q.after(this.model,
"onChange",u.hitch(this,"_onItemChange"),!0),q.after(this.model,"onChildrenChange",u.hitch(this,"_onItemChildrenChange"),!0),q.after(this.model,"onDelete",u.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){u.isString(this.dndController)&&(this.dndController=u.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);this.dndController=new this.dndController(this,b)}this._load();
this.onLoadDeferred=y(this.pendingCommandsPromise);this.onLoadDeferred.then(u.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;l.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=u.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(a.getChildren=u.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&
a===this.model.root?null:a,b,c)}));this.model=new M(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(u.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display=
"none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),b.labelNode.setAttribute("role","presentation"),
b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(u.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),
u.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=u.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(u.hitch(this,function(){var c=h.map(a,function(a){return!a||u.isString(a)?a:b.model.getIdentity(a)}),e=[];h.forEach(c,function(a){e=
e.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",e)}))},_setPathAttr:function(a){return a.length?y(this.set("paths",[a]).then(function(a){return a[0]})):y(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function c(a,b){var d=a.shift(),r=h.filter(b,function(a){return a.getIdentity()==d})[0];if(r)return a.length?e._expandNode(r).then(function(){return c(a,r.getChildren())}):r;throw new A.PathError("Could not expand path at "+d);}var e=this;return y(this.pendingCommandsPromise=
this.pendingCommandsPromise.always(function(){return b(h.map(a,function(a){a=h.map(a,function(a){return u.isString(a)?a:e.model.getIdentity(a)});if(a.length)return c(a,[e.rootNode]);throw new A.PathError("Empty path");}))}).then(function(a){e.set("selectedNodes",a);return e.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function a(e){return c._expandNode(e).then(function(){var c=h.filter(e.getChildren()||
[],function(a){return a.isExpandable});return b(h.map(c,a))})}var c=this;return y(a(this.rootNode))},collapseAll:function(){function a(e){var d=h.filter(e.getChildren()||[],function(a){return a.isExpandable}),d=b(h.map(d,a));return!e.isExpanded||e==c.rootNode&&!c.showRoot?d:d.then(function(){return c._collapseNode(e)})}var c=this;return y(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||
this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&b.isExpanded&&b.hasChildren();)c=b.getChildren(),b=c[c.length-1];else if(c=b.getParent(),
this.showRoot||c!==this.rootNode)b=c;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&(c.isTreeNode&&(this.showRoot||c!==this.rootNode))&&this.focusNode(c)}},focusLastChild:function(){var a=this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?
this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return c.isDescendant(a,b.expandoNode)||c.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,
b){this.focusNode(a)},__click:function(a,b,c,e){var d=this.isExpandoNode(b.target,a);a.isExpandable&&(c||d)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[e](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):
this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){l.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){l.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;
if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,e=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new f,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(e,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));
b=a._loadDeferred.then(u.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),e=this.getTooltip(a);h.forEach(b,function(b){b.set({item:a,label:c,tooltip:e});b._updateItemClasses(a)})}},
_onItemChildrenChange:function(a,b){var c=this.model.getIdentity(a);(c=this._itemNodesMap[c])&&h.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(h.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!c.isDescendant(this.lastFocusedChild,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!c.isDescendant(this.focusedChild,this.domNode)&&
this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=n(this.cookieName);a&&h.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=h.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},
_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);n(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!u.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&d.setMarginBox(this.domNode,
a);this._nodePixelIndent=d.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(u.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=u.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&(!this._adjustWidthsTimer&&
this._started)&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});r(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new C(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});s("dojo-bidi")&&A.extend({_setTextDirAttr:function(a){a&&
this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});A.PathError=p("TreePathError");A._TreeNode=C;return A})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(h,q,n,k){return n("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(f){k.mixin(this,f);this.connects=[];f=this.store;
if(!f.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");f.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([q.after(f,"onNew",k.hitch(this,"onNewItem"),!0),q.after(f,"onDelete",k.hitch(this,"onDeleteItem"),!0),q.after(f,"onSet",k.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var f;f=this.connects.pop();)f.remove()},getRoot:function(f,b){this.root?f(this.root):this.store.fetch({query:this.query,
onComplete:k.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];f(this.root)}),onError:b})},mayHaveChildren:function(f){return h.some(this.childrenAttrs,function(b){return this.store.hasAttribute(f,b)},this)},getChildren:function(f,b,c){var a=this.store;if(a.isItemLoaded(f)){for(var d=[],g=0;g<this.childrenAttrs.length;g++)var p=a.getValues(f,this.childrenAttrs[g]),d=d.concat(p);var m=0;
this.deferItemLoadingUntilExpand||h.forEach(d,function(b){a.isItemLoaded(b)||m++});0==m?b(d):h.forEach(d,function(l,g){a.isItemLoaded(l)||a.loadItem({item:l,onItem:function(a){d[g]=a;0==--m&&b(d)},onError:c})})}else{var s=k.hitch(this,arguments.callee);a.loadItem({item:f,onItem:function(a){s(a,b,c)},onError:c})}},isItem:function(f){return this.store.isItem(f)},fetchItemByIdentity:function(f){this.store.fetchItemByIdentity(f)},getIdentity:function(f){return this.store.getIdentity(f)},getLabel:function(f){return this.labelAttr?
this.store.getValue(f,this.labelAttr):this.store.getLabel(f)},newItem:function(f,b,c){var a={parent:b,attribute:this.childrenAttrs[0]},d;this.newItemIdAttr&&f[this.newItemIdAttr]?this.fetchItemByIdentity({identity:f[this.newItemIdAttr],scope:this,onItem:function(g){g?this.pasteItem(g,null,b,!0,c):(d=this.store.newItem(f,a))&&void 0!=c&&this.pasteItem(d,b,b,!1,c)}}):(d=this.store.newItem(f,a))&&void 0!=c&&this.pasteItem(d,b,b,!1,c)},pasteItem:function(f,b,c,a,d){var g=this.store,p=this.childrenAttrs[0];
b&&h.forEach(this.childrenAttrs,function(c){if(g.containsValue(b,c,f)){if(!a){var d=h.filter(g.getValues(b,c),function(a){return a!=f});g.setValues(b,c,d)}p=c}});if(c)if("number"==typeof d){var m=g.getValues(c,p).slice();m.splice(d,0,f);g.setValues(c,p,m)}else g.setValues(c,p,g.getValues(c,p).concat(f))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(f,b){b&&this.getChildren(b.item,k.hitch(this,function(c){this.onChildrenChange(b.item,c)}))},onDeleteItem:function(f){this.onDelete(f)},
onSetItem:function(f,b){if(-1!=h.indexOf(this.childrenAttrs,b))this.getChildren(f,k.hitch(this,function(b){this.onChildrenChange(f,b)}));else this.onChange(f)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(h,q,n,k,f){return q("dijit.tree.ForestStoreModel",f,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(b){this.root={store:this,root:!0,id:b.rootId,label:b.rootLabel,
children:b.rootChildren}},mayHaveChildren:function(b){return b===this.root||this.inherited(arguments)},getChildren:function(b,c,a){b===this.root?this.root.children?c(this.root.children):this.store.fetch({query:this.query,onComplete:k.hitch(this,function(a){this.root.children=a;c(a)}),onError:a}):this.inherited(arguments)},isItem:function(b){return b===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(b){if(b.identity==this.root.id){var c=b.scope||n.global;b.onItem&&b.onItem.call(c,
this.root)}else this.inherited(arguments)},getIdentity:function(b){return b===this.root?this.root.id:this.inherited(arguments)},getLabel:function(b){return b===this.root?this.root.label:this.inherited(arguments)},newItem:function(b,c,a){return c===this.root?(this.onNewRootItem(b),this.store.newItem(b)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(b,c,a,d,g){if(c===this.root&&!d)this.onLeaveRoot(b);this.inherited(arguments,[b,c===this.root?null:c,a===this.root?null:a,d,
g]);if(a===this.root)this.onAddToRoot(b)},onAddToRoot:function(b){console.log(this,": item ",b," added to root")},onLeaveRoot:function(b){console.log(this,": item ",b," removed from root")},_requeryTop:function(){var b=this.root.children||[];this.store.fetch({query:this.query,onComplete:k.hitch(this,function(c){this.root.children=c;if(b.length!=c.length||h.some(b,function(a,b){return c[b]!=a}))this.onChildrenChange(this.root,c)})})},onNewItem:function(b,c){this._requeryTop();this.inherited(arguments)},
onDeleteItem:function(b){-1!=h.indexOf(this.root.children,b)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(b,c,a,d){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(h,q,n,k,f,b,c,a,d,g,p){return q("dijit.tree._dndSelector",p,{constructor:function(){this.selection=
{};this.anchor=null;this.events.push(a(this.tree.domNode,d.press,k.hitch(this,"onMouseDown")),a(this.tree.domNode,d.release,k.hitch(this,"onMouseUp")),a(this.tree.domNode,d.move,k.hitch(this,"onMouseMove")),a(this.tree.domNode,g.press,k.hitch(this,"onClickPress")),a(this.tree.domNode,g.release,k.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,c;for(c in b)a.push(b[c]);return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);
this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(a){var c=h.filter(this.getSelectedTreeNodes(),function(c){return!b.isDescendant(c.domNode,a.domNode)});this.setSelection(c);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=this.getSelectedTreeNodes();h.forEach(this._setDifference(b,a),k.hitch(this,function(a){a.setSelected(!1);
this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));h.forEach(this._setDifference(a,b),k.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){h.forEach(b,function(a){a.__exclude__=!0});var c=h.filter(a,function(a){return!a.__exclude__});h.forEach(b,function(a){delete a.__exclude__});return c},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=[],c=[];h.forEach(a,function(a){var d=a.getTreePath();
c.push(a);b.push(d)},this);a=h.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!this.current||!this.current.isExpandable||!this.tree.isExpandoNode(a.target,this.current)){"mousedown"==a.type&&c.isLeft(a)&&a.preventDefault();var b="keydown"==a.type?this.tree.focusedChild:this.current;
if(b){var d=f.getCopyKeyState(a),g=b.id;!this.singular&&!a.shiftKey&&this.selection[g]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(b,d,a.shiftKey))}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,f.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-
b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);var d=doc.createRange();d.setStartBefore(b);return c.compareBoundaryPoints(c.END_TO_END,d)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,b,c){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&
this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);c=this.anchor;0>b?b=c:(b=a,a=c);for(c=[];b!=a;)c.push(b),b=this.tree._getNext(b);c.push(a);this.setSelection(c)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,b){b=b||n.global;for(var c in this.selection)a.call(b,this.getItem(c),c,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),
function(h,q,n,k,f,b){return q("dijit.tree._dndContainer",null,{constructor:function(c,a){this.tree=c;this.node=c.domNode;k.mixin(this,a);this.containerState="";n.add(this.node,"dojoDndContainer");this.events=[f(this.node,b.enter,k.hitch(this,"onOverEvent")),f(this.node,b.leave,k.hitch(this,"onOutEvent")),h.after(this.tree,"_onNodeMouseEnter",k.hitch(this,"onMouseOver"),!0),h.after(this.tree,"_onNodeMouseLeave",k.hitch(this,"onMouseOut"),!0),f(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},
destroy:function(){for(var b;b=this.events.pop();)b.remove();this.node=this.parent=null},onMouseOver:function(b){this.current=b},onMouseOut:function(){this.current=null},_changeState:function(b,a){var d="dojoDnd"+b,g=b.toLowerCase()+"State";n.replace(this.node,d+a,d+this[g]);this[g]=a},_addItemClass:function(b,a){n.add(b,"dojoDndItem"+a)},_removeItemClass:function(b,a){n.remove(b,"dojoDndItem"+a)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container",
"")}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/_ItemSelector esri/request".split(" "),function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w){return h([q,n,k,m],{templateString:f,baseClass:"jimu-featurelayer-chooser-from-portal",
_layersDef:null,appConfig:null,multiple:!1,postMixInProperties:function(){this.nls=b.mixin({},window.jimuNls.common);this.nls=b.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){var c=g(".layer-checkbox",this.layersTable),c=a.filter(c,b.hitch(this,function(a){return a.checked}));return a.map(c,b.hitch(this,function(a){a=a.parentNode.parentNode;var b=a.layerInfo;return{name:b&&b.name||"",url:a.url||
"",definition:b}}))},_initSelf:function(){this.selector=new l({appConfig:this.appConfig,itemTypes:["Feature Service","Map Service"]});this.own(d(this.selector,"item-selected",b.hitch(this,this._onItemSelected)));this.own(d(this.selector,"none-item-selected",b.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);this.selector.startup()},_onItemSelected:function(){c.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){c.addClass(this.btnNext,
"jimu-state-disabled")},_onBtnBackClicked:function(){this._layersDef&&!this._layersDef.isFulfilled()&&this._layersDef.cancel();c.setStyle(this.btnOk,"display","none");c.setStyle(this.btnNext,"display","block");c.setStyle(this.btnBack,"display","none");c.addClass(this.btnOk,"jimu-state-disabled");c.setStyle(this.selectorContainer,"display","block");c.setStyle(this.layersSection,"display","none");this._resetLayers();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&
this.emit("ok",a)},_onBtnNextClicked:function(){var a=this.selector.getSelectedItem();if(a){c.setStyle(this.btnNext,"display","none");c.setStyle(this.btnBack,"display","block");c.setStyle(this.btnOk,"display","block");c.addClass(this.btnOk,"jimu-state-disabled");c.setStyle(this.selectorContainer,"display","none");c.setStyle(this.layersSection,"display","block");this._resetLayers();var e=a.url||a.item;this.layersShelter.show();this._layersDef=w({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});
this._layersDef.then(b.hitch(this,function(b){this.domNode&&(this.layersShelter.hide(),this._layersDef=null,this._showLayers(a,b))}),b.hitch(this,function(a){this.domNode&&(this.layersShelter.hide(),console.error(a),this._layersDef=null)}));this.emit("next")}},_resetLayers:function(){this.serviceName.innerHTML="";this.errorTip.innerHTML="";c.setStyle(this.errorSection,"display","none");c.setStyle(this.layersTable,"display","table");c.empty(this.layersTbody)},_showLayers:function(d,e){this.serviceName.innerHTML=
d.title;if(e.capabilities&&0<=e.capabilities.indexOf("Query")){var l=d.url||d.item,v=a.filter(e.layers,b.hitch(this,function(a){return!a.subLayerIds})),v=a.map(v,b.hitch(this,function(a){var e=l+"/"+a.id,d=new p;w({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(b.hitch(this,function(a){if(this.domNode){var b=c.toDom('\x3ctr\x3e\x3ctd\x3e\x3cinput class\x3d"layer-checkbox" type\x3d"checkbox" /\x3e\x3c/td\x3e\x3ctd\x3e\x3cspan class\x3d"layer-name"\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e');
c.place(b,this.layersTbody);b.layerInfo=a;b.url=e;g(".layer-name",b)[0].innerHTML=a.name;d.resolve(a)}}),b.hitch(this,function(a){this.domNode&&(console.error(a),d.reject(a))}));return d}));0<v.length&&(this.layersShelter.show(),this._layersDef=s(v),this._layersDef.then(b.hitch(this,function(a){this.domNode&&(this.layersShelter.hide(),this._layersDef=null)}),b.hitch(this,function(a){this.domNode&&(console.error(a),this.layersShelter.hide(),this._layersDef=null)})))}else this._showLayersErrorInfo("The service doesn't support query.")},
_onLayersTableClicked:function(d){d=d.target||d.srcElement;if(c.hasClass(d,"layer-checkbox")){var e=g(".layer-checkbox",this.layersTable);a.some(e,b.hitch(this,function(a){return a.checked}))?c.removeClass(this.btnOk,"jimu-state-disabled"):c.addClass(this.btnOk,"jimu-state-disabled");!this.multiple&&d.checked&&(a.forEach(e,b.hitch(this,function(a){a.checked=!1})),d.checked=!0)}},_showLayersErrorInfo:function(a){c.setStyle(this.errorSection,"display","block");this.errorTip.innerHTML=a},_onBtnCancelClicked:function(){this.emit("cancel")}})})},
"jimu/dijit/_ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable".split(" "),function(h,q,n,k,f,b,c,a,d,g,p,m,s,
l,w,u,e,x,v,r,t,B){return h([n,k,f,c],{templateString:b,baseClass:"item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",appConfig:null,itemTypes:"",postMixInProperties:function(){this.itemTypes&&
0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";d.forEach(this.itemTypes,a.hitch(this,function(a,b){this._itemTypes+='"'+a+'"';b!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=
w.getItemQueryStringByTypes(this.itemTypes);if(!this._itemTypeQueryString)throw"itemTypes is not a valid item type array.";},_initTabs:function(){this.tab=new t({tabs:[{title:this.nls.myContent,content:this.mycontentTabNode},{title:this.nls.myOrganization,content:this.organizationTabNode},{title:this.nls.myGroup,content:this.groupTabNode},{title:this.nls.publicMap,content:this.publicTabNode}]},this.tabNode);this.own(l(this.tab,"tabChanged",a.hitch(this,function(a){g.setStyle(this.signinSection,"display",
"none");a!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){g.setStyle(this.signinSection,"display","none");var a=s(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",this.domNode);e.userHaveSignInPortal(this._getPortalUrl())?a.style("display","block"):(a.style("display","none"),this._isPublicTabShow||g.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var a=
this._getPortalUrl(),a=x.getServerByUrl(a);x.isArcGIScom(a)?(this.portalPublicRaido.disabled=!0,this.onlinePublicRaido.checked=!0,g.setStyle(this.portalPublicRaido,"display","none"),g.setStyle(this.portalServer,"display","none")):(this.portalPublicRaido.disabled=!1,this.portalPublicRaido.checked=!0,this.portalServer.innerHTML=a)},_initSearchQuery:function(){this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:this._itemTypeQueryString+" AND access:public"});this._filterPublicPortalQuery=
this._getQuery({q:this._itemTypeQueryString+" AND access:public"});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:'(group:"c755678be14e4a0984af36a15f5b643e" OR group:"b8787a74b4d74f7fb9b8fac918735153") '+this._itemTypeQueryString+" AND access:public"});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public"});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=
this._getQuery();this._filterMyContentQuery=this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(b){return a.mixin({start:1,num:16,f:"json"},b||{})},_getPortalUrl:function(){var a="";this.appConfig&&(a=this.appConfig.portalUrl);return a=x.getStandardPortalUrl(a)},_initItemTables:function(){this.own(l(this.publicPortalItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(l(this.publicOnlineItemTable,"item-dom-clicked",
a.hitch(this,this._onItemDomClicked)));this.own(l(this.organizationItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(l(this.groupItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(l(this.mycontentItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));var b=this._getPortalUrl();this.portalPublicRaido.disabled||(this.publicPortalItemTable.set("portalUrl",b),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",
this._filterPublicPortalQuery));this.publicOnlineItemTable.set("portalUrl","http://www.arcgis.com");this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery);this.publicOnlineItemTable.set("filteredQuery",this._filterPublicOnlineQuery)},_initPublic:function(){this.own(l(this.portalPublicRaido,"click",a.hitch(this,this._onPublicRaidoClicked)));this.own(l(this.onlinePublicRaido,"click",a.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.checked?
(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.checked&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},_onPublicSearch:function(b){(b=b&&a.trim(b))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.checked?(this._filterPublicPortalQuery.q=b+this._itemTypeQueryString+" AND access:public",this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):
this.onlinePublicRaido.checked&&(this._filterPublicOnlineQuery.q=b+this._itemTypeQueryString+" AND access:public",this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(l(this.groupsSelect,"change",a.hitch(this,this._onGroupsSelectChange)));var b=x.getServerByUrl(this._getPortalUrl());
x.isArcGIScom(b)&&(b="ArcGIS.com");this.signinSection.title=this.nls.signInTo+" "+b;e.userHaveSignInPortal(this._getPortalUrl())&&this._onSignIn()},_onOrganizationSearch:function(b){if(b=b&&a.trim(b)){if(this._allOrganizationQuery){var c=this._allOrganizationQuery.q;c&&(this._filterOrganizationQuery.q=b+" "+c,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(b){if(b=
b&&a.trim(b)){if(this._allMyContentQuery){var c=this._allMyContentQuery.q;c&&(this._filterMyContentQuery.q=b+" "+c,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(b){if(b=b&&a.trim(b)){if(this._allGroupQuery){var c=this._allGroupQuery.q;c&&(this._filterGroupQuery.q=b+" "+c,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},
_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=!0;var b=this._getPortalUrl();u.getPortal(b).getUser().then(a.hitch(this,function(a){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(a),this._searchMyContent(a),this._searchGroups(a))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(a){this.organizationItemTable.clear();
a=" orgid:"+a.orgId+" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) ";var b=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:a});this._filterOrganizationQuery=this._getQuery({q:a});this.organizationItemTable.set("portalUrl",b);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(a){this.mycontentItemTable.clear();var b=this._getPortalUrl();a="owner:"+a.username+" AND "+this._itemTypeQueryString;this._allMyContentQuery=
this._getQuery({q:a});this._filterMyContentQuery=this._getQuery({q:a});this.mycontentItemTable.set("portalUrl",b);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(a){this._resetGroupsSection();g.setStyle(this.groupsSection,"display","block");a=a.getGroups();if(0<a.length){g.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();g.empty(this.groupsSelect);for(var b=0;b<a.length;b++){var c=a[b];g.create("option",{value:c.id,innerHTML:c.title},
this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(a.length)},_resetGroupsSection:function(){g.setStyle(this.groupsSection,"display","none");g.empty(this.groupsSelect);g.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();g.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(a){0===a?g.setStyle(this.groupsSection,"top","15px"):g.setStyle(this.groupsSection,
"top","50px")},_onGroupsSelectChange:function(){var a=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===a)g.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{g.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var b=this._getPortalUrl(),a="group:"+a+" AND "+this._itemTypeQueryString;this._allGroupQuery=this._getQuery({q:a});this._filterGroupQuery=this._getQuery({q:a});this.groupItemTable.set("portalUrl",b);this.groupItemTable.searchAllItems(this._allGroupQuery)}},
_onItemDomClicked:function(a){var b=g.hasClass(a,"selected");s(".item-div.selected",this.domNode).removeClass("selected");b&&g.addClass(a,"selected");(a=this.getSelectedItem())?this.emit("item-selected",a):this.emit("none-item-selected")},getSelectedItem:function(){var b=null,c=s(".item-div.selected",this.domNode);0<c.length&&(b=a.mixin({},c[0].item));return b}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u){return h([q,n,k,b],{templateString:f,baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=w.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){d.setStyle(this.domNode,"display","block")},hide:function(){d.setStyle(this.domNode,"display","none")},searchAllItems:function(a){this.showAllItemsSection();a&&(this.query=c.mixin({},a),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),l.getPortal(this.portalUrl).queryItems(this.query).then(c.hitch(this,function(a){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),c.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(a){this.showFilterItemsSection();a&&(this.filteredQuery=c.mixin({},a),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),l.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(c.hitch(this,function(a){this.domNode&&
(this.filteredItemShelter.hide(),this.filteredQuery.start=a.nextStart,this._createItems(a,this.filteredItemsTbody),0===this._getItemCount(this.filteredItemsTbody)&&(d.setStyle(this.filteredItemsTableDiv,"display","none"),d.setStyle(this.searchNoneTipSection,"display","block")))}),c.hitch(this,function(a){console.error(a);this.domNode&&(this.filteredItemShelter.hide(),0===this._getItemCount(this.filteredItemsTbody)&&(d.setStyle(this.filteredItemsTableDiv,"display","none"),d.setStyle(this.searchNoneTipSection,
"display","block")))})))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){d.empty(this.allItemTbody)},clearFilteredItemsSection:function(){d.empty(this.filteredItemsTbody)},showAllItemsSection:function(){d.setStyle(this.allItemsSection,"display","block");d.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){d.setStyle(this.allItemsSection,"display","none");d.setStyle(this.filteredItemsSection,"display",
"block");d.setStyle(this.filteredItemsTableDiv,"display","block");d.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(a){return s.isScrollToBottom(a)},_createItems:function(b,g){var v=b.results,r=a.map(this.types,c.hitch(this,function(a){return a.toLowerCase()})),
v=a.filter(v,c.hitch(this,function(b){b=b.type&&b.type.toLowerCase()||"";return 0<=a.indexOf(r,b)}));if(0!==v.length){var t,l=p("td.empty",g),f;if(0<l.length){var m=v.splice(0,l.length);for(f=0;f<l.length;f++){var h=l[f];t=this._createItem(m[f]);d.place(t,h);d.removeClass(h,"empty")}}if(0!==v.length){l=Math.ceil(v.length/2);for(f=0;f<l;f++){t=d.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e");d.place(t,g);m=p("td",t);for(h=0;h<m.length;h++){var w=m[h];(t=v[2*f+h])?(t=this._createItem(t),
d.place(t,w)):d.addClass(w,"empty")}}}}},_getItemCount:function(a){return p(".item-div",a).length},_createItem:function(a){var b=d.toDom('\x3cdiv class\x3d"item-div"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
b.item=a;var c=p(".item-thumbnail",b)[0],r=p(".item-name",b)[0],t=p(".item-type-owner",b)[0],g=p(".item-date",b)[0],l=p(".item-details",b)[0];a.thumbnailUrl?d.setStyle(c,"backgroundImage","url("+a.thumbnailUrl+")"):c.innerHTML=this.nls.noneThumbnail;r.innerHTML=a.title;r.title=r.innerHTML;t.innerHTML=a.type+" by "+a.owner;t.title=t.innerHTML;c=new Date;c.setTime(a.modified);g.innerHTML=c.toLocaleString();g.title=g.innerHTML;l.innerHTML=this.nls.moreDetails;l.href=a.detailsPageUrl||"#";return b},_onItemsTableClicked:function(a){a=
a.target||a.srcElement;if(d.hasClass(a,"item-thumbnail")){a=a.parentNode;var b=d.hasClass(a,"selected");p(".item-div.selected",this.domNode).removeClass("selected");b?d.removeClass(a,"selected"):d.addClass(a,"selected");this.emit("item-dom-clicked",a)}},getSelectedItem:function(){var a=null,b=p(".item-div.selected",this.domNode);0<b.length&&(a=c.mixin({},b[0].item));return a}})})},"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent",
"./FeaturelayerServiceBrowser"],function(h,q,n){return h([q],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(h){return new n(h)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w){return h([q,n,k,b],{templateString:f,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=g.mixin({},window.jimuNls.common);this.nls=g.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
a.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf()},setUrl:function(a){var b=new c;(this.url=a)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),b=this._onBtnValidateClick()):b.reject();return b},_initSelf:function(){this._examples&&0<this._examples.length?d.forEach(this._examples,g.hitch(this,function(b){a.create("div",{innerHTML:b,style:{"white-space":"normal","word-wrap":"break-word","word-break":"break-all","font-size":"13px"}},
this.exampleTd)})):a.setStyle(this.exampleTr,"display","none");var b={multiple:this.multiple,_onTreeClick:g.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(b);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(m.after(this.urlInput,"validator",g.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.setUrl(this.url)},_createServiceBrowser:function(a){},_afterUrlValidate:function(b){b?a.removeClass(this.btnValidate,
"jimu-state-disabled"):a.addClass(this.btnValidate,"jimu-state-disabled");return b},_onBtnValidateClick:function(){var a=new c;if(this.urlInput.validate()){var b=this.urlInput.get("value");this.serviceBrowser.setUrl(b).then(g.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.resolve()}),g.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.reject()}))}else a.reject();return a},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?a.removeClass(this.btnOk,
"jimu-state-disabled"):a.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define("dojo/_base/declare ./_BasicServiceBrowser dojo/_base/lang dojo/_base/array dojo/Deferred dojo/promise/all jimu/utils".split(" "),function(h,q,n,k,f,b,c){return h([q],{baseClass:"jimu-featurelayer-service-browser",
declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",_leafType:"layer",_serviceTypes:["MapServer","FeatureServer"],url:"",multiple:!1,types:null,postMixInProperties:function(){this.inherited(arguments);this._initTypes()},getSelectedItems:function(){var a=this.inherited(arguments);return a=k.map(a,n.hitch(this,function(a){return{name:a.name,url:a.url,definition:a.definition}}))},_initTypes:function(){var a=["point","polyline","polygon"];this.types&&0<this.types.length?(this.types=k.filter(this.types,
n.hitch(this,function(b){return 0<=a.indexOf(b)})),0===this.types.length&&(this.types=a)):this.types=a},_validateEsriGeometryType:function(a){a=c.getTypeByGeometryType(a);return 0<=this.types.indexOf(a)},_searchServiceUrlCallback:function(a,b,c){var p=new f,m=k.filter(c.layers,n.hitch(this,function(a){return!(0<=a.parentLayerId)}));if(0<m.length){var h=0<=a.indexOf("/MapServer"),l=0;c.currentVersion&&(l=parseFloat(c.currentVersion));p=h&&10<=l?this._searchServiceUrlGreaterEqual10(a,b,c,m):this._searchServiceUrlLessThan10(a,
b,c,m)}else setTimeout(n.hitch(this,function(){p.resolve()}),0);return p},_searchServiceUrlLessThan10:function(a,c,g,p){var m=new f;a=k.map(p,n.hitch(this,function(a){var b=new f,g=a.subLayerIds?"group":"layer",m=c.url+"/"+a.id;"group"===g?(g={name:a.name,type:g,url:m,parent:c.id},g.layerId=a.id,g.subLayerIds=a.subLayerIds,g.parentLayerId=a.parentLayerId,this._addItem(g),setTimeout(n.hitch(this,function(){b.resolve()}),0)):b=this._searchLayerUrl(m,c,!1);return b}));b(a).then(n.hitch(this,function(){m.resolve()}),
n.hitch(this,function(){m.reject()}));return m},_searchServiceUrlGreaterEqual10:function(a,c,g,p){var m=new f;this._getRestInfo(a+"/layers").then(n.hitch(this,function(g){var l=c.allLayerDefinitions=g.layers;l&&0<l.length?(g=k.map(p,n.hitch(this,function(b){var g=new f,e=b.subLayerIds?"group":"layer",m=b.id,v=l[m],r=a+"/"+m;"group"===e?(e={name:b.name,type:e,url:r,parent:c.id},e.layerId=m,e.subLayerIds=b.subLayerIds,e.parentLayerId=b.parentLayerId,e.definition=v,e.allLayerDefinitions=l,this._addItem(e),
setTimeout(n.hitch(this,function(){g.resolve()}),0)):g=this._searchLayerUrl(r,c,!1,v);return g})),b(g).then(n.hitch(this,function(){m.resolve()}),n.hitch(this,function(){m.reject()}))):m.resolve()}),n.hitch(this,function(){m.reject()}));return m},_searchChildResource:function(a,b){return this._searchLayerUrl(a,b,!0)},_searchLayerUrl:function(a,b,c,p){var m=new f,h=n.hitch(this,function(c){if(this.domNode){this.shelter.hide();var g="Group Layer"===c.type?"group":"layer";if(c.capabilities&&0<=c.capabilities.indexOf("Query")){if("layer"===
g){if("Feature Layer"!==c.type){m.resolve();return}if(!this._validateEsriGeometryType(c.geometryType)){m.resolve();return}}c.url=a;g={name:c.name,type:g,url:a,parent:b.id,definition:c};g.layerId=c.id;g.allLayerDefinitions=b.allLayerDefinitions;c.subLayers&&(g.subLayerIds=k.map(c.subLayers,n.hitch(this,function(a){return a.id})));g.parentLayerId=c.parentLayer?c.parentLayer.id:-1;this._addItem(g)}m.resolve()}});p?setTimeout(n.hitch(this,function(){h(p)}),0):(this.shelter.show(),this._getRestInfo(a).then(h,
n.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),c?m.reject({errorCode:"NETWORK_ERROR",error:a}):m.reject(a))})));return m},_mayHaveChildren:function(a){return"group"===a.type?a.subLayerIds&&0<a.subLayerIds.length:"layer"!==a.type},_getIconImageName:function(a,b){var g="";if(this._isServiceTypeSupported(a.type))g=b?"mapserver_open.png":"mapserver_close.png";else if("group"===a.type)g=b?"group_layer2.png":"group_layer1.png";else if("layer"===a.type){var f=c.getTypeByGeometryType(a.definition&&
a.definition.geometryType);"point"===f?g="point_layer1.png":"polyline"===f?g="line_layer1.png":"polygon"===f&&(g="polygon_layer1.png")}else"root"===a.type&&this._currentUrl&&k.some(this._serviceTypes,n.hitch(this,function(a){return this._isStringEndWith(this._currentUrl,"/"+a)}))&&(g=b?"mapserver_open.png":"mapserver_close.png");return g},_onTreeOpen:function(a,c){var g=a.allLayerDefinitions;if(!(0<this._store.query({parent:a.id}).length)&&!c.item.checking&&!c.item.checked)if(this._isServiceTypeSupported(a.type)){a.checking=
!0;var f=a.url.replace(/\/*$/g,"");this._getRestInfo(f).then(n.hitch(this,function(b){a.checking=!1;a.checked=!0;this.domNode&&(b.url=f,this._searchServiceUrlCallback(f,a,b))}),n.hitch(this,function(b){console.error(b);a.checking=!1;a.checked=!0}))}else if("group"===a.type){var m=a.subLayerIds;m&&0<m.length&&(a.checking=!0,m=k.map(m,n.hitch(this,function(b){b=parseInt(b,10);var c=a.url.slice(0,a.url.length-(1+a.layerId.toString().length))+"/"+b,d=null;g&&(d=g[b]);return this._searchLayerUrl(c,a,!1,
d)})),b(m).then(n.hitch(this,function(){a.checking=!1;a.checked=!0}),n.hitch(this,function(b){a.checking=!1;a.checked=!0;console.error(b)})))}}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/query dojo/on dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/dijit/_Tree dijit/registry esri/request jimu/dijit/Message jimu/dijit/LoadingShelter".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u,e,x,v,r){return h([q,n,k,f],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_leafType:"",_serviceTypes:"",_def:null,url:"",multiple:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(a){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new p;(!a||!("string"===typeof a&&a.replace(/\/*$/g,"")))&&setTimeout(b.hitch(this,function(){this._def.reject()}),0);a=a.replace(/\/*$/g,"");a=b.trim(a);var c=a.match(/^http(s?):\/\//gi);
c&&0<c.length||(a="http://"+a);if(!(0>=a.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=a))return a=this._getRootItem(),(this._isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,a):this._isUrlContainsServiceType(this._currentUrl)?this._isUrlEndWithServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,a,!0):this._searchChildResource(this._currentUrl,a,!0):this._searchFolderServiceUrl(this._currentUrl,a)).then(b.hitch(this,function(a){var b=
this.tree.getAllLeafTreeNodeWidgets();1===b.length&&b[0].select();this._def.resolve(a)}),b.hitch(this,function(a){a&&(a.errorCode&&"NETWORK_ERROR"===a.errorCode)&&this._showRequestError();this._def.reject(a)})),this._def;setTimeout(b.hitch(this,function(){this._def.reject()}),0)},_isServiceTypeSupported:function(b){return 0<=a.indexOf(this._serviceTypes,b)},_getStringEndWith:function(a,b){var c="",e=a.indexOf(b);0<=e&&(c=a.slice(0,e+b.length));return c},_isUrlContainsServiceType:function(c){return a.some(this._serviceTypes,
b.hitch(this,function(a){return 0<=c.indexOf("/"+a)}))},_isUrlEndWithServiceType:function(c){return a.some(this._serviceTypes,b.hitch(this,function(a){return this._isStringEndWith(c,"/"+a)}))},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(a){var b="";a=a.split("/");return b=a[a.length-1]},_searchBaseServiceUrl:function(c,e){this.shelter.show();var d=new p;this._getRestInfo(c).then(b.hitch(this,function(r){if(this.domNode){a.forEach(r.services,
b.hitch(this,function(a){this._isServiceTypeSupported(a.type)&&(a={name:this._getServiceName(a.name),type:a.type,url:c+"/"+a.name+"/"+a.type,parent:e.id},this._addItem(a))}));var g=a.map(r.folders,b.hitch(this,function(a){return{name:a,type:"folder",url:c+"/"+a,parent:e.id}}));0===g.length?(this.shelter.hide(),d.resolve()):(r=a.map(g,b.hitch(this,function(a){return this._getRestInfo(a.url)})),m(r).then(b.hitch(this,function(e){this.domNode&&(this.shelter.hide(),a.forEach(e,b.hitch(this,function(e,
d){var r=g[d],v=a.filter(e.services,b.hitch(this,function(a){return this._isServiceTypeSupported(a.type)}));0<v.length&&(r=this._addItem(r),a.forEach(v,b.hitch(this,function(a){a={name:this._getServiceName(a.name),type:a.type,url:c+"/"+a.name+"/"+a.type,parent:r.id};this._addItem(a)})))})),d.resolve())}),b.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),d.resolve())})))}}),b.hitch(this,function(a){console.error("request layer info failed",a);this.domNode&&(this.shelter.hide(),
d.reject({errorCode:"NETWORK_ERROR",error:a}))}));return d},_searchFolderServiceUrl:function(c,e){var d=new p,r=this._getBaseServiceUrl();this.shelter.show();this._getRestInfo(c).then(b.hitch(this,function(c){this.domNode&&(this.shelter.hide(),c.services&&0<c.services.length&&a.forEach(c.services,b.hitch(this,function(a){this._isServiceTypeSupported(a.type)&&(a={name:this._getServiceName(a.name),type:a.type,url:r+"/"+a.name+"/"+a.type,parent:e.id},this._addItem(a))})),d.resolve())}),b.hitch(this,
function(a){console.error(a);this.domNode&&(this.shelter.hide(),d.reject({errorCode:"NETWORK_ERROR",error:a}))}));return d},_searchServiceUrl:function(a,c){var e=new p;a=a.replace(/\/*$/g,"");var d=a.split("/"),r=d[d.length-1],g=d[d.length-2];this.shelter.show();this._getRestInfo(a).then(b.hitch(this,function(d){if(this.domNode){d.url=a;this.shelter.hide();var v={name:g,type:r,url:a,parent:c.id},v=this._addItem(v);this._searchServiceUrlCallback(a,v,d).then(b.hitch(this,function(){this.domNode&&e.resolve()}),
b.hitch(this,function(a){console.error(a)}))}}),b.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),e.reject({errorCode:"NETWORK_ERROR",error:a}))}));return e},_searchServiceUrlCallback:function(a,c,e){var d=new p;setTimeout(b.hitch(this,function(){d.resolve()}),0);return d},_searchChildResource:function(a,c,e){var d=new p;setTimeout(b.hitch(this,function(){d.resolve()}),0);return d},_getRestInfo:function(a){return x({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback",
timeout:2E4})},_isStringEndWith:function(a,b){return a.lastIndexOf(b)+b.length===a.length},_clear:function(){var c=this._store.query({parent:"root"});a.forEach(c,b.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_showRequestError:function(){new v({message:this.nls.unableConnectTo+" "+this._currentUrl})},_addItem:function(a){this._id++;a.id=this._id.toString();this._store.add(a);return a},_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var a=
this._getRootItem(),a=new s({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new l(a);a=new w({store:this._store,query:{id:"root"},mayHaveChildren:b.hitch(this,this._mayHaveChildren)});this.tree=new u({multiple:this.multiple,model:a,showRoot:!1,leafType:this._leafType,style:{width:"100%"},onOpen:b.hitch(this,this._onTreeOpen),onClick:b.hitch(this,this._onTreeClick),getIconStyle:b.hitch(this,function(a,b){var c=null;if(!a)return null;var d={width:"20px",height:"20px",
backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},e=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),r=this._getIconImageName(a,b);r||("folder"===a.type?r=b?"folder_open.png":"folder_close.png":this._isServiceTypeSupported(a.type)&&(r=b?"folder_open.png":"folder_close.png"));r&&(d.backgroundImage="url("+e+"/css/images/"+r+")",c=d);return c})});c.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(a,
b){},_mayHaveChildren:function(a){return a.type!==this._leafType},_onTreeOpen:function(a,b){},_onTreeClick:function(a,b,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"widgets/Query/setting/SingleQuerySetting":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleQuerySetting.html dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/on dojo/Evented dijit/form/ValidationTextBox jimu/utils jimu/dijit/Filter jimu/dijit/TabContainer3 jimu/dijit/Popup jimu/dijit/Message jimu/dijit/LoadingShelter jimu/dijit/SymbolPicker jimu/dijit/_FeaturelayerSourcePopup ./PopupConfig esri/request esri/symbols/jsonUtils".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u,e,x,v,r,t,B,z){return h([q,n,k,p],{baseClass:"jimu-widget-single-query-setting",templateString:f,map:null,nls:null,tr:null,_layerDefinition:null,postCreate:function(){this.inherited(arguments);this._initSelf()},destroy:function(){this.tr=null;delete this.tr;this.inherited(arguments)},setConfig:function(a){this.config=a;if(this._isObject(this.config)){var c=a.url||"";c&&"string"===typeof c&&(this._layerDefinition&&this._layerDefinition.url===c?(this.tab.hideShelter(),
this._resetByConfig(this.config,this._layerDefinition)):(this._layerDefinition=null,this.showBigShelter(),B({url:c,handAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(b.hitch(this,function(a){this.domNode&&(this.hideBigShelter(),this.tab.hideShelter(),this._layerDefinition=a,this._layerDefinition.url=c,this._resetByConfig(this.config,this._layerDefinition))}),b.hitch(this,function(a){console.error(a);this.domNode&&this.hideBigShelter()}))))}},getConfig:function(){var a={name:"",url:"",
filter:{useFilter:"",filterInfo:""},popup:"",resultsSymbol:"",objectIdField:""};if(!this._layerDefinition)return this.scrollToDom(this.generalTable),new e({message:this.nls.setSourceTip}),null;a.url=this._layerDefinition.url;if(!this.queryNameTextBox.validate())return this.showValidationErrorTip(this.queryNameTextBox),null;a.name=this.queryNameTextBox.get("value");var d=this.filter.toJson();if(!d||!d.expr)return new e({message:this.nls.setFilterTip}),null;a.filter=d;d=this.popupConfig.getConfig();
if(!d)return null;a.popup=d;if(d=this.layerSymbolPicker.getSymbol())a.resultsSymbol=d.toJson();else return null;this._layerDefinition.objectIdField?a.objectIdField=this._layerDefinition.objectIdField:(d=c.filter(this._layerDefinition.fields,b.hitch(this,function(a){return"esriFieldTypeOID"===a.type})),0<d.length&&(a.objectIdField=d[0].name));this.tr._layerDefinition=this._layerDefinition;return a},scrollToDom:function(b){b=a.coords(b).y;var c=a.coords(this.domNode).y;this.domNode.parentNode.scrollTop=
b-c},showValidationErrorTip:function(a){!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),setTimeout(b.hitch(this,function(){a.focusNode.blur()}),100))},showBigShelter:function(){this.emit("show-shelter")},hideBigShelter:function(){this.emit("hide-shelter")},showQueryDefinition:function(){this.tab.selectTab(this.nls.queryDefinition)},showResultsSetting:function(){this.tab.selectTab(this.nls.resultsSetting)},_initSelf:function(){this._initPopupConfig();this._initTabs()},_initTabs:function(){this.tab=
new w({tabs:[{title:this.nls.queryDefinition,content:this.definitionTabNode},{title:this.nls.resultsSetting,content:this.resultsTabNode}]});this.tab.placeAt(this.detailSection);this.tab.showShelter()},_initPopupConfig:function(){this.popupConfig=new t({nls:this.nls,sqs:this});this.popupConfig.placeAt(this.popupContainer)},_getRandomString:function(){var a=Math.random().toString();return a=a.slice(2,a.length)},_onQueryNameChanged:function(){this.emit("name-change",this.queryNameTextBox.get("value"))},
_clear:function(){this.urlTextBox.set("value","");this._layerDefinition=null;this.queryNameTextBox.set("value","");this.filter.reset();this.tab.showShelter();this.popupConfig.clear();this.layerSymbolPicker.reset()},_onBtnSetSourceClicked:function(){var a=new r({titleLabel:this.nls.setDataSource,featureArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,appConfig:{portalUrl:window.portalUrl,appId:""},style:{height:"100%"}}});this.own(g(a,"ok",b.hitch(this,function(b){a.close();this.setNewLayerDefinition(b.name,
b.url,b.definition)})));this.own(g(a,"cancel",b.hitch(this,function(){a.close()})));a.startup()},setNewLayerDefinition:function(a,b,c,d){c.name=a;c.url=b;b!==(this._layerDefinition&&this._layerDefinition.url)&&this._resetByNewLayerDefinition(c,d)},_resetByNewLayerDefinition:function(a,d){this._clear();if(a){this._layerDefinition=a;var e=a.url;this.urlTextBox.set("value",e);this.queryNameTextBox.set("value",d||a.name);this.tab.hideShelter();this.filter.reset();this._layerDefinition&&this.filter.buildByExpr(e,
"1\x3d1",this._layerDefinition);var e=c.map(a.fields,b.hitch(this,function(a){a=b.mixin({},a);a.visible=!1;a.specialType="none";return a})),r="";a.displayField&&(r="${"+a.displayField+"}");this.popupConfig.setConfig({title:r,fields:e});e=s.getTypeByGeometryType(a.geometryType);r="";"point"===e?r="marker":"polyline"===e?r="line":"polygon"===e&&(r="fill");r&&this.layerSymbolPicker.showByType(r)}},_resetByConfig:function(a,d){var e=b.clone(a);this.urlTextBox.set("value",e.url);this.queryNameTextBox.set("value",
e.name||"");var r=e.filter;if(this._isObject(r)){this.filter.reset();this._isObject(r)?this.filter.buildByFilterObj(d.url,r,d):this.filter.buildByExpr(d.url,"1\x3d1",d);this.popupConfig.clear();this._isObject(e.popup)||(e.popup={fields:[],title:""});e.popup.fields&&0<=e.popup.fields.length||(e.popup.fields=[]);e.popup.title||(e.popup.title="");var g=c.filter(e.popup.fields,b.hitch(this,function(a){return a.showInInfoWindow})),v=c.map(g,b.hitch(this,function(a){return a.name})),r=c.map(d.fields,b.hitch(this,
function(a){var c=v.indexOf(a.name);0<=c?(a=b.mixin({},g[c]),a.visible=!0):(a=b.mixin({},a),a.specialType="none",a.visible=!1);return a}));this.popupConfig.setConfig({title:e.popup.title,fields:r});e=z.fromJson(e.resultsSymbol);this.layerSymbolPicker.showBySymbol(e)}},_isObject:function(a){return a&&"object"===typeof a}})})},"jimu/dijit/Filter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Filter.html jimu/filterUtils dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/aspect dojo/query dojo/Deferred esri/request ./LoadingIndicator ./_SingleFilter ./_FilterSet".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u,e,x){return h([q,n,k,b],{templateString:f,baseClass:"jimu-filter",declaredClass:"jimu.dijit.Filter",nls:null,_validOptions:!1,_layerDefinition:null,_def:null,noFilterTip:"",enableAskForValues:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsg.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.noFilterTip&&
"string"===typeof this.noFilterTip&&(this.noFilterTipSection.innerHTML=this.noFilterTip)},reset:function(){this.isBuilding()||(this.removeAllFilters(),this.partsObj=this.expr=this._layerDefinition=this.url=null)},isBuilding:function(){return this._def&&!this._def.isFulfilled()},buildByExpr:function(a,b,c){var e=new l;this.isBuilding()?e.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.expr=b||"1\x3d1",this._layerDefinition=c,e=this._def=this._init("expr"));return e},
buildByFilterObj:function(a,b,c){var e=new l;this.isBuilding()?e.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.partsObj=b,this._layerDefinition=c,e=this._def=this._init("partsObj"));return e},removeAllFilters:function(){this._destroyAllFilters()},_validateLayerDefinition:function(a){return this._isObject(a)},_init:function(b){var c=new l;if(!this._isString(this.url))return c.reject(),c;var e=a.hitch(this,function(){setTimeout(a.hitch(this,function(){c.resolve()}),
1500)}),f=a.hitch(this,function(){d.setStyle(this.contentSection,"display","block");d.setStyle(this.errorSection,"display","none");this.removeAllFilters();var f=this._layerDefinition.fields;f&&0<f.length?(f=g.filter(f,a.hitch(this,function(a){return 0<=this._supportFieldTypes.indexOf(a.type)})))&&0<f.length?(this._validOptions=!0,d.addClass(this.btnAddSet,"enable"),d.addClass(this.btnAddExp,"enable"),this.createFieldsStore(),"expr"===b?this._isString(this.expr)?("1\x3d1"===this.expr.replace(/\s/gi,
"")&&this.removeAllFilters(),this._parseExpr(this.expr),e()):c.reject():"partsObj"===b?this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),e()):c.reject():(this._validatePartsObj(this.partsObj)?this._parsePartsObj(this.partsObj):this._isString(this.expr)?this._parseExpr(this.expr):this.removeAllFilters(),e())):(this._showErrorOptions(this.nls.error.noFilterFields),c.reject()):c.reject()});this._validateLayerDefinition(this._layerDefinition)?f():(this.loading.show(),w({url:this.url,
content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(a.hitch(this,function(a){this.domNode?(this.loading.hide(),this._layerDefinition=a,f()):c.reject()}),a.hitch(this,function(a){console.error(a);c.reject();this.domNode&&this.loading.hide()})));return c},toJson:function(){var b={logicalOperator:this.allAnySelect.value,parts:[]},c=this._getAllSingleFiltersAndFilterSets();if(0===c.length)return b.expr="1\x3d1",b;g.forEach(c,a.hitch(this,function(a){a=a.toJson();b.parts.push(a)}));
return g.every(b.parts,a.hitch(this,function(a){return a}))&&0<b.parts.length?(b.expr=this.getExprByFilterObj(b),b):null},createFieldsStore:function(){if(!this._layerDefinition.fields||0===this._layerDefinition.fields.length)this._showErrorOptions(this.nls.error.noFilterFields);else{var b=a.mixin({},this._layerDefinition).fields;0===this.setFieldsStoreByFieldInfos(b)&&this._showErrorOptions(this.nls.error.noFilterFields)}},_parsePartsObj:function(a){this._validatePartsObj(a)&&(this.removeAllFilters(),
this._buildEditUIByPartsObj(a))},_parseExpr:function(a){this._validateLayerDefinition(this._layerDefinition)&&(this._destroyAllFilters(),!a||"string"!==typeof a?this._showErrorOptions(this.nls.error.invalidSQL):(a=this.getFilterObjByExpr(a))?this._buildEditUIByPartsObj(a):this._showErrorOptions(this.nls.error.cantParseSQL))},_buildEditUIByPartsObj:function(b){b&&(this._destroyAllFilters(),this.allAnySelect.value=b.logicalOperator,g.forEach(b.parts,a.hitch(this,function(a){a.parts?this._addFilterSet(a):
a.fieldObj&&(a.operator&&a.valueObj)&&this._addSingleFilter(a)})))},_addSingleFilter:function(b){b={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,part:b,OPERATORS:a.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues};b=new e(b);b.placeAt(this.allExpsBox);b.startup();this.own(m.after(b,"_destroySelf",a.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_addFilterSet:function(b){b=
{url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,partsObj:b,OPERATORS:a.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues};b=new x(b);b.placeAt(this.allExpsBox);b.startup();this.own(m.after(b,"_destroySelf",a.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_destroyAllFilters:function(){for(var a=this._getAllSingleFiltersAndFilterSets();0<a.length;)a[0].destroy(),
a.splice(0,1);this._checkFilterNumbers()},_getAllSingleFiltersAndFilterSetsDoms:function(){return s(".allExpsBox\x3e.jimu-single-filter,.allExpsBox\x3e.jimu-filter-set",this.contentSection)},_getAllSingleFiltersAndFilterSets:function(){var b=this._getAllSingleFiltersAndFilterSetsDoms();return g.map(b,a.hitch(this,function(a){return c.byNode(a)}))},_checkFilterNumbers:function(){var b=this._getAllSingleFiltersAndFilterSetsDoms();1<b.length?d.setStyle(this.matchMsg,"display","block"):d.setStyle(this.matchMsg,
"display","none");0<b.length?d.setStyle(this.noFilterTipSection,"display","none"):d.setStyle(this.noFilterTipSection,"display","block");g.forEach(b,a.hitch(this,function(a,b){d.removeClass(a,"even-filter");d.removeClass(a,"odd-filter");d.addClass(a,0===b%2?"even-filter":"odd-filter")}))},_showErrorOptions:function(a){d.setStyle(this.contentSection,"display","none");d.setStyle(this.errorSection,"display","none");this.errorTip.innerHTML=a;this.loading.hide()},_onBtnAddSetClick:function(){this._layerDefinition&&
this._validOptions&&this._addFilterSet()},_onBtnAddExpClick:function(){this._layerDefinition&&this._validOptions&&this._addSingleFilter()}})})},"jimu/dijit/_SingleFilter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/json dojo/on dojo/query dojo/Deferred dijit/form/Select dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox dojo/store/Memory esri/request".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u,e,x,v){return h([q,n,k],{templateString:f,baseClass:"jimu-single-filter",declaredClass:"jimu.dijit._SingleFilter",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],supportFieldTypes:[],part:null,OPERATORS:null,enableAskForValues:!1,postMixInProperties:function(){this.supportFieldTypes=[];this.supportFieldTypes.push(this.stringFieldType);this.supportFieldTypes.push(this.dateFieldType);this.supportFieldTypes=this.supportFieldTypes.concat(this.numberFieldTypes);
this.nls=window.jimuNls.filterBuilder},postCreate:function(){this.inherited(arguments);this._initSelf()},toJson:function(){var a=null,b=this._getSelectedFilteringItem(this.fieldsSelect);if(!b)return null;a={fieldObj:"",operator:"",valueObj:"",interactiveObj:""};if(!this.cbxAskValues.disabled&&this.cbxAskValues.checked){if(!this.promptTB.validate()){this._showValidationErrorTip(this.promptTB);return}if(!this.hintTB.validate()){this._showValidationErrorTip(this.hintTB);return}a.interactiveObj={prompt:this.promptTB.get("value"),
hint:this.hintTB.get("value")}}a.fieldObj={name:b.name,label:b.name,shortType:b.shortType,type:b.type};if("none"===this.operatorsSelect.get("value"))return null;a.operator=this.operatorsSelect.get("value");a.valueObj={isValid:!0};var c=b.shortType;if(this.valueRadio.checked)if("string"===c)if(a.operator===this.OPERATORS.stringOperatorIsBlank||a.operator===this.OPERATORS.stringOperatorIsNotBlank)a.valueObj.value=null;else if(this._isFieldCoded(b)&&a.operator===this.OPERATORS.stringOperatorIs){if(!this.stringCodedValuesFS.validate())return this._showValidationErrorTip(this.stringCodedValuesFS),
null;c=this._getSelectedFilteringItem(this.stringCodedValuesFS);a.valueObj.value=c.code}else{if(!this.stringTextBox.validate())return this._showValidationErrorTip(this.stringTextBox),null;a.valueObj.value=this.stringTextBox.get("value")}else if("number"===c)if(a.operator===this.OPERATORS.numberOperatorIsBlank||a.operator===this.OPERATORS.numberOperatorIsNotBlank)a.valueObj.value=null;else if(a.operator===this.OPERATORS.numberOperatorIsBetween||a.operator===this.OPERATORS.numberOperatorIsNotBetween){if(!this.numberTextBox1.validate())return this._showValidationErrorTip(this.numberTextBox1),
null;if(!this.numberTextBox2.validate())return this._showValidationErrorTip(this.numberTextBox2),null;a.valueObj.value1=parseFloat(this.numberTextBox1.get("value"));a.valueObj.value2=parseFloat(this.numberTextBox2.get("value"))}else if(this._isFieldCoded(b)&&a.operator===this.OPERATORS.numberOperatorIs){if(!this.numberCodedValuesFS.validate())return this._showValidationErrorTip(this.numberCodedValuesFS),null;c=this._getSelectedFilteringItem(this.numberCodedValuesFS);a.valueObj.value=parseFloat(c.code)}else{if(!this.numberTextBox.validate())return this._showValidationErrorTip(this.numberTextBox),
null;a.valueObj.value=parseFloat(this.numberTextBox.get("value"))}else{if("date"===c)if(a.operator===this.OPERATORS.dateOperatorIsBlank||a.operator===this.OPERATORS.dateOperatorIsNotBlank)a.valueObj.value=null;else if(a.operator===this.OPERATORS.dateOperatorIsBetween||a.operator===this.OPERATORS.dateOperatorIsNotBetween){if(!this.dateTextBox1.validate())return this._showValidationErrorTip(this.dateTextBox1),null;if(!this.dateTextBox2.validate())return this._showValidationErrorTip(this.dateTextBox2),
null;a.valueObj.value1=this.dateTextBox1.get("value").toDateString();a.valueObj.value2=this.dateTextBox2.get("value").toDateString()}else{if(!this.dateTextBox.validate())return this._showValidationErrorTip(this.dateTextBox),null;a.valueObj.value=this.dateTextBox.get("value").toDateString()}}else if(this.fieldRadio.checked){c=this._getSelectedFilteringItem(this.fieldsSelect2);if(!c)return this._showValidationErrorTip(this.fieldsSelect2),null;a.valueObj.value=c.name;a.valueObj.label=c.name;a.valueObj.type=
"field"}else if(this.uniqueRadio&&this.uniqueRadio.checked){b=this._getSelectedFilteringItem(this.uniqueValuesSelect);if(!b)return this._showValidationErrorTip(this.uniqueValuesSelect),null;"string"===c?a.valueObj.value=b.name:"number"===c&&(a.valueObj.value=parseFloat(b.name))}return a},showDelteIcon:function(){c.setStyle(this.btnDelete,"display","inline-block")},hideDeleteIcon:function(){c.setStyle(this.btnDelete,"display","none")},_initSelf:function(){this.enableAskForValues?c.setStyle(this.promptSection,
"display","block"):c.setStyle(this.promptSection,"display","none");this.layerInfo=b.mixin({},this.layerInfo);this._initRadios();var e=0;this.layerInfo.currentVersion&&(e=parseFloat(this.layerInfo.currentVersion));10.1>e&&c.destroy(this.uniqueTd);if((e=this.layerInfo.fields)&&0<e.length)e=a.filter(e,b.hitch(this,function(a){return 0<=this.supportFieldTypes.indexOf(a.type)})),this._enableRadios(),this._initFieldsSelect(e)},_showValidationErrorTip:function(a){!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),
a.focusNode.blur())},_focusValidationTextBox:function(a){a&&a.focusNode&&a.focusNode.focus()},_isFieldCoded:function(a){return(a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length},_getSelectedFilteringItem:function(a){if(a.validate()){var b=a.get("value");if(isNaN(b))this._showValidationErrorTip(a);else if(a=a.store.query({id:b}),0<a.length&&(a=a[0]))return a}else this._showValidationErrorTip(a);return null},_getShortTypeByFieldType:function(a){return a===this.stringFieldType?
"string":a===this.dateFieldType?"date":0<=this.numberFieldTypes.indexOf(a)?"number":null},_getOperatorsByShortType:function(a){var b=[];"string"===a?b=[this.OPERATORS.stringOperatorIs,this.OPERATORS.stringOperatorIsNot,this.OPERATORS.stringOperatorStartsWith,this.OPERATORS.stringOperatorEndsWith,this.OPERATORS.stringOperatorContains,this.OPERATORS.stringOperatorDoesNotContain,this.OPERATORS.stringOperatorIsBlank,this.OPERATORS.stringOperatorIsNotBlank]:"number"===a?b=[this.OPERATORS.numberOperatorIs,
this.OPERATORS.numberOperatorIsNot,this.OPERATORS.numberOperatorIsAtLeast,this.OPERATORS.numberOperatorIsLessThan,this.OPERATORS.numberOperatorIsAtMost,this.OPERATORS.numberOperatorIsGreaterThan,this.OPERATORS.numberOperatorIsBetween,this.OPERATORS.numberOperatorIsNotBetween,this.OPERATORS.numberOperatorIsBlank,this.OPERATORS.numberOperatorIsNotBlank]:"date"===a&&(b=[this.OPERATORS.dateOperatorIsOn,this.OPERATORS.dateOperatorIsNotOn,this.OPERATORS.dateOperatorIsBefore,this.OPERATORS.dateOperatorIsAfter,
this.OPERATORS.dateOperatorIsBetween,this.OPERATORS.dateOperatorIsNotBetween,this.OPERATORS.dateOperatorIsBlank,this.OPERATORS.dateOperatorIsNotBlank]);return b},_initFieldsSelect:function(c){c=a.map(c,b.hitch(this,function(a,c){var e=b.mixin({},a);e.id=c;e.shortType=this._getShortTypeByFieldType(a.type);e.alias||(e.alias=e.name);var d="";"string"===e.shortType?d=this.nls.string:"number"===e.shortType?d=this.nls.number:"date"===e.shortType&&(d=this.nls.date);e.displayName=e.alias+" ("+d+")";return e}));
if(0<c.length){var e=new x({data:c});this.fieldsSelect.set("store",e);this.fieldsSelect.set("value",c[0].id)}this.fieldsSelect.focusNode.focus();this.fieldsSelect.focusNode.blur();this._onFieldsSelectChange();this.part&&this._showPart(this.part)},_showPart:function(a){if((this.part=a)&&this.part.fieldObj&&this.part.operator&&this.part.valueObj){var c=this.part.operator,e=this.part.valueObj;a=this.fieldsSelect.store.query({name:this.part.fieldObj.name});if(0!==a.length&&(a=a[0]))this.fieldsSelect.set("value",
a.id),setTimeout(b.hitch(this,function(){this.domNode&&(this._onFieldsSelectChange(),this.operatorsSelect.set("value",c),setTimeout(b.hitch(this,function(){this.domNode&&this._resetByFieldAndOperation(e)}),50),setTimeout(b.hitch(this,function(){if(this.domNode){var a=this.part.interactiveObj;a&&(this.cbxAskValues.checked=!0,this._updatePrompt(),this.promptTB.set("value",a.prompt||""),this.hintTB.set("value",a.hint||""))}}),100))}),0)}},_onFieldsSelectChange:function(){this.operatorsSelect.removeOption(this.operatorsSelect.getOptions());
this.operatorsSelect.addOption({value:"none",label:this.nls.none});this.valueRadio.checked=!0;var c=this._getSelectedFilteringItem(this.fieldsSelect);c&&(this.operatorsSelect.shortType=c.shortType,c=this._getOperatorsByShortType(c.shortType),this.operatorsSelect.removeOption(this.operatorsSelect.getOptions()),a.forEach(c,b.hitch(this,function(a){this.operatorsSelect.addOption({value:a,label:this.nls[a]})})));this._onOperatorsSelectChange()},_onOperatorsSelectChange:function(){this.valueRadio.checked=
!0;this._resetByFieldAndOperation()},_onRangeNumberBlur:function(){if(this.numberTextBox1.validate()&&this.numberTextBox2.validate()){var a=parseFloat(this.numberTextBox1.get("value")),b=parseFloat(this.numberTextBox2.get("value"));a>b&&(this.numberTextBox1.set("value",b),this.numberTextBox2.set("value",a))}},_onRangeDateBlur:function(){if(this.dateTextBox1.validate()&&this.dateTextBox2.validate()){var a=this.dateTextBox1.get("value"),b=a.getTime(),c=this.dateTextBox2.get("value"),e=c.getTime();b>
e&&(this.dateTextBox1.set("value",c),this.dateTextBox2.set("value",a))}},_initRadios:function(){var a="radio_"+Math.random();this.valueRadio.name=a;this.fieldRadio.name=a;this.own(g(this.valueRadio,"click",b.hitch(this,this._resetByFieldAndOperation)));this.own(g(this.fieldRadio,"click",b.hitch(this,this._resetByFieldAndOperation)));this.uniqueRadio&&(this.uniqueRadio.name=a,this.own(g(this.uniqueRadio,"click",b.hitch(this,this._resetByFieldAndOperation))));this._resetByFieldAndOperation()},_enableRadios:function(){this.valueRadio.disabled=
!1;this.fieldRadio.disabled=!1;this.uniqueRadio&&(this.uniqueRadio.disabled=!1)},_disableRadios:function(){this.valueRadio.disabled=!0;this.fieldRadio.disabled=!0;this.uniqueRadio&&(this.uniqueRadio.disabled=!0)},_resetByFieldAndOperation:function(a){c.setStyle(this.attributeValueContainer,"display","block");this._enableRadios();var b=this._getSelectedFilteringItem(this.fieldsSelect),e=b&&b.shortType,d=this.operatorsSelect.get("value");if(b)if("string"===e)switch(d){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:this.valueRadio.checked=
!0,this._disableRadios()}else if("number"===e)switch(d){case this.OPERATORS.numberOperatorIsBetween:case this.OPERATORS.numberOperatorIsNotBetween:this.valueRadio.checked=!0,this._disableRadios()}else if("date"===e){switch(d){case this.OPERATORS.dateOperatorIsBetween:case this.OPERATORS.dateOperatorIsNotBetween:this.valueRadio.checked=!0,this._disableRadios()}this.uniqueRadio&&(this.uniqueRadio.disabled=!0,this.uniqueRadio.checked&&(this.valueRadio.checked=!0))}this._updateUIOfAttrValueContainer(b,
d,a)},_updateUIOfAttrValueContainer:function(e,d,g){this._updatePrompt();var f=e&&e.shortType;if("string"===f||"number"===f||"date"===f)if(c.setStyle(this.attributeValueContainer,"display","block"),g&&"field"===g.type&&(this.fieldRadio.disabled=!1,this.fieldRadio.checked=!0),this.valueRadio.checked)if(c.setStyle(this.fieldsSelect2.domNode,"display","none"),c.setStyle(this.uniqueValuesSelect.domNode,"display","none"),this._showAllValueBoxContainer(),this._resetValueTextBox(),"string"===f)c.setStyle(this.stringTextBoxContainer,
"display","block"),c.setStyle(this.numberTextBoxContainer,"display","none"),c.setStyle(this.dateTextBoxContainer,"display","none"),this._isFieldCoded(e)&&d===this.OPERATORS.stringOperatorIs?(c.setStyle(this.stringCodedValuesFS.domNode,"display","inline-block"),c.setStyle(this.stringTextBox.domNode,"display","none"),e=a.map(e.domain.codedValues,b.hitch(this,function(a,c){var e=b.mixin({},a);e.id=c;return e})),f=new x({data:e}),this.stringCodedValuesFS.set("store",f),g?(f=a.filter(e,b.hitch(this,function(a){return a.code===
g.value})),0<f.length?this.stringCodedValuesFS.set("value",f[0].id):this.stringCodedValuesFS.set("value",e[0].id)):this.stringCodedValuesFS.set("value",e[0].id)):(c.setStyle(this.stringTextBox.domNode,"display","inline-block"),c.setStyle(this.stringCodedValuesFS.domNode,"display","none"),g&&this.stringTextBox.set("value",g.value||"")),(d===this.OPERATORS.stringOperatorIsBlank||d===this.OPERATORS.stringOperatorIsNotBlank)&&c.setStyle(this.attributeValueContainer,"display","none");else if("number"===
f){c.setStyle(this.stringTextBoxContainer,"display","none");c.setStyle(this.numberTextBoxContainer,"display","block");c.setStyle(this.dateTextBoxContainer,"display","none");if(d===this.OPERATORS.numberOperatorIsBetween||d===this.OPERATORS.numberOperatorIsNotBetween){if(c.setStyle(this.numberTextBox.domNode,"display","none"),c.setStyle(this.numberRangeTable,"display","table"),c.setStyle(this.numberCodedValuesFS.domNode,"display","none"),g&&!isNaN(g.value1)&&!isNaN(g.value2)){var f=parseFloat(g.value1),
l=parseFloat(g.value2);e=Math.min(f,l);f=Math.max(f,l);this.numberTextBox1.set("value",e);this.numberTextBox2.set("value",f)}}else if(c.setStyle(this.numberRangeTable,"display","none"),this._isFieldCoded(e)&&d===this.OPERATORS.numberOperatorIs)if(c.setStyle(this.numberTextBox.domNode,"display","none"),c.setStyle(this.numberCodedValuesFS.domNode,"display","inline-block"),e=a.map(e.domain.codedValues,b.hitch(this,function(a,c){var e=b.mixin({},a);e.id=c;return e})),f=new x({data:e}),this.numberCodedValuesFS.set("store",
f),g&&!isNaN(g.value)){var m=parseFloat(g.value),f=a.filter(e,b.hitch(this,function(a){return parseFloat(a.code)===m}));0<f.length?this.numberCodedValuesFS.set("value",f[0].id):this.numberCodedValuesFS.set("value",e[0].id)}else this.numberCodedValuesFS.set("value",e[0].id);else c.setStyle(this.numberTextBox.domNode,"display","inline-block"),c.setStyle(this.numberCodedValuesFS.domNode,"display","none"),g&&(isNaN(g.value)||this.numberTextBox.set("value",parseFloat(g.value)));(d===this.OPERATORS.numberOperatorIsBlank||
d===this.OPERATORS.numberOperatorIsNotBlank)&&c.setStyle(this.attributeValueContainer,"display","none")}else"date"===f&&(c.setStyle(this.stringTextBoxContainer,"display","none"),c.setStyle(this.numberTextBoxContainer,"display","none"),c.setStyle(this.dateTextBoxContainer,"display","block"),d===this.OPERATORS.dateOperatorIsBetween||d===this.OPERATORS.dateOperatorIsNotBetween?(c.setStyle(this.dateTextBox.domNode,"display","none"),c.setStyle(this.dateRangeTable,"display","table"),g&&(g.value1&&g.value2)&&
(this.dateTextBox1.set("value",new Date(g.value1)),this.dateTextBox2.set("value",new Date(g.value2)))):(c.setStyle(this.dateTextBox.domNode,"display","inline-block"),c.setStyle(this.dateRangeTable,"display","none"),g&&g.value&&this.dateTextBox.set("value",new Date(g.value))),(d===this.OPERATORS.dateOperatorIsBlank||d===this.OPERATORS.dateOperatorIsNotBlank)&&c.setStyle(this.attributeValueContainer,"display","none"));else this.fieldRadio.checked?(this._hideAllValueBoxContainer(),c.setStyle(this.uniqueValuesSelect.domNode,
"display","none"),c.setStyle(this.fieldsSelect2.domNode,"display","inline-block"),this._resetFieldsSelect2(),g&&g.value&&(d=this.fieldsSelect2.store.query({name:g.value}),0<d.length&&(d=d[0])&&this.fieldsSelect2.set("value",d.id))):this.uniqueRadio&&this.uniqueRadio.checked&&(this._hideAllValueBoxContainer(),c.setStyle(this.fieldsSelect2.domNode,"display","none"),c.setStyle(this.uniqueValuesSelect.domNode,"display","inline-block"),this._resetUniqueValuesSelect());else c.setStyle(this.attributeValueContainer,
"display","none")},_showAllValueBoxContainer:function(){c.setStyle(this.allValueBoxContainer,"display","block")},_hideAllValueBoxContainer:function(){c.setStyle(this.allValueBoxContainer,"display","none")},_resetValueTextBox:function(){this.stringTextBox.set("value","");this.numberTextBox.set("value","");this.dateTextBox.set("value",new Date)},_resetFieldsSelect2:function(){this.fieldsSelect2.set("displayedValue","");var c=new x({data:[]});this.fieldsSelect2.set("store",c);if(this.fieldsSelect.validate()){var e=
this._getSelectedFilteringItem(this.fieldsSelect);if(e){var c=this.fieldsSelect.store.query({shortType:e.shortType}),d=a.filter(c,b.hitch(this,function(a){return a.id!==e.id})),c=new x({data:d});this.fieldsSelect2.set("store",c);0<d.length&&this.fieldsSelect2.set("value",d[0].id)}}},_resetUniqueValuesSelect:function(){this.uniqueValuesSelect.set("displayedValue","");var c=new x({data:[]});this.uniqueValuesSelect.set("store",c);if(this.layerInfo&&10.1<=parseFloat(this.layerInfo.currentVersion)){var e=
this._getSelectedFilteringItem(this.fieldsSelect);if(e){var g=this.url+"/generateRenderer",f=d.stringify({type:"uniqueValueDef",uniqueValueFields:[e.name]});v({url:g,content:{classificationDef:f,f:"json"},handleAs:"json",callbackParamName:"callback",timeout:15E3}).then(b.hitch(this,function(d){var g=d&&d.uniqueValueInfos,f=this._getSelectedFilteringItem(this.fieldsSelect);g&&e.id===f.id&&(d=new x({data:[]}),this.uniqueValuesSelect.set("store",c),g=a.map(g,b.hitch(this,function(a,b){var c=a.value;
"number"===f.shortType&&(c=parseFloat(c));return{id:b,name:c}})),d=new x({data:g}),this.uniqueValuesSelect.set("store",d),0<g.length&&this.uniqueValuesSelect.set("value",g[0].id))}),b.hitch(this,function(a){console.error(a)}))}}},_onCbxAskValuesClicked:function(){this._updatePrompt()},_updatePrompt:function(){this.promptTB.set("value","");this.hintTB.set("value","");this.cbxAskValues.disabled=!1;c.setStyle(this.promptTable,"display","table");var a=this.operatorsSelect.get("value"),b=this.nls[a];this.fieldRadio.checked&&
(this.cbxAskValues.disabled=!0);a===this.OPERATORS.stringOperatorIsBlank&&(this.cbxAskValues.disabled=!0);a===this.OPERATORS.stringOperatorIsNotBlank&&(this.cbxAskValues.disabled=!0);a===this.OPERATORS.numberOperatorIsBlank&&(this.cbxAskValues.disabled=!0);a===this.OPERATORS.numberOperatorIsNotBlank&&(this.cbxAskValues.disabled=!0);a===this.OPERATORS.dateOperatorIsBlank&&(this.cbxAskValues.disabled=!0);a===this.OPERATORS.dateOperatorIsNotBlank&&(this.cbxAskValues.disabled=!0);this.cbxAskValues.disabled&&
(this.cbxAskValues.checked=!1);if(!this.cbxAskValues.disabled&&this.cbxAskValues.checked){c.setStyle(this.promptTable,"display","table");var e=this._getSelectedFilteringItem(this.fieldsSelect);e&&"none"!==a&&this.promptTB.set("value",(e.alias||e.name)+" "+b)}else c.setStyle(this.promptTable,"display","none")},_destroySelf:function(){this.destroy()}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(h,
q,n,k,f){return h("dijit.form.FilteringSelect",[k,f],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(b,c,a,d){c&&c[this.searchAttr]!==this._lastQuery||!c&&b.length&&this.store.getIdentity(b[0])!=this._lastQuery||(b.length?this.set("item",b[0],d):this.set("value","",d||void 0===d&&!this.focused,
this.textbox.value,null))},_openResultList:function(b,c,a){c[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(b,c,a,d){this._onChangeActive||(c=null);if(void 0===d){if(null===b||""===b)if(b="",!q.isString(a)){this._setDisplayedValueAttr(a||"",c);return}var g=this;this._lastQuery=b;n(this.store.get(b),function(a){g._callbackSetLabel(a?
[a]:[],void 0,void 0,c)})}else this.valueNode.value=b,this.inherited(arguments,[b,c,a,d])},_setItemAttr:function(b,c,a){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(b){return b.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(b,c){null==b&&(b="");if(!this._created){if(!("displayedValue"in this.params))return;c=!1}if(this.store){this.closeDropDown();var a=q.clone(this.query),d=this._getDisplayQueryString(b),g;this.store._oldAPI?
g=d:(g=this._patternToRegExp(d),g.toString=function(){return d});this._lastQuery=a[this.searchAttr]=g;this._lastDisplayedValue=this.textbox.value=b;this._set("displayedValue",b);var f=this,m={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};q.mixin(m,this.fetchProperties);this._fetchHandle=this.store.query(a,m);n(this._fetchHandle,function(b){f._fetchHandle=null;f._callbackSetLabel(b||[],a,m,c)},function(a){f._fetchHandle=null;f._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},
undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(h,q,n){return h("dijit.form.DateTextBox",n,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:q,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u,e){var x=k("dijit.Calendar",[s,l,w],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(b){a.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",b)},_createMonthWidget:function(){return new x._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:g.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(p(this.domNode,"keydown",g.hitch(this,"_onKeyDown")),p(this.dateRowsNode,"mouseover",g.hitch(this,"_onDayMouseOver")),p(this.dateRowsNode,"mouseout",g.hitch(this,"_onDayMouseOut")),p(this.dateRowsNode,"mousedown",g.hitch(this,"_onDayMouseDown")),p(this.dateRowsNode,"mouseup",g.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=b.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))b.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){this._currentNode&&
!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)&&(a="dijitCalendarHoveredDate",b.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),b.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate"))b.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&b.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,c,e=this.currentFocus;switch(a.keyCode){case d.RIGHT_ARROW:b=1;case d.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case d.DOWN_ARROW:b=1;case d.UP_ARROW:c="week";break;case d.PAGE_DOWN:b=1;case d.PAGE_UP:c=a.ctrlKey||a.altKey?"year":"month";break;case d.END:e=this.dateModule.add(e,"month",1),c="day";case d.HOME:e=new this.dateClassObj(e);e.setDate(1);break;default:return!0}c&&(e=this.dateModule.add(e,c,b));this._setCurrentFocusAttr(e);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});x._MonthDropDownButton=k("dijit.Calendar._MonthDropDownButton",e,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new x._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==m("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});x._MonthDropDown=k("dijit.Calendar._MonthDropDown",[l,u,w],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'onclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML="";h.forEach(a,
function(a,b){c.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(f.get(a.target,"month"))},onChange:function(){}});return x})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w){var u=q("dijit.CalendarLite",[s,l],{templateString:w,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);
b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,c){"string"==typeof a&&(a=b.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(c||"undefined"==typeof c))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),
a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),c=this.dateModule.getDaysInMonth(a),d=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),g=new this.dateClassObj,f=n.getFirstDayOfWeek(this.lang);f>b&&(f-=7);if(!this.summary){var l=this.dateLocaleModule.getNames("months",
"wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",l[a.getMonth()])}this._date2cell={};h.forEach(this.dateCells,function(l,m){var h=m+f,p=new this.dateClassObj(a),k="dijitCalendar",n=0;h<b?(h=d-b+h+1,n=-1,k+="Previous"):h>=b+c?(h=h-b-c+1,n=1,k+="Next"):(h=h-b+1,k+="Current");n&&(p=this.dateModule.add(p,"month",n));p.setDate(h);this.dateModule.compare(p,g,"date")||(k="dijitCalendarCurrentDate "+k);this.isDisabledDate(p,this.lang)?(k="dijitCalendarDisabledDate "+k,l.setAttribute("aria-disabled",
"true")):(k="dijitCalendarEnabledDate "+k,l.removeAttribute("aria-disabled"),l.setAttribute("aria-selected","false"));(n=this.getClassForDate(p,this.lang))&&(k=n+" "+k);l.className=k+"Month dijitCalendarDateTemplate";k=p.valueOf();0==m&&console.log("setting date2cell["+k+"]");this._date2cell[k]=l;l.dijitDateValue=k;this._setText(this.dateLabels[m],p.getDateLocalized?p.getDateLocalized(this.lang):p.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);
this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;h.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?d.getObject(a.datePackage,!1):k;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?d.getObject(a.datePackage+
".locale",!1):f},_createMonthWidget:function(){return u._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),d=n.getFirstDayOfWeek(this.lang);this.dayCellsHtml=m.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[d++%7]});a=m.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=
[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);c.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=d.hitch(this,function(a,b,c){return g(this[a],"click",d.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))}))});this.own(a("incrementMonth",
"month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c);a=this._patchDate(a);this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(c,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();d&&d!=c&&(p("webkit")?
d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(b){b.stopPropagation();b.preventDefault();for(b=b.target;b&&!b.dijitDateValue;b=b.parentNode);b&&!a.contains(b,"dijitCalendarDisabledDate")&&this.set("value",b.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(b){function c(b,d){a.toggle(d,"dijitCalendarSelectedDate",
b);d.setAttribute("aria-selected",b?"true":"false")}h.forEach(this._selectedCells||[],d.partial(c,!1));this._selectedCells=h.filter(h.map(b,this._getNodeByDate,this),function(a){return a});h.forEach(this._selectedCells,d.partial(c,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});u._MonthWidget=q("dijit.CalendarLite._MonthWidget",s,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),c=6==p("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+
h.map(b,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=c+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});return u})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(h,q,n,k,f,b,c,a){new Date("X");return k("dijit.form._DateTimeTextBox",
[b,c],{templateString:a,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:q.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(a,b){var c=this._isInvalidDate(a),f=this._isInvalidDate(b);if(c||f)return c&&f?0:!c?1:-1;var c=this.format(a,this._unboundedConstraints),f=this.format(b,this._unboundedConstraints),k=this.parse(c,this._unboundedConstraints),l=this.parse(f,this._unboundedConstraints);
return c==f?0:h.compare(k,l,this._selector)},autoWidth:!0,format:function(a,b){return!a?"":this.dateLocaleModule.format(a,b)},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:void 0)},serialize:function(a,b){a.toGregorian&&(a=a.toGregorian());return n.toISOString(a,b)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){this.dateModule=a.datePackage?f.getObject(a.datePackage,!1):h;this.dateClassObj=
this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?f.getObject(a.datePackage+".locale",!1):q;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=this._selector;a.fullYear=!0;var b=
n.fromISOString;"string"==typeof a.min&&(a.min=b(a.min));"string"==typeof a.max&&(a.max=b(a.max));this.inherited(arguments);this._unboundedConstraints=f.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,b,c){void 0!==a&&("string"==typeof a&&(a=n.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a)));
this.inherited(arguments);this.value instanceof Date&&(this.filterString="");this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,b){var c=this._get("value");"value"==a&&c instanceof Date&&0==this.compare(b,c)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var b=f.isString(this.popupClass)?f.getObject(this.popupClass,
!1):this.popupClass,c=this,h=this.get("value");this.dropDown=new b({onChange:function(a){c.set("value",a,!0)},id:this.id+"_popup",dir:c.dir,lang:c.lang,value:h,textDir:c.textDir,currentFocus:!this._isInvalidDate(h)?h:this.dropDownDefaultValue,constraints:c.constraints,filterString:c.filterString,datePackage:c.params.datePackage,isDisabledDate:function(a){return!c.rangeCheck(a,c.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,
b){this._setValueAttr(this.parse(a,this.constraints),b,a)}})})},"jimu/dijit/_FilterSet":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_FilterSet.html dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/aspect dojo/query ./_SingleFilter".split(" "),function(h,q,n,k,f,b,c,a,d,g,p,m,s){return h([q,n,k],{templateString:f,baseClass:"jimu-filter-set",nls:null,url:null,layerInfo:null,stringFieldType:"",
dateFieldType:"",numberFieldTypes:[],partsObj:null,OPERATORS:null,enableAskForValues:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsgSet.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelf()},toJson:function(){var a=m(".jimu-single-filter",this.allExpsBox),a=d.map(a,c.hitch(this,function(a){return b.byNode(a).toJson()}));
return d.every(a,c.hitch(this,function(a){return a}))&&0<a.length?{logicalOperator:this.allAnySelect.value,parts:a}:null},showDelteIcon:function(){a.setStyle(this.btnDelete,"display","block")},hideDeleteIcon:function(){a.setStyle(this.btnDelete,"display","none")},_initSelf:function(){this.own(g(this.btnAdd,"click",c.hitch(this,this._addSingleFilter)));if(this.partsObj){this.allAnySelect.value=this.partsObj.logicalOperator;var a=this.partsObj.parts||[];0===a.length?(this._addSingleFilter(),this._addSingleFilter()):
1===a.length?(this._addSingleFilter(a[0]),this._addSingleFilter()):d.forEach(a,c.hitch(this,function(a){this._addSingleFilter(a)}))}else this._addSingleFilter(),this._addSingleFilter()},_addSingleFilter:function(a){a=new s({url:this.url,layerInfo:this.layerInfo,stringFieldType:this.stringFieldType,dateFieldType:this.dateFieldType,numberFieldTypes:this.numberFieldTypes,part:a,OPERATORS:this.OPERATORS,enableAskForValues:this.enableAskForValues,style:{margin:"15px auto 0 auto",border:0,background:"inherit"}});
a.placeAt(this.allExpsBox);a.startup();this.own(p.after(a,"_destroySelf",c.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_checkFilterNumbers:function(){var a=m(".jimu-single-filter",this.allExpsBox),f=2<a.length;d.forEach(a,c.hitch(this,function(a){a=b.byNode(a);f?a.showDelteIcon():a.hideDeleteIcon()}))},_destroySelf:function(){this.destroy()}})})},"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/on dijit/TooltipDialog dijit/popup jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),
function(h,q,n,k,f,b,c,a,d,g,p){return h([q,n,k],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:"\x3cdiv\x3e\x3c/div\x3e",symbol:null,type:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);var a=this.symbolChooser.getSymbol();a&&this._drawSymbol(a)},destroy:function(){this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(h){var k=b.create("div"),
l=new a({content:k});this.symbolChooser=new g({symbol:this.symbol,type:this.type});this.symbolChooser.placeAt(k);this.symbolChooser.startup();this.own(c(this.symbolChooser,"change",f.hitch(this,function(a){this._drawSymbol(a);this.emit("change",a)})));this.own(c(h,"click",f.hitch(this,function(a){a.stopPropagation();a.preventDefault();d.open({parent:this.getParent(),popup:l,around:h})})));this.own(c(window,"click",f.hitch(this,function(a){a=a.target||a.srcElement;var c=l.domNode;a===c||b.isDescendant(a,
c)||d.close(l)})));return l},reset:function(){this.symbol=this.type=null;b.empty(this.domNode);this.symbolChooser.reset()},showBySymbol:function(a){this.reset();a&&(this._drawSymbol(a),this.symbolChooser.showBySymbol(a))},showByType:function(a){this.reset();this.symbolChooser.showByType(a);(a=this.symbolChooser.getSymbol())&&this._drawSymbol(a)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(a){b.empty(this.domNode);a&&(a=p.createSymbolNode(a))&&b.place(a,this.domNode)}})})},
"widgets/Query/setting/PopupConfig":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./PopupConfig.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query jimu/dijit/SimpleTable dijit/form/TextBox dijit/TooltipDialog dijit/Menu dijit/MenuItem dijit/popup".split(" "),function(h,q,n,k,f,b,c,a,d,g,p,m,s,l,w,u){return h([q,n,k],{baseClass:"query-setting-popup-config",templateString:f,nls:null,sqs:null,config:null,postCreate:function(){this.inherited(arguments);
this._initFieldsTable();this._initAddFields();this.clear();this.config&&this.setConfig(this.config)},setConfig:function(a){this.clear();this.config=b.mixin({},a);this.config.title&&"string"===typeof this.config.title?this.titleTextBox.set("value",this.config.title||""):this.titleTextBox.set("value","");this.config.fields&&0<this.config.fields.length&&this._setFields(this.config.fields)},getConfig:function(){var c={title:"",fields:[]};if(!this.titleTextBox.validate())return this.sqs.showResultsSetting(),
this.sqs.scrollToDom(this.titleTextBox.domNode),this.sqs.showValidationErrorTip(this.titleTextBox),null;c.title=this.titleTextBox.get("value");var d=this.fieldsTable.getRows(),f=[];a.forEach(d,b.hitch(this,function(a){var b=this.fieldsTable.getRowData(a);b.visibility?f.push({name:b.name,alias:b.alias,type:a.fieldType,specialType:b.specialType,showInInfoWindow:!0}):0<=c.title.indexOf("${"+b.name+"}")&&f.push({name:b.name,alias:b.alias,type:a.fieldType,specialType:b.specialType,showInInfoWindow:!1})}));
c.fields=f;return c},clear:function(){this.fields=null;this.titleTextBox.set("value","");this.fieldsTable.clear();this._resetMenu();this._addEmptyMenuItem()},destroy:function(){this.sqs=null;this.titleTextBox.focusNode.blur();this.inherited(arguments)},_initFieldsTable:function(){var a={autoHeight:!1,style:"height:200px",fields:[{name:"visibility",title:this.nls.visibility,type:"checkbox"},{name:"name",title:this.nls.name,type:"text",editable:!1},{name:"alias",title:this.nls.alias,type:"text",editable:!0},
{name:"specialType",title:this.nls.specialType,type:"extension",create:b.hitch(this,this._createSpecialType),setValue:b.hitch(this,this._setValue4SpecialType),getValue:b.hitch(this,this._getValueOfSpecialType)},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down"]}]};this.fieldsTable=new p(a);this.fieldsTable.placeAt(this.fieldsContainer);this.fieldsTable.startup()},_createSpecialType:function(a){a=c.create("select",{},a);c.create("option",{value:"none",label:this.nls.none,selected:!0},
a);c.create("option",{value:"link",label:this.nls.link},a);c.create("option",{value:"image",label:this.nls.image},a)},_setValue4SpecialType:function(a,b){g("select",a)[0].value=b},_getValueOfSpecialType:function(a){return g("select",a)[0].value},_initAddFields:function(){var a=c.create("div");this.tooltipDialog=new s({style:"cursor:pointer",content:a});this.menu=new l;this.menu.placeAt(a);this.own(d(window,"click",b.hitch(this,function(){u.close(this.tooltipDialog)})))},_onAddClicked:function(a){a.stopPropagation();
a.preventDefault();u.close(this.tooltipDialog);u.open({popup:this.tooltipDialog,around:this.btnAddFields})},_resetMenu:function(){var c=this.menu.getChildren();a.forEach(c,b.hitch(this,function(a){this.menu.removeChild(a)}))},_addEmptyMenuItem:function(){var a=new w({label:this.nls.noField,onClick:b.hitch(this,function(){var a=this.menu.getParent();c.setStyle(a.domNode.parentNode,"display","none")})});this.menu.addChild(a)},_setFields:function(c){this._resetMenu();this.fields=a.filter(c,function(a){return"esriFieldTypeGeometry"!==
a.type});0<this.fields.length?a.forEach(this.fields,b.hitch(this,function(a){this._addMenuItem(a);this._addRow(a)})):this._addEmptyMenuItem()},_addMenuItem:function(a){var d=new w({label:a.name+" {"+a.name+"}",onClick:b.hitch(this,function(){var b=this.titleTextBox.get("value")+"${"+a.name+"}";this.titleTextBox.set("value",b);b=this.menu.getParent();c.setStyle(b.domNode.parentNode,"display","none")})});this.menu.addChild(d)},_addRow:function(a){var b=this.fieldsTable.addRow({visibility:a.visible,
name:a.name,alias:a.alias||a.name,specialType:a.specialType||"none"});b.success&&(b.tr.fieldType=a.type)}})})},"widgets/Query/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"mapRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" checked /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" style\x3d"margin-left: 30px;" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"urlRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" style\x3d"margin-left:30px;" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container flc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container hflc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container flsc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layers" data-dojo-attach-point\x3d"layersSection"\x3e\r\n\t\t\x3cdiv class\x3d"service-name" data-dojo-attach-point\x3d"serviceName"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"errorSection" class\x3d"error-section"\x3e\r\n\t\t\t\x3cspan class\x3d"error-icon"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"errorTip" class\x3d"error-tip"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3ctable class\x3d"layers-table" cellspacing\x3d"10" data-dojo-attach-point\x3d"layersTable" data-dojo-attach-event\x3d"onclick:_onLayersTableClicked"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"40px"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody data-dojo-attach-point\x3d"layersTbody"\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"layersShelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemSelector.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\t\t\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes}\'style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" style\x3d"position:absolute;width:100%;top:50px;" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.groups}:\x3c/span\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" type\x3d"radio" name\x3d"publicSearchRaido" style\x3d"margin-right:10px;" /\x3e\r\n\t\t\t\t\t\x3cspan style\x3d"margin-right:28px;" data-dojo-attach-point\x3d"portalServer"\x3ePortal\x3c/span\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" type\x3d"radio" name\x3d"publicSearchRaido" style\x3d"margin-right:10px;" /\x3e\r\n\t\t\t\t\t\x3cspan\x3eArcGIS.com\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\t\x3c!-- \x3cdiv class\x3d"jimu-btn" data-dojo-attach-point\x3d"btnSignIn" style\x3d"margin-top:20px;padding:16px;" \x3e${nls.signIn}\x3c/div\x3e --\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px;" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"100px;"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SingleQuerySetting.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"generalTable" class\x3d"general" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"first-td"\x3e${nls.querySource}\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;border-collapse:collapse;"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:120px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-event\x3d"onclick:_onBtnSetSourceClicked" class\x3d"jimu-btn" style\x3d"padding:7px 12px;float:right;"\x3e${nls.setSource}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"first-td"\x3e${nls.queryName}\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"queryNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;" data-dojo-attach-event\x3d"change:_onQueryNameChanged"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"detailSection" class\x3d"detail"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"definitionTabNode"\x3e\r\n\t\t\t\x3cdiv style\x3d"position:relative;width:100%;height:100%;"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"filter" data-dojo-type\x3d"jimu/dijit/Filter" data-dojo-props\x3d"enableAskForValues:true, noFilterTip:\'${nls.noFilterTip}\'" style\x3d"width:100%;margin-top:22px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"resultsTabNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"popupContainer" style\x3d"width:90%;"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"symbol-section" style\x3d"margin-top:18px;"\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-bottom:11px;"\x3e${nls.setLayerSymbolTip}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"layerSymbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/Filter.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentSection" class\x3d"content-section"\x3e\r\n\t\t\x3cdiv class\x3d"add-btn-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddExp" data-dojo-attach-event\x3d"click:_onBtnAddExpClick" class\x3d"add-with-icon" style\x3d"margin-right:20px;"\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-icon"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addAnotherExpression}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddSet" data-dojo-attach-event\x3d"click:_onBtnAddSetClick" class\x3d"add-with-icon"\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-icon"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addSet}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\t\t\t\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"matchMsg" style\x3d"margin-top:11px;margin-bottom:11px;display:none;"\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"allExpsBox" data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"errorSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cspan class\x3d"error-icon"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"errorTip" class\x3d"error-tip"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"noFilterTipSection" class\x3d"no-filter-tip" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_SingleFilter.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"setting-table" cellpadding\x3d"0" cellspacing\x3d"0" cellpadding\x3d"10px"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"fields-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-event\x3d"change:_onFieldsSelectChange"  data-dojo-props\x3d\'searchAttr:"displayName",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"width:100%;height:25px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"operators-td" nowrap\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"operatorsSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"change:_onOperatorsSelectChange" style\x3d"width:100%;height:25px;" class\x3d"dijit-form-Select"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.none}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"value-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"attributeValueContainer" class\x3d"value-container"\x3e\r\n\t\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"allValueBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringTextBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"stringTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;height:25px;" class\x3d"dijit-form-ValidationTextBox" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;height:25px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;height:25px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"dateTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-props\x3d\'value:new Date(),required:true,trim:true,constraints:{datePattern: "yyyy-MM-dd"}\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true,constraints:{datePattern: "yyyy-MM-dd"}\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true,constraints:{datePattern: "yyyy-MM-dd"}\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;height:25px;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect2" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;height:25px;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"uniqueValuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect"  data-dojo-props\x3d\'searchAttr:"name"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;height:25px;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-table-container"\x3e\r\n\t\t\t\t\t\t\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"valueRadio" checked\x3d"true" disabled  title\x3d"${nls.valueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel title\x3d"${nls.valueTooltip}"\x3e${nls.value}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"fieldRadio" disabled title\x3d"${nls.fieldTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel title\x3d"${nls.fieldTooltip}"\x3e${nls.field}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"uniqueTd"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"uniqueRadio" disabled title\x3d"${nls.uniqueValueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel title\x3d"${nls.uniqueValueTooltip}"\x3e${nls.unique}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\t\t\t\t\t\t\r\n\t\t\t\t\t\x3c/div\x3e\t\t\t\t\t\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"delete-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"delete" data-dojo-attach-point\x3d"btnDelete" data-dojo-attach-event\x3d"click:_destroySelf"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"promptSection" class\x3d"prompt"\x3e\r\n\t\t\x3cdiv class\x3d"askvalues"\x3e\r\n\t\t\t\x3cinput class\x3d"askvalues-checkbox" data-dojo-attach-point\x3d"cbxAskValues" type\x3d"checkbox" data-dojo-attach-event\x3d"onchange:_onCbxAskValuesClicked" /\x3e\r\n\t\t\t\x3clabel\x3e${nls.askForValues}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"promptTable" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"prompt-table"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.prompt}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"promptTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;height:25px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.hint}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"hintTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;height:25px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3c!-- \x3cdiv data-dojo-attach-point\x3d"caseSensitiveSection"\x3e\r\n\t\t\x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"ignoreCaseCbx" /\x3e\r\n\t\x3c/div\x3e --\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"dijitCalendarContainer" role\x3d"grid" aria-labelledby\x3d"${id}_mddb ${id}_year" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\x3cthead\x3e\r\n\t\t\x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' data-dojo-attach-point\x3d"decrementMonth" scope\x3d"col"\x3e\r\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset\' colspan\x3d"5" scope\x3d"col"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' scope\x3d"col" data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\x3c/tr\x3e\r\n\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t${!dayCellsHtml}\r\n\t\t\x3c/tr\x3e\r\n\t\x3c/thead\x3e\r\n\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t${!dateRowsHtml}\r\n\t\x3c/tbody\x3e\r\n\t\x3ctfoot class\x3d"dijitReset dijitCalendarYearContainer"\x3e\r\n\t\t\x3ctr\x3e\r\n\t\t\t\x3ctd class\x3d\'dijitReset\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/td\x3e\r\n\t\t\x3c/tr\x3e\r\n\t\x3c/tfoot\x3e\r\n\x3c/table\x3e\r\n',
"url:jimu/dijit/templates/_FilterSet.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"header-table" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnDelete" data-dojo-attach-event\x3d"onclick:_destroySelf" class\x3d"delete"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:14px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAdd" class\x3d"add"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/PopupConfig.html":'\x3cdiv\x3e\r\n\t\x3cdiv style\x3d"margin-top:22px;margin-bottom:16px;font-size:12px;"\x3e${nls.resultSettingTip}\x3c/div\x3e\r\n\t\x3cdiv style\x3d"margin-bottom:5px;"\x3e${nls.resultItemTitle}:\x3c/div\x3e\t\r\n\t\x3ctable style\x3d"width:100%;"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\t\t\t\t\r\n\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"titleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:430px;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"padding-left:30px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddFields" class\x3d"add-with-icon enable" data-dojo-attach-event\x3d"onclick:_onAddClicked"\x3e\r\n\t\t\t\t\t\t\x3cspan class\x3d"add-icon"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addField}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv style\x3d"margin-top:16px;"\x3e${nls.resultItemContent}:\x3c/div\x3e\r\n\t\x3cdiv style\x3d"margin-top:7px;margin-bottom:8px;font-size:12px;"\x3e${nls.fieldsSetTip}\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"fieldsContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/Setting.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"query-list"\x3e\r\n\t\t\x3cdiv class\x3d"query-list-head" style\x3d"overflow:hidden;"\x3e\r\n\t\t\t\x3cdiv style\x3d"float:left;"\x3e${nls.queries}\x3c/div\x3e\r\n\t\t\t\x3cdiv style\x3d"float:right;"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"add-with-icon enable" data-dojo-attach-event\x3d"onclick:_onAddNewClicked"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"add-icon"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addNew}\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"query-list-content"\x3e\r\n\t\t\t\x3cdiv class\x3d"query-list-table" data-dojo-type\x3d"jimu/dijit/SimpleTable" data-dojo-attach-point\x3d"queryList" data-dojo-attach-event\x3d"row-delete:_onQueryItemRemoved,row-select:_onQueryItemSelected" data-dojo-props\x3d\'autoHeight:false,selectable:true,fields:[{name:"name",title:"${nls.name}",width:"auto",type:"text",editable:false},{name:"actions",title:"",width:"30px",type:"actions",actions:["delete"]}]\' style\x3d"height:100%;"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"single-query-container" data-dojo-attach-point\x3d"singleQueryContainer"\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/css/style.css":".jimu-widget-query-setting{margin:0; padding:0; font-size:15px; position: relative; width: 100%; height: 100%;}.jimu-widget-query-setting .query-list{position: absolute; top: 0; left: 0; width: 235px; height: 100%;}.jimu-widget-query-setting .query-list-content{position: absolute; width: 100%; top: 50px; bottom: 5px;}.jimu-widget-query-setting .single-query-container{position: absolute; left: 265px; right: 0; height: 100%; overflow-y: auto;}.jimu-widget-single-query-setting{width: 100%;}.jimu-widget-single-query-setting table.general{width: 100%; border-collapse: collapse;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3etd{height: 40px;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3e.first-td{width: 100px;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3e.second-td{width: auto;}.jimu-widget-single-query-setting .detail{width: 100%; margin-top: 15px;}.jimu-widget-single-query-setting .detail .jimu-tab3\x3e.container-node\x3e.view{overflow: auto;}.jimu-widget-single-query-setting .tab-item-div{height: 30px; line-height: 30px;}",
"*now":function(h){h(['dojo/i18n!*preload*widgets/Query/setting/nls/Setting*["ar","cs","da","de","en","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/TabContainer jimu/dijit/SimpleTable jimu/dijit/_FeaturelayerSourcePopup ./SingleQuerySetting esri/request".split(" "),function(h,q,n,k,f,b,c,a,d,g,p,m,s){return h([a,c],{baseClass:"jimu-widget-query-setting",currentSQS:null,postCreate:function(){this.inherited(arguments);this.config&&this.setConfig(this.config)},setConfig:function(a){this.currentSQS&&
this.currentSQS.destroy();this.currentSQS=null;this.queryList.clear();(a=(this.config=a)&&this.config.queries)&&0<=a.length&&n.forEach(a,q.hitch(this,function(a,b){var c=this.queryList.addRow({name:a.name||""}).tr;c.singleConfig=q.clone(a);0===b&&this.queryList.selectRow(c)}))},getConfig:function(){if(this.currentSQS){var a=this.currentSQS.getConfig();if(a)this.currentSQS.tr.singleConfig=q.clone(a);else return!1}for(var a={queries:[]},b=this.queryList.getRows(),c=0;c<b.length;c++)a.queries.push(q.clone(b[c].singleConfig));
this.config=q.clone(a);return a},_createSingleQuerySetting:function(a){this.currentSQS=new m({map:this.map,nls:this.nls,config:a.singleConfig,tr:a,_layerDefinition:a._layerDefinition});this.currentSQS.placeAt(this.singleQueryContainer);this.own(b(this.currentSQS,"name-change",q.hitch(this,function(b){this.queryList.editRow(a,{name:b})})));this.own(b(this.currentSQS,"show-shelter",q.hitch(this,function(){this.shelter.show()})));this.own(b(this.currentSQS,"hide-shelter",q.hitch(this,function(){this.shelter.hide()})));
this.currentSQS.setConfig(this.currentSQS.config);return this.currentSQS},_onAddNewClicked:function(){if(this.currentSQS){var a=this.currentSQS.getConfig();if(a)this.currentSQS.tr.singleConfig=a,this.currentSQS.destroy(),this.currentSQS=null;else return}var c=new p({titleLabel:this.nls.setDataSource,featureArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,appConfig:{portalUrl:window.portalUrl,appId:""},style:{height:"100%"}}});this.own(b(c,"ok",q.hitch(this,function(a){c.close();var b=a.name||
"",d=this.queryList.addRow({name:b});d.success&&(this.queryList.selectRow(d.tr),this.currentSQS&&this.currentSQS.setNewLayerDefinition(a.name,a.url,a.definition,b))})));this.own(b(c,"cancel",q.hitch(this,function(){c.close()})));c.startup()},_getSuitableQueryName:function(a){for(var b=a,c=this.queryList.getData(),c=n.map(c,q.hitch(this,function(a){return a.name})),d=2;0<=n.indexOf(c,b);)a+=" "+d,d++;return a},_onQueryItemRemoved:function(a){this.currentSQS&&this.currentSQS.tr===a&&(this.currentSQS.destroy(),
this.currentSQS=null)},_onQueryItemSelected:function(a){if(this.currentSQS){if(this.currentSQS.tr!==a){var b=this.currentSQS.getConfig();b?(this.currentSQS.tr.singleConfig=b,this.currentSQS.destroy(),this.currentSQS=null,this._createSingleQuerySetting(a)):this.queryList.selectRow(this.currentSQS.tr)}}else this._createSingleQuerySetting(a)}})});