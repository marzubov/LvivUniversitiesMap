//>>built
require({cache:{"url:widgets/Chart/setting/SingleChartSetting.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tabDiv"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"settingsTabNode"\x3e\r\n\t\t\t\x3c!--general settings--\x3e\r\n\t\t\t\x3cdiv class\x3d"part-setting-title"\x3e${nls.generalSettingsTip}\x3c/div\x3e\r\n\t\t\t\x3ctable class\x3d"part-setting-table gereral-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"10px;"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"116px" align\x3d"left"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd style\x3d"vertical-align: top;"\x3e\r\n\t\t\t\t\t\t\t\x3cspan style\x3d"line-height:30px;"\x3e${nls.dataSource}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cdiv style\x3d"position:relative;overflow:hidden;width:100%;height:30px;"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"url-text-box" data-dojo-attach-point\x3d"urlTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"display:inline-block;width:380px;min-width:380px;height:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"filter-icon" title\x3d"${nls.addFilterTip}" data-dojo-attach-point\x3d"filterIcon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn btn-data-source" data-dojo-attach-point\x3d"btnSetSource" data-dojo-attach-event\x3d"onclick:_onBtnSetClicked" title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cspan\x3e${nls.chartTitle}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"chartNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true\' data-dojo-attach-event\x3d"change:_onChartNameChanged" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cspan\x3e${nls.description}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3ctextarea data-dojo-attach-point\x3d"descriptionTA" style\x3d"width:100%;height:34px;resize:none;"\x3e\x3c/textarea\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\r\n\r\n\t\t\t\x3c!--chart mode setting--\x3e\r\n\t\t\t\x3cdiv class\x3d"part-setting-title"\x3e${nls.chartModeSettingTip}\x3c/div\x3e\r\n\t\t\t\x3ctable class\x3d"part-setting-table chart-mode-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"116px" align\x3d"left"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cspan\x3e${nls.chartingMode}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"chartModeSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"change:_onChartModeChnaged" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\r\n\r\n\t\t\t\x3c!--detail setting--\x3e\r\n\t\t\t\x3cdiv class\x3d"part-setting-title" style\x3d"margin-bottom:15px;"\x3e${nls.detailsSettingTip}\x3c/div\x3e\r\n\t\t\t\x3ctable data-dojo-attach-point\x3d"detailsTable" class\x3d"part-setting-table details-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t  \x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"116px" align\x3d"left"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t  \x3c/colgroup\x3e\r\n\t\t\t  \x3ctbody calss\x3d"details-tbody"\x3e\r\n\t\t\t   \x3ctr class\x3d"detail-tr category-tr count-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cspan\x3e${nls.categoryField}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cdiv style\x3d"position:relative;overflow:hidden;width:100%;height:30px;"\x3e\r\n\t\t\t\t  \t\t\t\x3cselect data-dojo-attach-point\x3d"categoryFieldSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:485px;height:100%;"\x3e\r\n\t\t\t\t  \t\t\t\x3c/select\x3e\r\n\t\t\t\t  \t\t\t\x3cdiv class\x3d"sort-icon" title\x3d"${nls.sortOrder}" data-dojo-attach-point\x3d"categorySortOrderIcon"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\t\x3c/div\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr feature-tr category-tr field-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd style\x3d"vertical-align:top;"\x3e\r\n\t\t\t\t  \t\t\x3cspan style\x3d"line-height:30px;"\x3e${nls.valueFields}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cdiv data-dojo-attach-point\x3d"dataFieldsDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr feature-tr"\x3e\r\n\t\t\t\t \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t \t\x3ctd\x3e\r\n\t\t\t\t \t\t\x3cspan\x3e${nls.axisLabel}\x3c/span\x3e\r\n\t\t\t\t \t\x3c/td\x3e\r\n\t\t\t\t \t\x3ctd\x3e\r\n\t\t\t\t \t\t\x3cdiv style\x3d"position:relative;overflow:hidden;width:100%;height:30px;"\x3e\r\n\t\t\t\t  \t\t\t\x3cselect data-dojo-attach-point\x3d"featureAxisLabelSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:485px;height:100%;"\x3e\r\n\t\t\t\t  \t\t\t\x3c/select\x3e\r\n\t\t\t\t  \t\t\t\x3cdiv class\x3d"sort-icon" title\x3d"${nls.sortOrder}" data-dojo-attach-point\x3d"featureSortOrderIcon"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\t\x3c/div\x3e\r\n\t\t\t\t \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr category-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cspan\x3e${nls.operation}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cselect data-dojo-attach-point\x3d"categoryOperationSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;"\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"sum"\x3e${nls.sumOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"average"\x3e${nls.averageOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"min"\x3e${nls.minOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"max"\x3e${nls.maxOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\x3c/select\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr field-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cspan\x3e${nls.operation}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cselect data-dojo-attach-point\x3d"fieldOperationSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;"\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"sum"\x3e${nls.sumOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"average"\x3e${nls.averageOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"min"\x3e${nls.minOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"max"\x3e${nls.maxOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\x3c/select\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr feature-tr category-tr count-tr field-tr chart-types-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cspan\x3e${nls.chartType}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd style\x3d"cursor:default;" class\x3d"charts-td"\x3e\r\n\t\t\t\t  \t\t\x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"columnCbx" /\x3e\r\n\t\t\t\t  \t\t\x3cspan style\x3d"margin-left:3px;" data-dojo-attach-point\x3d"columnSpan"\x3e${nls.column}\x3c/span\x3e\r\n\r\n\t\t\t\t  \t\t\x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"pieCbx" style\x3d"margin-left:15px;" /\x3e\r\n\t\t\t\t  \t\t\x3cspan style\x3d"margin-left:3px;" data-dojo-attach-point\x3d"pieSpan"\x3e${nls.pie}\x3c/span\x3e\r\n\r\n\t\t\t\t  \t\t\x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"barCbx" style\x3d"margin-left:15px;" /\x3e\r\n\t\t\t\t  \t\t\x3cspan style\x3d"margin-left:3px;" data-dojo-attach-point\x3d"barSpan"\x3e${nls.bar}\x3c/span\x3e\r\n\r\n\t\t\t\t  \t\t\x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"lineCbx" style\x3d"margin-left:15px;" /\x3e\r\n\t\t\t\t  \t\t\x3cspan style\x3d"margin-left:3px;" data-dojo-attach-point\x3d"lineSpan"\x3e${nls.line}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr feature-tr category-tr count-tr field-tr colors-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cspan\x3e${nls.chartColor}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cdiv data-dojo-attach-point\x3d"colorSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"display:inline-block;width:310px;height:26px;"\x3e\r\n\t\t\t\t  \t\t\t\x3cspan data-dojo-value\x3d\'color1\'\x3e\r\n\t\t\t\t  \t\t\t\t\x3cimg  style\x3d"width:268px;height:20px;vertical-align: middle;margin-top: 1px;margin-bottom:1px;" src\x3d"${settingImagesUrl}/c1.png" /\x3e\r\n\t\t\t\t  \t\t\t\x3c/span\x3e\r\n\t\t\t\t  \t\t\t\x3cspan data-dojo-value\x3d\'color2\'\x3e\r\n\t\t\t\t  \t\t\t\t\x3cimg  style\x3d"width:268px;height:20px;vertical-align: middle;margin-top: 1px;margin-bottom:1px;" src\x3d"${settingImagesUrl}/c2.png" /\x3e\t\r\n\t\t\t\t  \t\t\t\x3c/span\x3e\r\n\t\t\t\t  \t\t\t\x3cspan data-dojo-value\x3d\'color3\'\x3e\r\n\t\t\t\t  \t\t\t\t\x3cimg  style\x3d"width:268px;height:20px;vertical-align: middle;margin-top: 1px;margin-bottom:1px;" src\x3d"${settingImagesUrl}/c3.png" /\x3e\r\n\t\t\t\t  \t\t\t\x3c/span\x3e\r\n\t\t\t\t  \t\t\t\x3cspan data-dojo-value\x3d\'color4\'\x3e\r\n\t\t\t\t  \t\t\t\t\x3cimg  style\x3d"width:268px;height:20px;vertical-align: middle;margin-top: 1px;margin-bottom:1px;" src\x3d"${settingImagesUrl}/c4.png" /\x3e\r\n\t\t\t\t  \t\t\t\x3c/span\x3e\r\n\t\t\t\t  \t\t\t\x3cspan data-dojo-value\x3d\'color5\'\x3e\r\n\t\t\t\t  \t\t\t\t\x3cimg  style\x3d"width:268px;height:20px;vertical-align: middle;margin-top: 1px;margin-bottom:1px;" src\x3d"${settingImagesUrl}/c5.png" /\x3e\r\n\t\t\t\t  \t\t\t\x3c/span\x3e\r\n\t\t\t\t  \t\t\t\x3cspan data-dojo-value\x3d\'color6\'\x3e\r\n\t\t\t\t  \t\t\t\t\x3cimg  style\x3d"width:268px;height:20px;vertical-align: middle;margin-top: 1px;margin-bottom:1px;" src\x3d"${settingImagesUrl}/c6.png" /\x3e\r\n\t\t\t\t  \t\t\t\x3c/span\x3e\r\n\t\t\t\t  \t\t\x3c/div\x3e\r\n\t\t\t\t  \t\t\x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"labelsCbx" style\x3d"margin-left:15px;display:none;" /\x3e\r\n\t\t\t\t  \t\t\x3cspan style\x3d"margin-left:10px;display:none;"\x3e${nls.showDataLabels}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t  \x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\r\n\r\n\t\t\t\x3c!--symbol setting--\x3e\r\n\t\t\t\x3cdiv class\x3d"part-setting-title"\x3e${nls.symbolSettingTip}\x3c/div\x3e\r\n\t\t\t\x3cdiv style\x3d"margin-left:10px;"\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:20px;overflow:hidden;"\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"float:left;"\x3e${nls.setSymbol}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"symbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" style\x3d"margin-left:20px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:30px;overflow:hidden;padding-bottom:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"float:left;"\x3e${nls.setHighLightColor}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPicker" data-dojo-props\x3d\'color:"${_highLightColor}"\' style\x3d"float:left;margin-left:20px;width:25px;height:25px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"previewTabNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"previewDiv" class\x3d"preview-div"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Tooltip dijit/form/Select dojo/text!./SingleChartSetting.html dijit/form/ValidationTextBox dijit/TooltipDialog dijit/popup jimu/utils jimu/dijit/TabContainer3 jimu/dijit/Filter jimu/dijit/LoadingShelter jimu/dijit/_FeaturelayerSourcePopup jimu/dijit/SymbolPicker jimu/dijit/Message jimu/dijit/SimpleTable ./DataFields ../Preview esri/request esri/tasks/query esri/tasks/QueryTask esri/symbols/jsonUtils".split(" "),
function(q,e,k,f,l,n,g,r,s,t,u,G,H,v,I,p,h,m,w,x,J,y,K,z,L,A,B,C,D,E,F){return q([s,t,u,r],{baseClass:"jimu-widget-singlechart-setting",templateString:v,mediaSelector:null,config:null,map:null,nls:null,tr:null,settingImagesUrl:"",_layerDefinition:null,_highLightColor:"#ff0000",_stringFieldType:"esriFieldTypeString",_oidFieldType:"esriFieldTypeOID",_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],_uniqueColors:{color1:"#fce138 #fff799 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #69f488 #48885c".split(" ").reverse(),
color2:"#102432 #144d59 #ffc754 #ea9010 #a54e1d #661510 #d8341a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ").reverse(),color3:"#be9626 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ").reverse(),color4:"#fffa00 #f5cb11 #9fd40c #46e29c #32b8a6 #7ff2fa #ad00f2 #c461ea #eb7200 #e8a784 #bf2e2e #6c7000".split(" ").reverse(),color5:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #99dbbc #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ").reverse(),
color6:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #e9da40 #ccc54a #1fc235".split(" ").reverse()},postCreate:function(){this.inherited(arguments);this._initSelf()},destroy:function(){this.tr=null;delete this.tr;h.close(this.filterTooltipDialog);this.filterTooltipDialog.destroy();this.filterTooltipDialog=null;this.inherited(arguments)},startup:function(){this._started||this.inherited(arguments);this._started=!0},_updateUrlTextBoxLength:function(){try{var b=f.getMarginBox(this.btnSetSource),
c=f.getContentBox(this.descriptionTA),a=Math.max(c.w-b.w-10,380);f.setStyle(this.urlTextBox.domNode,"width",a+"px")}catch(d){console.error(d)}},setConfig:function(b){if(this._isObject(b)){this.config=b;var c=b.url||"";c&&"string"===typeof c&&(this._layerDefinition&&this._layerDefinition.url===c?this._resetByConfig(this.config,this._layerDefinition):(this._layerDefinition=null,this.showBigShelter(),C({url:c,hanleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(e.hitch(this,function(a){this.domNode&&
(this.hideBigShelter(),this._layerDefinition=a,this._layerDefinition.url=c,this._resetByConfig(this.config,this._layerDefinition))}),e.hitch(this,function(a){console.error(a);this.domNode&&this.hideBigShelter()}))))}},getConfig:function(b){var c={url:"",filter:"",name:"",description:"",mode:"",types:[],colors:[]};c.url=this.urlTextBox.get("value");var a=this.filter.toJson();if(!a)return b&&(this.tab.viewStack.getSelectedLabel()!==this.nls.preview&&h.open({popup:this.filterTooltipDialog,around:this.urlTextBox.domNode}),
this._showMessage(this.nls.setFilterTip)),!1;c.filter=a;a=this.chartNameTextBox.get("value");if(!a)return b&&this._showMessage(this.nls.setChartTitleTip),!1;c.name=a;c.description=this.descriptionTA.value;c.mode=this.chartModeSelect.get("value");a=[];this.columnCbx.checked&&a.push("column");this.pieCbx.checked&&a.push("pie");this.barCbx.checked&&a.push("bar");this.lineCbx.checked&&a.push("line");if(0===a.length)return b&&this._showMessage(this.nls.setChartTypeTip),!1;c.types=a;c.colors=this._uniqueColors[this.colorSelect.get("value")];
if("feature"===c.mode){a={labelField:"",valueFields:[],sortOrder:""};a.labelField=this.featureAxisLabelSelect.get("value");var d=this.valueFields.getSelectedFieldNames();if(0===d.length)return b&&this._showMessage(this.nls.setDataFieldTip),!1;a.valueFields=d;a.sortOrder=this.ascRadio.checked?"asc":"des";c=e.mixin(c,a)}else if("category"===c.mode){a={categoryField:"",operation:"",valueFields:[],sortOrder:""};a.categoryField=this.categoryFieldSelect.get("value");a.operation=this.categoryOperationSelect.get("value");
d=this.valueFields.getSelectedFieldNames();if(0===d.length)return b&&this._showMessage(this.nls.setDataFieldTip),!1;a.valueFields=d;a.sortOrder=this.ascRadio.checked?"asc":"des";c=e.mixin(c,a)}else if("count"===c.mode)b={categoryField:"",sortOrder:""},b.categoryField=this.categoryFieldSelect.get("value"),b.sortOrder=this.ascRadio.checked?"asc":"des",c=e.mixin(c,b);else if("field"===c.mode){a={operation:"",valueFields:[]};a.operation=this.fieldOperationSelect.get("value");d=this.valueFields.getSelectedFieldNames();
if(0===d.length)return b&&this._showMessage(this.nls.setDataFieldTip),!1;a.valueFields=d;c=e.mixin(c,a)}this.config=e.clone(c);if(b=this.symbolPicker.getSymbol())c.symbol=b.toJson();else return!1;b=this.colorPicker.getColor();c.highLightColor=b.toHex();this.tr._layerDefinition=this._layerDefinition;return e.clone(c)},showBigShelter:function(){this.emit("show-shelter")},hideBigShelter:function(){this.emit("hide-shelter")},_showMessage:function(b){new z({message:b})},_isObject:function(b){return b&&
"object"===typeof b},_initSelf:function(){this._initTabs();this._initChartTypes();this._initFilter();this._initSortOrder();this._initDataFields();this._initPreview();this._onChartModeChnaged()},_initTabs:function(){var b={title:this.nls.preview,content:this.previewTabNode};this.tab=new w({tabs:[{title:this.nls.settings,content:this.settingsTabNode},b]});this.tab.placeAt(this.tabDiv);this.own(g(this.tab,"tabChanged",e.hitch(this,function(c){c===b.title&&this._updatePreview();h.close(this.filterTooltipDialog)})))},
_initFilter:function(){var b=f.toDom('\x3cdiv\x3e\x3cdiv class\x3d"filter-div"\x3e\x3c/div\x3e\x3cdiv class\x3d"operations" style\x3d"overflow:hidden;"\x3e\x3cdiv class\x3d"jimu-btn btn-cancel" style\x3d"float:right;padding:6px;"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-btn btn-ok" style\x3d"float:right;padding:6px;margin-right:20px;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),c=l(".filter-div",b)[0],a=l(".btn-ok",b)[0],d=l(".btn-cancel",b)[0];a.innerHTML=this.nls.ok;d.innerHTML=this.nls.close;this.filterTooltipDialog=
new p({content:b});this.filter=new x;this.filter.allExpsBox.style.maxHeight="300px";this.filter.allExpsBox.style.overflowY="auto";this.filter.placeAt(c);this.filter.startup();this.own(g(a,"click",e.hitch(this,function(){this.filter.toJson()&&h.close(this.filterTooltipDialog)})));this.own(g(d,"click",e.hitch(this,function(){h.close(this.filterTooltipDialog)})));this.own(g(this.filterIcon,"click",e.hitch(this,function(a){a.stopPropagation();h.close(this.filterTooltipDialog);h.open({popup:this.filterTooltipDialog,
around:this.urlTextBox.domNode})})))},_initSortOrder:function(){var b='\x3cdiv\x3e\x3cdiv class\x3d"asc-div"\x3e\x3cinput type\x3d"radio" class\x3d"asc-radio" checked /\x3e\x3cspan class\x3d"asc-span" style\x3d"margin-left:10px;"\x3e'+this.nls.ascending+'\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"des" style\x3d"margin-top:10px;"\x3e\x3cinput type\x3d"radio" class\x3d"des-radio" /\x3e\x3cspan class\x3d"des-span" style\x3d"margin-left:10px;"\x3e'+this.nls.descending+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e",
c="chart_"+m.getRandomString(),b=f.toDom(b);this.ascRadio=l(".asc-radio",b)[0];this.desRadio=l(".des-radio",b)[0];this.ascRadio.name=c;this.desRadio.name=c;this.sortOrderTooltipDialog=new p({content:b});this.own(g(window,"click",e.hitch(this,function(a){a=a.target||a.srcElement;a===this.sortOrderTooltipDialog.domNode||f.isDescendant(a,this.sortOrderTooltipDialog.domNode)||h.close(this.sortOrderTooltipDialog)})));this.own(g(this.categorySortOrderIcon,"click",e.hitch(this,function(a){a.stopPropagation();
h.close(this.sortOrderTooltipDialog);h.open({popup:this.sortOrderTooltipDialog,around:this.categorySortOrderIcon,orient:["after-centered","below"]})})));this.own(g(this.featureSortOrderIcon,"click",e.hitch(this,function(a){a.stopPropagation();h.close(this.sortOrderTooltipDialog);h.open({popup:this.sortOrderTooltipDialog,around:this.featureSortOrderIcon,orient:["after-centered","below"]})})))},_initDataFields:function(){this.valueFields=new A({nls:this.nls});this.valueFields.placeAt(this.dataFieldsDiv);
this.valueFields.startup();this.own(g(this.valueFields,"change",e.hitch(this,function(){this._updateChartTypes()})))},_updateChartTypes:function(){this.lineCbx.disabled=!1;this.pieCbx.disabled=!1;var b=this.chartModeSelect.get("value");if(("feature"===b||"category"===b)&&1<this.valueFields.getSelectedFieldNames().length)this.lineCbx.checked=!1,this.pieCbx.checked=!1,this.lineCbx.disabled=!0,this.pieCbx.disabled=!0;this.pieCbx.disabled?f.addClass(this.pieSpan,"gray"):f.removeClass(this.pieSpan,"gray");
this.lineCbx.disabled?f.addClass(this.lineSpan,"gray"):f.removeClass(this.lineSpan,"gray")},_initChartTypes:function(){var b=m.getRandomString();this.columnCbx.id="chart_column_"+b;this.pieCbx.id="chart_pie_"+b;this.barCbx.id="chart_bar_"+b;this.lineCbx.id="chart_line_"+b;f.setAttr(this.columnSpan,"for",this.columnCbx.id);f.setAttr(this.pieSpan,"for",this.pieCbx.id);f.setAttr(this.barSpan,"for",this.barCbx.id);f.setAttr(this.lineSpan,"for",this.lineCbx.id)},_initPreview:function(){this.preview=new B({nls:this.nls});
this.preview.placeAt(this.previewDiv);this.preview.startup()},_onChartModeChnaged:function(){var b=(this.chartModeSelect.get("value")||"")+"-tr",c=l(".detail-tr",this.detailsTable);k.forEach(c,e.hitch(this,function(a){f.hasClass(a,b)?f.addClass(a,"show-tr"):f.removeClass(a,"show-tr")}));this._updateChartTypes()},_onChartNameChanged:function(){this.emit("name-change",this.chartNameTextBox.get("value"))},_onDescriptionFocus:function(){f.setStyle(this.descriptionTA,"height","62px")},_onDescriptionBlur:function(){f.setStyle(this.descriptionTA,
"height","30px")},_clear:function(){this._layerDefinition=null;this.urlTextBox.set("value","");this.filter.reset();this.chartNameTextBox.set("value","");this.descriptionTA.value="";this.chartModeSelect.removeOption(this.chartModeSelect.getOptions());this.categoryFieldSelect.removeOption(this.categoryFieldSelect.getOptions());this.categoryOperationSelect.set("value","sum");this.fieldOperationSelect.set("value","sum");this.valueFields.clear();this.featureAxisLabelSelect.removeOption(this.featureAxisLabelSelect.getOptions());
this.ascRadio.checked=!0;this.columnCbx.checked=!1;this.pieCbx.checked=!1;this.barCbx.checked=!1;this.lineCbx.checked=!1;this.colorSelect.set("value","color1");this.symbolPicker.reset();this.colorPicker.setColor(new n(this._highLightColor));this.preview.clear()},_onBtnSetClicked:function(){var b=new y({titleLabel:this.nls.setDataSource,featureArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,appConfig:{portalUrl:window.portalUrl,appId:""},style:{height:"100%"}}});this.own(g(b,"ok",e.hitch(this,
function(c){b.close();this.setNewLayerDefinition(c.name,c.url,c.definition)})));this.own(g(b,"cancel",e.hitch(this,function(){b.close()})));b.startup()},_hasNumberFields:function(b){var c=!1;(b=b.fields)&&0<b.length&&(c=k.some(b,e.hitch(this,function(a){return 0<=this._numberFieldTypes.indexOf(a.type)})));return c},setNewLayerDefinition:function(b,c,a,d){a.name=b;a.url=c;c!==(this._layerDefinition&&this._layerDefinition.url)&&this._resetByNewLayerDefinition(a,d)},_resetByNewLayerDefinition:function(b,
c){this._clear();if(b){this._layerDefinition=b;var a=b.url;this.urlTextBox.set("value",a);this._layerDefinition&&this.filter.buildByExpr(a,"1\x3d1",this._layerDefinition);this.chartNameTextBox.set("value",c||b.name);this._resetFieldsDijitsByLayerInfo(this._layerDefinition);this.columnCbx.checked=!0;var a=m.getTypeByGeometryType(b.geometryType),d="";"point"===a?d="marker":"polyline"===a?d="line":"polygon"===a&&(d="fill");d&&this.symbolPicker.showByType(d)}},_resetFieldsDijitsByLayerInfo:function(b){this.chartModeSelect.removeOption(this.chartModeSelect.getOptions());
this._hasNumberFields(b)?(this.chartModeSelect.addOption({value:"feature",label:this.nls.featureOption}),this.chartModeSelect.addOption({value:"category",label:this.nls.categoryOption}),this.chartModeSelect.addOption({value:"count",label:this.nls.countOption}),this.chartModeSelect.addOption({value:"field",label:this.nls.fieldOption}),this.chartModeSelect.set("value","feature")):(this.chartModeSelect.addOption({value:"count",label:this.nls.countOption}),this.chartModeSelect.set("value","count"));var c=
b.displayField;b=e.clone(b.fields);var a=[this._stringFieldType].concat(e.clone(this._numberFieldTypes)),d=k.filter(b,e.hitch(this,function(b){return 0<=a.indexOf(b.type)}));this.categoryFieldSelect.removeOption(this.categoryFieldSelect.getOptions());var f="";k.forEach(d,e.hitch(this,function(a){this.categoryFieldSelect.addOption({value:a.name,label:a.alias});a.name===c&&(f=c)}));this.categoryFieldSelect.set("value",f);var h=[this._stringFieldType,this._oidFieldType].concat(e.clone(this._numberFieldTypes)),
d=k.filter(b,e.hitch(this,function(a){return 0<=h.indexOf(a.type)}));this.featureAxisLabelSelect.removeOption(this.featureAxisLabelSelect.getOptions());var g="";k.forEach(d,e.hitch(this,function(a){var b={value:a.name,label:a.alias};c?a.name===c&&(g=a.name):a.type===this._oidFieldType&&(g=a.name);this.featureAxisLabelSelect.addOption(b)}));this.featureAxisLabelSelect.set("value",g);b=k.filter(b,e.hitch(this,function(a){return 0<=this._numberFieldTypes.indexOf(a.type)}));this.valueFields.setFields(b)},
_resetByConfig:function(b,c){this._clear();var a=e.clone(b);this._layerDefinition=c;this.urlTextBox.set("value",a.url);this.filter.buildByFilterObj(c.url,a.filter,c);this.chartNameTextBox.set("value",a.name||c.name||"");this.descriptionTA.value=a.description||"";this._resetFieldsDijitsByLayerInfo(c);this.chartModeSelect.set("value",a.mode);var d=a.types;0<=d.indexOf("column")&&(this.columnCbx.checked=!0);0<=d.indexOf("bar")&&(this.barCbx.checked=!0);"feature"===a.mode?(this.featureAxisLabelSelect.set("value",
a.labelField),this.valueFields.selectFields(a.valueFields),"des"===a.sortOrder?this.desRadio.checked=!0:this.ascRadio.checked=!0,1>=a.valueFields.length&&(0<=d.indexOf("line")&&(this.lineCbx.checked=!0),0<=d.indexOf("pie")&&(this.pieCbx.checked=!0))):"category"===a.mode?(this.categoryFieldSelect.set("value",a.categoryField),this.categoryOperationSelect.set("value",a.operation),this.valueFields.selectFields(a.valueFields),"des"===a.sortOrder?this.desRadio.checked=!0:this.ascRadio.checked=!0,1>=a.valueFields.length&&
(0<=d.indexOf("line")&&(this.lineCbx.checked=!0),0<=d.indexOf("pie")&&(this.pieCbx.checked=!0))):"count"===a.mode?(this.categoryFieldSelect.set("value",a.categoryField),"des"===a.sortOrder?this.desRadio.checked=!0:this.ascRadio.checked=!0,0<=d.indexOf("line")&&(this.lineCbx.checked=!0),0<=d.indexOf("pie")&&(this.pieCbx.checked=!0)):"field"===a.mode&&(this.fieldOperationSelect.set("value",a.operation),this.valueFields.selectFields(a.valueFields),0<=d.indexOf("line")&&(this.lineCbx.checked=!0),0<=d.indexOf("pie")&&
(this.pieCbx.checked=!0));d=F.fromJson(a.symbol);this.symbolPicker.showBySymbol(d);this.colorPicker.setColor(new n(a.highLightColor));if(a=a.colors&&a.colors[0])for(var f in this._uniqueColors)if(a===this._uniqueColors[f][0]){this.colorSelect.set("value",f);break}},_updatePreview:function(){this.preview.clear();var b=this.getConfig(!0);if(b){var c=new D;c.returnGeometry=!1;c.where=b.filter.expr||"1\x3d1";c.outFields=[];"feature"===b.mode?(c.outFields=e.clone(b.valueFields),0>c.outFields.indexOf(b.labelField)&&
(c.outFields=[b.labelField].concat(c.outFields))):"category"===b.mode?(c.outFields=e.clone(b.valueFields),0>c.outFields.indexOf(b.categoryField)&&(c.outFields=[b.categoryField].concat(c.outFields))):"count"===b.mode?c.outFields=[b.categoryField]:"field"===b.mode&&(c.outFields=e.clone(b.valueFields));this.tab.showShelter();this.showBigShelter();(new E(b.url)).execute(c).then(e.hitch(this,function(a){if(this.domNode){var c=f.getContentBox(this.domNode.parentNode),c=Math.max(c.h-60,150);f.setStyle(this.preview.domNode,
"height",c+"px");this.preview.createCharts({config:b,featureSet:a,layerDefinition:this._layerDefinition,resultLayer:null});this.tab.hideShelter();this.hideBigShelter()}}),e.hitch(this,function(a){this.domNode&&(console.error(a),this.tab.hideShelter(),this.hideBigShelter())}))}}})});