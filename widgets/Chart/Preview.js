//>>built
require({cache:{"url:widgets/Chart/Preview.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"results-section" data-dojo-attach-point\x3d"resultsSection"\x3e\r\n\t\t\x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader"\x3e\r\n\t\t\t\x3cdiv class\x3d"chart-title" data-dojo-attach-point\x3d"chartTitle"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"paging-section"\x3e\r\n\t\t\t\t\x3cul data-dojo-attach-point\x3d"pagingUl" data-dojo-attach-event\x3d"onclick:_onPagingUlClicked"\x3e\x3c/ul\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"chart-section"\x3e\r\n\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"30px;"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"auto;"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"30px;"\x3e\x3c/col\x3e\r\n\t\t    \x3c/colgroup\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item left-arrow arrow" data-dojo-attach-point\x3d"leftArrow" data-dojo-attach-event\x3d"onclick:_onLeftArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item chart-container" data-dojo-attach-point\x3d"chartContainer"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item right-arrow arrow" data-dojo-attach-point\x3d"rightArrow" data-dojo-attach-event\x3d"onclick:_onRightArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"chart-description" data-dojo-attach-point\x3d"descriptionNode"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"noresults-section" data-dojo-attach-point\x3d"noresultsSection"\x3e\r\n\t\t${nls.noResults}\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./Preview.html dojox/charting/Chart dojox/charting/axis2d/Default dojox/charting/plot2d/Columns dojox/charting/plot2d/Bars dojox/charting/plot2d/Lines dojox/charting/plot2d/Pie dojox/charting/plot2d/ClusteredColumns dojox/charting/plot2d/ClusteredBars dojox/charting/action2d/Tooltip dojo/fx/easing dojox/charting/action2d/MouseIndicator dojox/charting/action2d/Highlight dojox/charting/action2d/MoveSlice dojox/charting/themes/MiamiNice dojox/charting/action2d/Magnify esri/symbols/jsonUtils esri/graphic esri/graphicsUtils jimu/utils".split(" "),
function(J,h,l,n,x,B,S,K,L,M,s,C,H,I,D,E,N,O,t,u,T,v,w,F,G,z,P,Q,r){return J([K,L],{baseClass:"jimu-widget-chart-preview",templateString:M,charts:[],currentChartIndex:-1,layerDefinition:null,config:null,featureSet:null,map:null,resultLayer:null,tempGraphics:null,createCharts:function(a){try{this.clear();n.setStyle(this.resultsSection,"display","block");n.setStyle(this.noresultsSection,"display","none");x(".chart-section-item",this.domNode).forEach(h.hitch(this,function(a){n.setStyle(a,"height",0)}));
this.config=a.config;this.featureSet=a.featureSet;this.layerDefinition=a.layerDefinition;this.resultLayer=a.resultLayer;this.chartTitle.innerHTML=this.config.name||"";this.chartTitle.title=this.chartTitle.innerHTML;this.descriptionNode.innerHTML=this.config.description||"";n.setStyle(this.resultsSection,"display","block");var b=0,d,c=[],e=a.config.types,k=n.getContentBox(this.domNode),g=n.getMarginBox(this.resultsHeader),f=n.getMarginBox(this.descriptionNode),q=k.h-g.h-f.h;x(".chart-section-item",
this.domNode).forEach(h.hitch(this,function(a){n.setStyle(a,"height",q+"px")}));for(var m=n.getContentBox(this.chartContainer),p=m.w+"px",y=m.h+"px",b=0;b<e.length;b++){d=n.create("div",{"class":"chart-div",style:{width:p,height:y}},this.chartContainer);c.push(d);var l=n.toDom("\x3cli\x3e\x3ca\x3e\x3c/a\x3e\x3c/li\x3e");n.place(l,this.pagingUl)}var A=a.config;"feature"===A.mode?this.charts=this._createFeatureModeCharts(a,c):"category"===A.mode?this.charts=this._createCategoryModeCharts(a,c):"count"===
A.mode?this.charts=this._createCountModeCharts(a,c):"field"===A.mode&&(this.charts=this._createFieldModeCharts(a,c));this._showChart(0);0===a.featureSet.features.length&&(n.setStyle(this.resultsSection,"display","none"),n.setStyle(this.noresultsSection,"display","block"))}catch(R){console.log(R)}},clear:function(){this.resultLayer=this.layerDefinition=this.featureSet=this.config=null;this.chartTitle.innerHTML="";this.chartTitle.title="";this.descriptionNode.innerHTML="";this.currentChartIndex=-1;
x(".chart-div",this.chartContainer).style({display:"none"});x("li",this.pagingUl).removeClass("selected");this.charts||(this.charts=[]);for(var a=0;a<this.charts.length;a++){var b=this.charts[a];b&&b.destroy();this.charts[a]=null}this.charts=[];n.empty(this.pagingUl);n.empty(this.chartContainer);n.setStyle(this.resultsSection,"display","none");n.setStyle(this.noresultsSection,"display","none")},_showChart:function(a){this.currentChartIndex=-1;var b=x(".chart-div",this.chartContainer);b.style({display:"none"});
var d=x("li",this.pagingUl);d.removeClass("selected");if(!(0>a)){if(b=b[a])this.currentChartIndex=a,n.setStyle(b,{display:"block"});(a=d[a])&&n.addClass(a,"selected")}},_onPagingUlClicked:function(a){a=a.target||a.srcElement;if("a"===a.tagName.toLowerCase()){var b=x("a",this.pagingUl);a=l.indexOf(b,a);0<=a&&this._showChart(a)}},_onLeftArrowClicked:function(){var a=(this.currentChartIndex-1+this.charts.length)%this.charts.length;0<=a&&this._showChart(a)},_onRightArrowClicked:function(){var a=(this.currentChartIndex+
1+this.charts.length)%this.charts.length;0<=a&&this._showChart(a)},_getHighLightMarkerSymbol:function(){var a=z.fromJson(this.config.symbol),a=Math.max(a.size||0,a.width||0,a.height,18),a=a+1,b=z.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:0.75,type:"esriSLS",style:"esriSLSSolid"}});b.setSize(a);b.outline.setColor(new B(this.config.highLightColor));return b},_getHighLightLineSymbol:function(){var a=z.fromJson({color:[0,
255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});a.setColor(new B(this.config.highLightColor));return a},_getHighLightFillSymbol:function(){var a=z.fromJson({color:[0,0,0,0],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSNull"});a.outline.setColor(new B(this.config.highLightColor));return a},_zoomToGraphics:function(a){if(this.resultLayer&&this.resultLayer.visible&&a&&0<a.length){var b=null;try{b=Q.graphicsExtent(a)}catch(d){console.log(d)}if(b)this.map.setExtent(b.expand(1.4));
else if(a=(a=a[0])&&a.geometry)b=h.hitch(this,function(a){var b=this.map.getNumLevels(),d=this.map.getLevel(),b=Math.max(d,Math.floor(2*b/3));this.map.setLevel(b).then(h.hitch(this,function(){this.map.centerAt(a)}))}),"point"===a.type?b(a):"multipoint"===a.type&&1===a.points.length&&b(a.getPoint(0))}},_removeTempGraphics:function(){if(this.resultLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.resultLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,
1);this.tempGraphics=null},_mouseOverChartItem:function(a){this._removeTempGraphics();if(this.resultLayer&&this.resultLayer.visible){var b=r.getTypeByGeometryType(this.layerDefinition.geometryType),d=null;if("point"===b)d=this._getHighLightMarkerSymbol(),this.tempGraphics=[],l.forEach(a,h.hitch(this,function(a){a=new P(a.geometry,d);this.tempGraphics.push(a);this.resultLayer.add(a)}));else if("polyline"===b||"polygon"===b)d="polyline"===b?this._getHighLightLineSymbol():this._getHighLightFillSymbol(),
l.forEach(a,h.hitch(this,function(a){a.setSymbol(d)}))}},_mouseOutChartItem:function(){this._removeTempGraphics();this.resultLayer&&l.forEach(this.resultLayer.graphics,h.hitch(this,function(a){a.setSymbol(null)}))},_isNumber:function(a){return"[object number]"===Object.prototype.toString.call(a).toLowerCase()},_tryLocaleNumber:function(a){var b=r.localizeNumber(a);if(null===b||void 0===b)b=a;return b},_createFeatureModeCharts:function(a,b){var d=[],c=a.config,e=c.labelField,k=c.valueFields,g=c.types,
c="des"!==c.sortOrder;a.featureSet.features=l.filter(a.featureSet.features,h.hitch(this,function(a){return l.every(k,h.hitch(this,function(b){var f=a.attributes;return f&&this._isNumber(f[b])}))}));var f=[],f=l.map(a.featureSet.features,h.hitch(this,function(a){var b=a.attributes;a={category:b[e],valueFields:[],dataFeatures:[a]};a.valueFields=l.map(k,h.hitch(this,function(a){return b[a]}));return a}));c?f.sort(function(a,b){return a.category<b.category?-1:a.category>b.category?1:0}):f.sort(function(a,
b){return a.category<b.category?1:a.category>b.category?-1:0});l.forEach(g,h.hitch(this,function(c,m){try{var p=b[m],g=null;"column"===c?g=this._createFeatureModeColumnChart(a,p,f):"bar"===c?g=this._createFeatureModeBarChart(a,p,f):"line"===c?g=this._createFeatureModeLineChart(a,p,f):"pie"===c&&(g=this._createFeatureModePieChart(a,p,f));g.connectToPlot("default",h.hitch(this,function(a){if("onmouseover"===a.type||"onmouseout"===a.type||"onclick"===a.type){var b=f[a.index].dataFeatures;"onmouseover"===
a.type?this._mouseOverChartItem(b):"onmouseout"===a.type?this._mouseOutChartItem(b):"onclick"===a.type&&this._zoomToGraphics(b)}}));d.push(g)}catch(e){console.log(e)}}));return d},_createFeatureModeColumnChart:function(a,b,d){return this._createCategoryModeColumnChart(a,b,d)},_createFeatureModeBarChart:function(a,b,d){return this._createCategoryModeBarChart(a,b,d)},_createFeatureModeLineChart:function(a,b,d){return this._createCategoryModeLineChart(a,b,d)},_createFeatureModePieChart:function(a,b,
d){return this._createCategoryModePieChart(a,b,d)},_createCategoryModeCharts:function(a,b){var d=[],c=a.config,e=c.categoryField,k=c.valueFields,g=c.types,c="des"!==c.sortOrder;a.featureSet.features=l.filter(a.featureSet.features,h.hitch(this,function(a){return l.every(k,h.hitch(this,function(b){var f=a.attributes;return f&&this._isNumber(f[b])}))}));var f=[],q=a.config.operation,m={};l.forEach(a.featureSet.features,h.hitch(this,function(a){var b=a.attributes,f=b[e],d=l.map(k,h.hitch(this,function(a){return b[a]})),
c=null;m.hasOwnProperty(f)?(c=m[f],c.dataFeatures.push(a),c.valueFields=l.map(c.valueFields,h.hitch(this,function(a,b){var f=0,c=d[b];"average"===q?f=(a+c)/2:"sum"===q?f=a+c:"max"===q?f=Math.max(a,c):"min"===q&&(f=Math.min(a,c));return f}))):(c={valueFields:d,dataFeatures:[a]},m[f]=c)}));var p=null,y;for(y in m)p=m[y],f.push({category:y,valueFields:p.valueFields,dataFeatures:p.dataFeatures});c?f.sort(function(a,b){return a.category<b.category?-1:a.category>b.category?1:0}):f.sort(function(a,b){return a.category<
b.category?1:a.category>b.category?-1:0});l.forEach(g,h.hitch(this,function(c,g){try{var m=b[g],p=null;"column"===c?p=this._createCategoryModeColumnChart(a,m,f):"bar"===c?p=this._createCategoryModeBarChart(a,m,f):"line"===c?p=this._createCategoryModeLineChart(a,m,f):"pie"===c&&(p=this._createCategoryModePieChart(a,m,f));p.connectToPlot("default",h.hitch(this,function(a){if("onmouseover"===a.type||"onmouseout"===a.type||"onclick"===a.type){var b=f[a.index].dataFeatures;"onmouseover"===a.type?this._mouseOverChartItem(b):
"onmouseout"===a.type?this._mouseOutChartItem(b):"onclick"===a.type&&this._zoomToGraphics(b)}}));d.push(p)}catch(e){console.log(e)}}));return d},_createCategoryModeColumnChart:function(a,b,d){var c=a.config,e=c.valueFields,k=[],g=[];for(a=0;a<e.length;a++)g.push([]);l.forEach(d,h.hitch(this,function(a,b){k.push({value:b+1,text:a.category});for(var c=0;c<a.valueFields.length;c++){var d=a.valueFields[c],h=e[c];g[c].push({y:d,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap'\x3e"+
this.nls.category+" : "+this._tryLocaleNumber(a.category)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+h+" : "+r.localizeNumber(d)+"\x3c/span\x3e\x3c/div\x3e"})}}));b=new s(b);b.addPlot("default",{type:N,animate:{duration:2E3,easing:u.bounceInOut},enableCache:!0,markers:!0,gap:2,minBarSize:2,maxBarSize:60});b.addAxis("x",{natural:!0,labels:k});b.addAxis("y",{vertical:!0,natural:!0,includeZero:!0});d=c.colors;for(a=0;a<g.length;a++)b.addSeries(e[a],g[a],{stroke:{color:d[a%
d.length]},fill:d[(a+1)%d.length]});new w(b,"default");new v(b,"default");new t(b,"default");b.render();return b},_createCategoryModeBarChart:function(a,b,d){var c=a.config,e=c.valueFields,k=[],g=[];for(a=0;a<e.length;a++)g.push([]);l.forEach(d,h.hitch(this,function(a,b){k.push({value:b+1,text:a.category});for(var c=0;c<a.valueFields.length;c++){var d=a.valueFields[c],h=e[c];g[c].push({y:d,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap'\x3e"+this.nls.category+
" : "+this._tryLocaleNumber(a.category)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+h+" : "+r.localizeNumber(d)+"\x3c/span\x3e\x3c/div\x3e"})}}));b=new s(b);b.addPlot("default",{type:O,animate:{duration:2E3,easing:u.bounceInOut},enableCache:!0,markers:!0,gap:2,minBarSize:2,maxBarSize:60});b.addAxis("x",{vertical:!0,natural:!0,labels:k});b.addAxis("y",{natural:!0,includeZero:!0});d=c.colors;for(a=0;a<g.length;a++)b.addSeries(e[a],g[a],{stroke:{color:d[a%d.length]},
fill:d[(a+1)%d.length]});new w(b,"default");new v(b,"default");new t(b,"default");b.render();return b},_createCategoryModeLineChart:function(a,b,d){var c=a.config,e=c.valueFields,k=[],g=[];for(a=0;a<e.length;a++)g.push([]);l.forEach(d,h.hitch(this,function(a,b){k.push({value:b+1,text:a.category});for(var c=0;c<a.valueFields.length;c++){var d=a.valueFields[c],h=e[c];g[c].push({y:d,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap'\x3e"+this.nls.category+
" : "+this._tryLocaleNumber(a.category)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+h+" : "+r.localizeNumber(d)+"\x3c/span\x3e\x3c/div\x3e"})}}));b=new s(b);b.addPlot("default",{type:D,animate:{duration:2E3,easing:u.cubicIn},markers:!0,tension:"S"});b.addAxis("x",{type:C,natural:!0,includeZero:!0,labels:k});b.addAxis("y",{vertical:!0,natural:!0});d=c.colors;for(a=0;a<g.length;a++)b.addSeries(e[a],g[a],{stroke:{color:d[a%d.length]},fill:d[(a+1)%d.length]});new G(b,
"default");new v(b,"default");new t(b,"default");b.render();return b},_createCategoryModePieChart:function(a,b,d){a=a.config;var c=a.valueFields,e=n.getContentBox(b),e=Math.floor(Math.min(e.w,e.h)/2)-3,k=[],g=[],f=[];l.forEach(c,h.hitch(this,function(a,b){g.push([]);var c=0;l.forEach(d,h.hitch(this,function(a){c+=a.valueFields[b]}));f.push(c)}));l.forEach(d,h.hitch(this,function(a,b){k.push({value:b+1,text:a.category});for(var d=0;d<a.valueFields.length;d++){var e=a.valueFields[d],h=c[d],l=(100*(e/
f[d])).toFixed(1)+"%";g[d].push({y:e,text:a.category,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap'\x3e"+this.nls.category+" : "+this._tryLocaleNumber(a.category)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+h+" : "+r.localizeNumber(e)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap'\x3e"+l+"\x3c/span\x3e\x3c/div\x3e"})}}));b=new s(b);b.setTheme(F);b.addPlot("default",{type:E,animate:{duration:2E3,
easing:u.bounceInOut},radius:e,markers:!0});a=a.colors;for(e=0;e<g.length;e++)b.addSeries(c[e],g[e],{stroke:{color:a[e%a.length]},fill:a[(e+1)%a.length]});new w(b,"default");new v(b,"default");new t(b,"default");b.render();return b},_createCountModeCharts:function(a,b){var d=[],c=a.config,e=c.types,k=c.categoryField,c="des"!==c.sortOrder,g={};l.forEach(a.featureSet.features,h.hitch(this,function(a){var b=a.attributes[k],c=null;g.hasOwnProperty(b)?(c=g[b],c.count++,c.dataFeatures.push(a)):(c={count:1,
dataFeatures:[a]},g[b]=c)}));var f=[],q=null,m;for(m in g)q=g[m],f.push({fieldValue:m,count:q.count,dataFeatures:q.dataFeatures});c?f.sort(function(a,b){return a.fieldValue<b.fieldValue?-1:a.fieldValue>b.fieldValue?1:0}):f.sort(function(a,b){return a.fieldValue<b.fieldValue?1:a.fieldValue>b.fieldValue?-1:0});l.forEach(e,h.hitch(this,function(c,g){try{var e=b[g],m=null;"column"===c?m=this._createCountModeColumnChart(a,e,f):"bar"===c?m=this._createCountModeBarChart(a,e,f):"line"===c?m=this._createCountModeLineChart(a,
e,f):"pie"===c&&(m=this._createCountModePieChart(a,e,f));m.connectToPlot("default",h.hitch(this,function(a){if("onmouseover"===a.type||"onmouseout"===a.type||"onclick"===a.type){var b=f[a.index].dataFeatures;"onmouseover"===a.type?this._mouseOverChartItem(b):"onmouseout"===a.type?this._mouseOutChartItem(b):"onclick"===a.type&&this._zoomToGraphics(b)}}));d.push(m)}catch(q){console.log(q)}}));return d},_createCountModeColumnChart:function(a,b,d){a=a.config;var c=a.categoryField;a=a.colors;var e=[],
k=[];l.forEach(d,h.hitch(this,function(a,b){var d=a.count,m=a.fieldValue.toString();e.push({value:b+1,text:c+" : "+m});k.push({y:d,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+c+" : "+this._tryLocaleNumber(m)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+this.nls.count+" : "+r.localizeNumber(d)+"\x3c/span\x3e\x3c/div\x3e"})}));b=new s(b);b.addPlot("default",{type:H,animate:{duration:2E3,easing:u.bounceInOut},
enableCache:!0,markers:!0,gap:2,minBarSize:2,maxBarSize:60});b.addAxis("x",{natural:!0,labels:e});b.addAxis("y",{vertical:!0,includeZero:!0,natural:!0});b.addSeries("default",k,{stroke:{color:a[0]},fill:a[1]});new w(b,"default");new v(b,"default");new t(b,"default");b.render();return b},_createCountModeBarChart:function(a,b,d){a=a.config;var c=a.categoryField;a=a.colors;var e=[],k=[];l.forEach(d,h.hitch(this,function(a,b){var d=a.count,m=a.fieldValue.toString();e.push({value:b+1,text:c+" : "+m});
k.push({y:d,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+c+" : "+this._tryLocaleNumber(m)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+this.nls.count+" : "+r.localizeNumber(d)+"\x3c/span\x3e\x3c/div\x3e"})}));b=new s(b);b.addPlot("default",{type:I,animate:{duration:2E3,easing:u.bounceInOut},enableCache:!0,markers:!0,gap:2,minBarSize:2,maxBarSize:60});b.addAxis("x",{vertical:!0,natural:!0,labels:e});b.addAxis("y",
{includeZero:!0,natural:!0});b.addSeries("default",k,{stroke:{color:a[0]},fill:a[1]});new w(b,"default");new v(b,"default");new t(b,"default");b.render();return b},_createCountModeLineChart:function(a,b,d){a=a.config;var c=a.categoryField;a=a.colors;var e=[],k=[];l.forEach(d,h.hitch(this,function(a,b){var d=a.count,m=a.fieldValue.toString();e.push({value:b+1,text:c+" : "+m});k.push({y:d,text:"",tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+
c+" : "+this._tryLocaleNumber(m)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+this.nls.count+" : "+r.localizeNumber(d)+"\x3c/span\x3e\x3c/div\x3e"})}));b=new s(b);b.addPlot("default",{type:D,animate:{duration:2E3,easing:u.cubicIn},markers:!0,tension:"S"});b.addAxis("x",{type:C,natural:!0,includeZero:!0,labels:e});b.addAxis("y",{vertical:!0,natural:!0});b.addSeries("default",k,{stroke:{color:a[0]},fill:a[1]});new G(b,"default");new v(b,"default");new t(b,"default");
b.render();return b},_createCountModePieChart:function(a,b,d){a=a.config;var c=a.categoryField;a=a.colors;var e=n.getContentBox(b),e=Math.floor(Math.min(e.w,e.h)/2)-3,k=[],g=[],f=0;l.forEach(d,h.hitch(this,function(a){f+=a.count}));l.forEach(d,h.hitch(this,function(a,b){var d=a.count,e=a.fieldValue.toString(),h=(100*(d/f)).toFixed(1)+"%";k.push({value:b+1,text:c+" : "+e});g.push({text:e,y:d,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+
c+" : "+this._tryLocaleNumber(e)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+this.nls.count+" : "+r.localizeNumber(d)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+h+"\x3c/span\x3e\x3c/div\x3e"})}));b=new s(b);b.setTheme(F);b.addPlot("default",{type:E,animate:{duration:2E3,easing:u.bounceInOut},radius:e,markers:!0});b.addSeries("default",g,{stroke:{color:a[0]},fill:a[1]});new w(b,"default");new v(b,"default");new t(b,"default");
b.render();return b},_createFieldModeCharts:function(a,b){var d=[],c=a.config,e=c.types,k=c.valueFields,g=c.operation;a.featureSet.features=l.filter(a.featureSet.features,h.hitch(this,function(a){return l.every(k,h.hitch(this,function(b){var c=a.attributes;return c&&this._isNumber(c[b])}))}));var c=l.map(a.featureSet.features,h.hitch(this,function(a){return a.attributes})),f={};l.forEach(k,h.hitch(this,function(a){f[a]=0}));l.forEach(c,h.hitch(this,function(a){l.forEach(k,h.hitch(this,function(b){var c=
a[b];f.hasOwnProperty(b)?"average"===g?f[b]=(f[b]+c)/2:"sum"===g?f[b]+=c:"max"===g?f[b]=Math.max(f[b],c):"min"===g&&(f[b]=Math.min(f[b],c)):f[b]=c}))}));l.forEach(e,h.hitch(this,function(c,e){try{var g=b[e],k=null;"column"===c?k=this._createFieldModeColumnChart(a,g,f):"bar"===c?k=this._createFieldModeBarChart(a,g,f):"line"===c?k=this._createFieldModeLineChart(a,g,f):"pie"===c&&(k=this._createFieldModePieChart(a,g,f));k.connectToPlot("default",h.hitch(this,function(a){if("onmouseover"===a.type||"onmouseout"===
a.type||"onclick"===a.type){var b=this.featureSet&&this.featureSet.features;"onmouseover"===a.type?this._mouseOverChartItem(b):"onmouseout"===a.type?this._mouseOutChartItem(b):"onclick"===a.type&&this._zoomToGraphics(b)}}));d.push(k)}catch(l){console.log(l)}}));return d},_createFieldModeColumnChart:function(a,b,d){var c=a.config;a=c.colors;var e=[],k=[];l.forEach(c.valueFields,h.hitch(this,function(a,b){var c=d[a];e.push({value:b+1,text:a});k.push({y:c,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+
a+" : "+r.localizeNumber(c)+"\x3c/span\x3e\x3c/div\x3e"})}));b=new s(b);b.addPlot("default",{type:H,animate:{duration:2E3,easing:u.bounceInOut},enableCache:!0,markers:!0,gap:2,minBarSize:2,maxBarSize:60});b.addAxis("x",{natural:!0,labels:e});b.addAxis("y",{vertical:!0,includeZero:!0,natural:!0});b.addSeries("default",k,{stroke:{color:a[0]},fill:a[1]});new w(b,"default");new v(b,"default");new t(b,"default");b.render();return b},_createFieldModeBarChart:function(a,b,d){var c=a.config;a=c.colors;var e=
[],k=[];l.forEach(c.valueFields,h.hitch(this,function(a,b){var c=d[a];e.push({value:b+1,text:a});k.push({y:c,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+a+" : "+r.localizeNumber(c)+"\x3c/span\x3e\x3c/div\x3e"})}));b=new s(b);b.addPlot("default",{type:I,animate:{duration:2E3,easing:u.bounceInOut},enableCache:!0,markers:!0,gap:2,minBarSize:2,maxBarSize:60});b.addAxis("x",{vertical:!0,natural:!0,labels:e});b.addAxis("y",{includeZero:!0,natural:!0});
b.addSeries("default",k,{stroke:{color:a[0]},fill:a[1]});new w(b,"default");new v(b,"default");new t(b,"default");b.render();return b},_createFieldModeLineChart:function(a,b,d){var c=a.config;a=c.colors;var e=[],k=[];l.forEach(c.valueFields,h.hitch(this,function(a,b){var c=d[a];e.push({value:b+1,text:a});k.push({y:c,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+a+" : "+r.localizeNumber(c)+"\x3c/span\x3e\x3c/div\x3e"})}));b=new s(b);b.addPlot("default",
{type:D,animate:{duration:2E3,easing:u.cubicIn},markers:!0,tension:"S"});b.addAxis("x",{type:C,natural:!0,includeZero:!0,labels:e});b.addAxis("y",{vertical:!0,natural:!0});b.addSeries("default",k,{stroke:{color:a[0]},fill:a[1]});new G(b,"default");new v(b,"default");new t(b,"default");b.render();return b},_createFieldModePieChart:function(a,b,d){var c=a.config;a=c.valueFields;var c=c.colors,e=n.getContentBox(b),e=Math.floor(Math.min(e.w,e.h)/2)-3,k=[],g=[],f=0,q;for(q in d)f+=d[q];l.forEach(a,h.hitch(this,
function(a,b){var c=d[a],e=(100*(c/f)).toFixed(1)+"%";k.push({value:b+1,text:a});g.push({text:a,y:c,tooltip:"\x3cdiv style\x3d'color:green;margin-right:10px;'\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+a+" : "+r.localizeNumber(c)+"\x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cspan style\x3d'white-space:nowrap;'\x3e"+e+"\x3c/span\x3e\x3c/div\x3e"})}));b=new s(b);b.setTheme(F);b.addPlot("default",{type:E,animate:{duration:2E3,easing:u.bounceInOut},radius:e,markers:!0});b.addSeries("default",g,{stroke:{color:c[0]},
fill:c[1]});new w(b,"default");new v(b,"default");new t(b,"default");b.render();return b}})});