//>>built
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dojo/store/Memory dgrid/OnDemandGrid esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/graphicsUtils esri/renderers/SimpleRenderer esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/renderers/jsonUtils esri/InfoTemplate ../BaseResultRenderer".split(" "),function(d,l,h,e,m,n,p,q,r,s,k,t,u,v,w,x,g){var c={};c.UnsupportRenderer=d(g,{baseClass:"jimu-gp-resultrenderer-base jimu-gp-renderer-unsupport",
postCreate:function(){this.inherited(arguments);e.setAttr(this.domNode,"innerHTML",this.message)}});c.SimpleResultRenderer=d(g,{baseClass:"jimu-gp-resultrenderer-base jimu-gp-renderer-simple",postCreate:function(){this.inherited(arguments);e.setAttr(this.domNode,"innerHTML",this.message)}});c.RecordSetTable=d([g],{baseClass:"jimu-gp-resultrenderer-base jimu-gp-renderer-table",postCreate:function(){this.inherited(arguments);var a=[];if(this.value.fields)a=this.value.fields;else if(this.value.features&&
0<this.value.features.length)for(var b in this.value.features[0].attributes)a.push({name:b});a=h.map(a,function(a){return{label:a.name,field:a.name}});b=h.map(this.value.features,function(a){return a.attributes});b=new n({data:b});this.table=new p({columns:a,store:b},this.domNode)},startup:function(){this.inherited(arguments);this.table.startup()}});c.DrawResultFeatureSet=d(g,{baseClass:"jimu-gp-resultrenderer-base jimu-gp-renderer-draw-feature",postCreate:function(){this.inherited(arguments);this._createDisplayText();
this._drawResultFeature(this.param,this.value)},destroy:function(){this.resultLayer&&this.map.removeLayer(this.resultLayer);this.inherited(arguments)},_createDisplayText:function(){e.create("span",{innerHTML:this.nls.drawnOnMap,style:{marginLeft:"15px"}},this.domNode);var a=e.create("a",{innerHTML:this.nls.clear,href:"#",style:{"float":"right"}},this.domNode);this.own(m(a,"click",l.hitch(this,function(){this.resultLayer&&this.map.removeLayer(this.resultLayer)})))},_drawResultFeature:function(a,b){this.config.shareResults?
(a.defaultValue.name=a.name,this.resultLayer=new r({layerDefinition:a.defaultValue,featureSet:null},{id:a.name})):this.resultLayer=new q({id:a.name});this.map.addLayer(this.resultLayer);a.popup||(a.popup={enablePopup:!0,title:"",fields:[]});if(a.popup.enablePopup){var c=new x(a.popup.title,this._generatePopupContent());this.resultLayer.setInfoTemplate(c)}var c=b.features.length,f=a.renderer;f?f=w.fromJson(f):"esriGeometryPoint"===b.geometryType?f=new k(new t):"esriGeometryPolyline"===b.geometryType?
f=new k(new u):"esriGeometryPolygon"===b.geometryType&&(f=new k(new v));for(var d=0;d<c;d++)this.resultLayer.add(b.features[d]);this.resultLayer.setRenderer(f);try{var e=s.graphicsExtent(b.features);e&&(this.resultLayer.initialExtent=e.expand(1.4))}catch(g){console.error(g)}},_generatePopupContent:function(){var a="";h.forEach(this.param.popup.fields,function(b){a=a+"\x3cb\x3e"+b.alias+": \x3c/b\x3e${"+b.name+"}\x3cbr\x3e"});return a}});return c});