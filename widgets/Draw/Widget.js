//>>built
require({cache:{"widgets/Draw/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:widgets/Draw/Widget.html":'\x3cdiv style\x3d"width:100%;height:100%;min-width:270px;min-height:192px;"\x3e\r\n  \x3clabel\x3e${nls.selectDrawMode}\x3c/label\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"drawBox" data-dojo-type\x3d"jimu/dijit/DrawBox" data-dojo-props\x3d\'types:["point","polyline","polygon","text"],showClear:true\' style\x3d"margin-top:5px;"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"settingContent" style\x3d"width:100%;"\x3e\r\n    \x3cdiv class\x3d"point-section" data-dojo-attach-point\x3d"pointSection"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"pointSymChooser" data-dojo-type\x3d"jimu/dijit/SymbolChooser" data-dojo-props\x3d\'type:"marker"\'\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"line-section" data-dojo-attach-point\x3d"lineSection"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"lineSymChooser" data-dojo-type\x3d"jimu/dijit/SymbolChooser" data-dojo-props\x3d\'type:"line"\'\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"polygon-section" data-dojo-attach-point\x3d"polygonSection"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"fillSymChooser" data-dojo-type\x3d"jimu/dijit/SymbolChooser" data-dojo-props\x3d\'type:"fill"\'\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"text-section" data-dojo-attach-point\x3d"textSection"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"textSymChooser" data-dojo-type\x3d"jimu/dijit/SymbolChooser" data-dojo-props\x3d\'type:"text"\'\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"measureSection" style\x3d"display:none;width:100%;margin-top:12px;"\x3e\r\n    \x3cdiv style\x3d"margin-bottom:7px;"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"showMeasure" type\x3d"checkbox" /\x3e\r\n      \x3cspan\x3e${nls.showMeasurements}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"areaMeasure" style\x3d"display:none;height:30px;margin-bottom:7px;"\x3e\r\n      \x3cdiv style\x3d"float:left;height:30px;;line-height:30px;padding-left:17px;"\x3e${nls.areaUnits}\x3c/div\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"areaUnitSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"float:right;width:50%;height:30px;"\x3e\x3c/select\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"distanceMeasure" style\x3d"display:none;height:30px;"\x3e\r\n      \x3cdiv style\x3d"float:left;height:30px;line-height:30px;padding-left:17px;"\x3e${nls.distanceUnits}\x3c/div\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"distanceUnitSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"float:right;width:50%;height:30px;"\x3e\x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Draw/css/style.css":".jimu-widget-draw{font-size:14px;}.jimu-widget-draw .dijitArrowButtonContainer{width: 40px;}.jimu-widget-draw .dijitSelect{height: 40px; width: 100%;}.dijitReset.dijitLeft.dijitButtonNode.dijitArrowButton.dijitDownArrowButton{width:100%;}.dijitReset.dijitLeft.dijitButtonNode.dijitArrowButton.dijitUpArrowButton{width:100%;}.dijitReset.dijitLeft.dijitButtonNode.dijitArrowButton.dijitDownArrowButton .dijitArrowButtonInner{width:100%;}.dijitReset.dijitLeft.dijitButtonNode.dijitArrowButton.dijitUpArrowButton .dijitArrowButtonInner{width:100%;}",
"url:widgets/Draw/config.json":'{\r\n  "distanceUnits": [{\r\n    "unit": "KILOMETERS",\r\n    "abbr": "km"\r\n  }, {\r\n    "unit": "MILES",\r\n    "abbr": "mi"\r\n  }, {\r\n    "unit": "METERS",\r\n    "abbr": "m"\r\n  }, {\r\n    "unit": "FEET",\r\n    "abbr": "ft"\r\n  }, {\r\n    "unit": "YARDS",\r\n    "abbr": "yd"\r\n  }],\r\n  "areaUnits": [{\r\n    "unit": "SQUARE_KILOMETERS",\r\n    "abbr": "sq km"\r\n  }, {\r\n    "unit": "SQUARE_MILES",\r\n    "abbr": "sq mi"\r\n  }, {\r\n    "unit": "ACRES",\r\n    "abbr": "ac"\r\n  }, {\r\n    "unit": "HECTARES",\r\n    "abbr": "ha"\r\n  }, {\r\n    "unit": "SQUARE_METERS",\r\n    "abbr": "sq m"\r\n  }, {\r\n    "unit": "SQUARE_FEET",\r\n    "abbr": "sq ft"\r\n  }, {\r\n    "unit": "SQUARE_YARDS",\r\n    "abbr": "sq yd"\r\n  }]\r\n}',
"*now":function(m){m(['dojo/i18n!*preload*widgets/Draw/nls/Widget*["ar","cs","da","de","en","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","ROOT"]'])}}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/BaseWidget esri/graphic esri/geometry/Point esri/symbols/SimpleMarkerSymbol esri/geometry/Polyline esri/symbols/SimpleLineSymbol esri/geometry/Polygon esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/symbols/Font esri/units esri/geometry/webMercatorUtils esri/geometry/geodesicUtils dojo/_base/lang dojo/on dojo/_base/html dojo/_base/Color dojo/_base/query dojo/_base/array dijit/form/Select dijit/form/NumberSpinner jimu/dijit/ViewStack jimu/dijit/SymbolChooser jimu/dijit/DrawBox jimu/utils".split(" "),function(m,
u,v,r,z,A,w,B,x,C,s,h,k,n,p,d,g,e,t,D,l,E,F,y,G,H,q){return m([v,u],{name:"Draw",baseClass:"jimu-widget-draw",defaultDistanceUnits:[],defaultAreaUnits:[],configDistanceUnits:[],configAreaUnits:[],distanceUnits:[],areaUnits:[],postCreate:function(){this.inherited(arguments);this.drawBox.setMap(this.map);this.viewStack=new y({viewType:"dom",views:[this.pointSection,this.lineSection,this.polygonSection,this.textSection]});e.place(this.viewStack.domNode,this.settingContent);this._initUnitSelect();this._bindEvents()},
_bindEvents:function(){this.own(g(this.drawBox,"IconSelected",d.hitch(this,this._onIconSelected)));this.own(g(this.drawBox,"DrawEnd",d.hitch(this,this._onDrawEnd)));this.own(g(this.pointSymChooser,"change",d.hitch(this,function(){this._setDrawDefaultSymbols()})));this.own(g(this.lineSymChooser,"change",d.hitch(this,function(){this._setDrawDefaultSymbols()})));this.own(g(this.fillSymChooser,"change",d.hitch(this,function(){this._setDrawDefaultSymbols()})));this.own(g(this.textSymChooser,"change",d.hitch(this,
function(a){this.drawBox.setTextSymbol(a)})));this.own(g(this.showMeasure,"click",d.hitch(this,this._setMeasureVisibility)))},_onIconSelected:function(a,b,c){this._setDrawDefaultSymbols();"point"===c?this.viewStack.switchView(this.pointSection):"polyline"===c?this.viewStack.switchView(this.lineSection):"polygon"===c?this.viewStack.switchView(this.polygonSection):"text"===c&&this.viewStack.switchView(this.textSection);this._setMeasureVisibility()},_onDrawEnd:function(a,b,c){a=a.geometry;"extent"===
a.type&&(c=a,a=new x(c.spatialReference),a.addRing([[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]),c="polygon");"polyline"===c?this.showMeasure.checked&&this._addLineMeasure(a):"polygon"===c&&this.showMeasure.checked&&this._addPolygonMeasure(a)},_initUnitSelect:function(){this._initDefaultUnits();this._initConfigUnits();this.distanceUnits=0<this.configDistanceUnits.length?this.configDistanceUnits:this.defaultDistanceUnits;this.areaUnits=0<this.configAreaUnits.length?
this.configAreaUnits:this.defaultAreaUnits;l.forEach(this.distanceUnits,d.hitch(this,function(a){this.distanceUnitSelect.addOption({value:a.unit,label:a.label})}));l.forEach(this.areaUnits,d.hitch(this,function(a){this.areaUnitSelect.addOption({value:a.unit,label:a.label})}))},_initDefaultUnits:function(){this.defaultDistanceUnits=[{unit:"KILOMETERS",label:this.nls.kilometers,abbr:"km"},{unit:"MILES",label:this.nls.miles,abbr:"mi"},{unit:"METERS",label:this.nls.meters,abbr:"m"},{unit:"FEET",label:this.nls.feet,
abbr:"ft"},{unit:"YARDS",label:this.nls.yards,abbr:"yd"}];this.defaultAreaUnits=[{unit:"SQUARE_KILOMETERS",label:this.nls.squareKilometers,abbr:"sq km"},{unit:"SQUARE_MILES",label:this.nls.squareMiles,abbr:"sq mi"},{unit:"ACRES",label:this.nls.acres,abbr:"ac"},{unit:"HECTARES",label:this.nls.hectares,abbr:"ha"},{unit:"SQUARE_METERS",label:this.nls.squareMeters,abbr:"sq m"},{unit:"SQUARE_FEET",label:this.nls.squareFeet,abbr:"sq ft"},{unit:"SQUARE_YARDS",label:this.nls.squareYards,abbr:"sq yd"}]},_initConfigUnits:function(){l.forEach(this.config.distanceUnits,
d.hitch(this,function(a){var b=a.unit;k[b]&&(b=this._getDefaultDistanceUnitInfo(b),a.label=b.label,this.configDistanceUnits.push(a))}));l.forEach(this.config.areaUnits,d.hitch(this,function(a){var b=a.unit;k[b]&&(b=this._getDefaultAreaUnitInfo(b),a.label=b.label,this.configAreaUnits.push(a))}))},_getDefaultDistanceUnitInfo:function(a){for(var b=0;b<this.defaultDistanceUnits.length;b++){var c=this.defaultDistanceUnits[b];if(c.unit===a)return c}return null},_getDefaultAreaUnitInfo:function(a){for(var b=
0;b<this.defaultAreaUnits.length;b++){var c=this.defaultAreaUnits[b];if(c.unit===a)return c}return null},_getDistanceUnitInfo:function(a){for(var b=0;b<this.distanceUnits.length;b++){var c=this.distanceUnits[b];if(c.unit===a)return c}return null},_getAreaUnitInfo:function(a){for(var b=0;b<this.areaUnits.length;b++){var c=this.areaUnits[b];if(c.unit===a)return c}return null},_setMeasureVisibility:function(){e.setStyle(this.measureSection,"display","none");e.setStyle(this.areaMeasure,"display","none");
e.setStyle(this.distanceMeasure,"display","none");var a=e.getStyle(this.lineSection,"display"),b=e.getStyle(this.polygonSection,"display");"block"===a?(e.setStyle(this.measureSection,"display","block"),this.showMeasure.checked&&e.setStyle(this.distanceMeasure,"display","block")):"block"===b&&(e.setStyle(this.measureSection,"display","block"),this.showMeasure.checked&&(e.setStyle(this.areaMeasure,"display","block"),e.setStyle(this.distanceMeasure,"display","block")))},_getPointSymbol:function(){return this.pointSymChooser.getSymbol()},
_getLineSymbol:function(){return this.lineSymChooser.getSymbol()},_getPolygonSymbol:function(){return this.fillSymChooser.getSymbol()},_getTextSymbol:function(){return this.textSymChooser.getSymbol()},_setDrawDefaultSymbols:function(){this.drawBox.setPointSymbol(this._getPointSymbol());this.drawBox.setLineSymbol(this._getLineSymbol());this.drawBox.setPolygonSymbol(this._getPolygonSymbol())},onClose:function(){this.drawBox.deactivate()},_addLineMeasure:function(a){var b=new h("16px",h.STYLE_ITALIC,
h.VARIANT_NORMAL,h.WEIGHT_BOLD,"Courier"),c=new t([0,0,0,1]),d=a.getExtent().getCenter(),f=n.webMercatorToGeographic(a);a=this.distanceUnitSelect.value;f=p.geodesicLengths([f],k[a]);a=this._getDistanceUnitInfo(a).abbr;a=q.localizeNumber(f[0].toFixed(1))+" "+a;b=new s(a,b,c);d=new r(d,b,null,null);this.drawBox.addGraphic(d)},_addPolygonMeasure:function(a){var b=new h("16px",h.STYLE_ITALIC,h.VARIANT_NORMAL,h.WEIGHT_BOLD,"Courier"),c=new t([0,0,0,1]),d=a.getExtent().getCenter(),f=n.webMercatorToGeographic(a),
e=this.areaUnitSelect.value,g=this._getAreaUnitInfo(e).abbr,f=p.geodesicAreas([f],k[e]),g=q.localizeNumber(f[0].toFixed(1))+" "+g,f=new w(a.spatialReference);a=a.rings[0];a=a.slice(0,a.length-1);f.addPath(a);f=n.webMercatorToGeographic(f);e=this.distanceUnitSelect.value;a=this._getDistanceUnitInfo(e).abbr;f=p.geodesicLengths([f],k[e]);a=q.localizeNumber(f[0].toFixed(1))+" "+a;b=new s(g+"    "+a,b,c);d=new r(d,b,null,null);this.drawBox.addGraphic(d)},destroy:function(){this.drawBox&&(this.drawBox.destroy(),
this.drawBox=null);this.pointSymChooser&&(this.pointSymChooser.destroy(),this.pointSymChooser=null);this.lineSymChooser&&(this.lineSymChooser.destroy(),this.lineSymChooser=null);this.fillSymChooser&&(this.fillSymChooser.destroy(),this.fillSymChooser=null);this.textSymChooser&&(this.textSymChooser.destroy(),this.textSymChooser=null);this.inherited(arguments)},startup:function(){this.inherited(arguments);this.viewStack.startup();this.viewStack.switchView(null)}})});